"use strict";(self.webpackChunkfindagrave_frontend=self.webpackChunkfindagrave_frontend||[]).push([[2237],{5339:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(3336);function r(e){if(e.length>0){var a=n(e),t=n(window),r=t.scrollTop(),i=r+t.height(),o=a.offset().top;return o+a.height()<=i&&o>=r}return!1}},8282:(e,a,t)=>{t.d(a,{Z:()=>o});var n=t(3336),r=function(e,a,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var a;e.done?r(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(o,s)}l((n=n.apply(e,a||[])).next())}))},i=function(e,a){var t,n,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=a.call(e,o)}catch(e){i=[6,e],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function o(e){return void 0===e&&(e={768:{min:200,offset:300,lines:2},1024:{min:800,offset:400,lines:7},1650:{min:800,offset:700,lines:10},default:{min:1e3,offset:1100,lines:12}}),r(this,void 0,void 0,(function(){var a,r,o,s,l,d,h,c;return i(this,(function(i){switch(i.label){case 0:return/(gle|ing)bot/.test(navigator.userAgent)?[3,2]:[4,t.e(5104).then(t.bind(t,5104))];case 1:if(a=i.sent().default,r=n(window).width(),o=Object.keys(e).map((function(e){return Number(e)})).filter((function(e){return!Number.isNaN(e)})).sort((function(e,a){return e-a})).find((function(e){return r<e}))||"default",s=e[o],l=s.min,d=s.offset,h=s.lines,(c=n("#fullBio").html())&&c.length<l+d)return[2];n("#partBio").html(a(c,l,{html:!0,maxLines:h})),n("#bio-overflow").show(),n("a.bio-more").on("click",(function(e){e.preventDefault(),n("#bio-overflow").hide(),n("#partBio").addClass("d-none"),n("#fullBio").removeClass("d-none")})),i.label=2;case 2:return[2]}}))}))}},4430:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(3336),r=t.n(n),i=function(e,a,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var a;e.done?r(e.value):(a=e.value,a instanceof t?a:new t((function(e){e(a)}))).then(o,s)}l((n=n.apply(e,a||[])).next())}))},o=function(e,a){var t,n,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=a.call(e,o)}catch(e){i=[6,e],n=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const s=function(){function e(e){this.recaptcha=e,this.initializeSharing()}return e.prototype.initializeSharing=function(){var e=this;r()(".ss-fb").on("click",(function(){r()("#share_email").hasClass("show")&&r()("#share_email").collapse("toggle"),window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURI(findagrave.linkToShare)+"&hashtag=findagrave","pop","width=800, height=600, scrollbars=no")})),r()(".ss-tw").on("click",(function(){r()("#share_email").hasClass("show")&&r()("#share_email").collapse("toggle"),window.open("https://twitter.com/intent/tweet?url="+encodeURI(findagrave.linkToShare)+"&text="+encodeURI(findagrave.shareTitle)+"&via=findagrave","pop","width=800, height=600, scrollbars=no")})),r()(".ss-pn").on("click",(function(){var e=findagrave.defaultPhotoToShare;findagrave.photoToShare&&(e=findagrave.photoToShare),r()("#share_email").hasClass("show")&&r()("#share_email").collapse("toggle"),window.open("https://pinterest.com/pin/create/button/?url="+encodeURI(findagrave.linkToShare)+"&media="+e,"pop","width=1050, height=880, scrollbars=no")})),r()(".ss-em").on("click",(function(){r()(".ss-icons").addClass("on"),r()(this).addClass("active").siblings().removeClass("active"),r()("#share_email").collapse("toggle")})),r()("#sendShareEmail").on("click",(function(){if(e.validateForm()){r()("#sendShareEmail").attr("disabled","true"),r()("#shareCaptchaMessage").addClass("hidden"),r()("#share_failed").addClass("hidden");var a=[];r()("#share_target_emails").children().each((function(e,t){var n=r()(t).find("input").val();a.push(n)}));var t=a.join("|");r()("#emailList").val(t),r().ajax({type:"POST",url:"/send-share-email",data:r()("#share_form").serialize(),success:function(a){r()("#sendShareEmail").prop("disabled",!1);var t=a;"Success"===t.status&&(grecaptcha.reset(e.recaptcha.shareCaptcha),r()("#shareCaptchaMessage").addClass("hidden"),r()("#shareCaptcha").addClass("hidden"),r()("#share_failed").addClass("hidden"),r()("#email-friend").val(""),r()("#email-link").trigger("click"),r()("#closeShare").trigger("click")),"Failure"===t.status&&(grecaptcha.reset(e.recaptcha.shareCaptcha),"floodControl"===t.message?(r()("#shareCaptchaMessage").removeClass("hidden"),r()("#shareCaptcha").removeClass("hidden")):r()("#share_failed").removeClass("hidden"))}})}})),r()("#cancelEmail").on("click",(function(){r()("#share_email").collapse("toggle")})),r()("#share_email").on("hide.bs.collapse",(function(){r()(".ss-em").hasClass("active")&&(r()(".ss-em").removeClass("active"),r()(".ss-icons").removeClass("on"));r()("#share_target_emails").html('<li><p id="target_warn0" class="alert hidden icon-warning alert-danger">The email does not appear to be a valid email address. Verify and try again.</p><input type="email" name="target0" class="form-control" id="target0" placeholder="name@email.com"></li>'),"email"===r()("#email-user").attr("type")&&r()("#email-user").val(""),r()("#sendShareEmail").prop("disabled",!1),r()("#shareCaptchaMessage").addClass("hidden"),r()("#shareCaptcha").addClass("hidden"),r()("#share_failed").addClass("hidden"),grecaptcha.reset(e.recaptcha.shareCaptcha)})),r()("#shareMemorial").one("show.bs.modal",(function(){return i(this,void 0,void 0,(function(){return o(this,(function(a){switch(a.label){case 0:return[4,e.recaptcha.renderShareCaptcha()];case 1:return a.sent(),[2]}}))}))})),r()("#shareMemorial").on("hidden.bs.modal",(function(){r()(".ss-em").removeClass("active").siblings().removeClass("active"),r()(".ss-icons").removeClass("on"),r()("#share_email").hasClass("show")&&r()("#share_email").collapse("toggle")})),r()(".addmore").on("click",(function(a){a&&(a.stopPropagation(),a.preventDefault());var t=r()("#share_target_emails"),n=t.children().length,i='<p class="form-inline"><input class="form-control" type="email" id="target'+n+'" name="target'+n+'" placeholder="name@email.com"><a href="#" class="removebutton close" role="button" onclick="return false;" aria-label="Close"><span aria-hidden="true">&times;</span></a></p><p id="target_warn'+n+'" class="alert hidden icon-warning alert-danger">The email does not appear to be a valid email address. Verify and try again.</p>',o=r()("<li>");o.html(i),t.append(o),o.find(".removebutton").on("click",(function(){e.removeEmail(this)})),t.scrollTop(n*o.height())}))},e.prototype.removeEmail=function(e){var a=r()(e).closest("li");a.parent();a.remove(),this.renumberEmails()},e.prototype.renumberEmails=function(){var e=r()("#share_target_emails").children(),a=e.length;e.each((function(e,t){r()(t).find(".alert").prop("id","target_warn"+e),r()(t).find("input").prop("id","target"+e),r()(t).find("input").prop("name","target"+e),e==a-1||r()(t).find("a").removeClass("hidden"),e++}))},e.prototype.isValidEmail=function(e){return/^[A-Za-z0-9\._\+-]+@[A-Za-z0-9_\+-]+(\.\w+)+$/.test(e)},e.prototype.validateForm=function(){var e=!0,a=this,t=r()("#share_target_emails"),n=!1,i=t.find("li"),o=i.length;i.each((function(t,i){var s=r()(i),l=s.find("input"),d=l.val().trim();0==d.length&&o>1?(s.remove(),n=!0,o--):(l.val(d),a.isValidEmail(d)?(s.find(".alert").addClass("hidden"),s.find(".form-control").removeClass("show-error")):(s.find(".alert").removeClass("hidden"),s.find(".form-control").addClass("show-error"),e=!1))})),n&&this.renumberEmails();var s=r()("#email-user").val().trim();return r()("#email-user").val(s),this.isValidEmail(s)?(r()("#emailSource_warn").addClass("hidden"),r()("#emailSource_warn").find(".form-control").removeClass("show-error")):(r()("#emailSource_warn").removeClass("hidden"),r()("#emailSource_warn").find(".form-control").addClass("show-error"),e=!1),e},e}()},1665:(e,a,t)=>{t.d(a,{ZP:()=>d});var n=t(3336),r=t.n(n),i=(t(1426),t(5317)),o=t.n(i),s=t(2561),l=t(8380);function d(){return{singleTypeahead:function(e){this.settings=r().extend({},this.defaults,e);var a=this,t=new TextEncoder,n=new(o())({datumTokenizer:function(e){return o().tokenizers.whitespace(e.text)},queryTokenizer:o().tokenizers.whitespace,remote:{url:"/location/typeahead/%prefix?cs="+(this.settings.type||h),wildcard:"%prefix",prepare:function(e,a){return a.skipLoad=t.encode(e).length<3,a.url=a.url.replace("%prefix",e),a},transport:function(e,t,n){e.skipLoad?t([]):r().ajax(e).done((function(e,n,r){a.settings.noContinents&&(e=e.filter((function(e){return!e.payload.id.includes("continent")}))),t(e)})).fail((function(e,a,t){n(t)}))}}});return this.typeaheadEl=r()(this.settings.inputId),this.typeahead=this.typeaheadEl.typeahead(this.settings.displayOptions,{name:this.settings.inputId.replace(/[#.]/,""),source:n.ttAdapter(),displayKey:"text",limit:5,templates:{notFound:function(e){var a=e.query;return t.encode(a).length<3?l.render():s.render()}}}),this.clearLocation=this.typeaheadEl.parents(".btn-group, .input-group").find(".clear-search"),this.targetId=r()(this.settings.targetId),this.typeahead.on("typeahead:autocomplete typeahead:select",(function(e,t){a.targetId.val(null==t?void 0:t.payload.id).data("d",t),a.typeahead.trigger("typeahead:set",[null==t?void 0:t.payload.id]),a.targetId.trigger("change"),a.topSuggestion=t,a.clearLocation.removeClass("hidden")})).on("typeahead:change",(function(e){a.settings.onChange.call(a,e)})).on("typeahead:render",(function(e,t){t&&t.length>0&&t[0].payload&&(a.topSuggestion=t[0])})),a.typeahead.typeahead("val")&&a.typeahead.typeahead("val").trim().length>0&&a.clearLocation.removeClass("hidden"),a.clearLocation.on("click",(function(){a.typeahead.typeahead("val",""),a.typeahead.trigger("typeahead:clear"),a.typeahead.trigger("focus"),a.targetId.val("").removeData("d"),a.targetId.trigger("change"),a.topSuggestion=null,r()(this).addClass("hidden")})),a.typeaheadEl.on("keydown",(function(e){13==e.which||9==e.which?t.encode(a.typeahead.typeahead("val").trim()).length>=3?a.topSuggestion?(a.targetId.val(a.topSuggestion.payload.id).data("d",a.topSuggestion),a.typeahead.typeahead("val",a.topSuggestion.text),a.typeahead.trigger("typeahead:set",[a.topSuggestion.payload.id]),a.targetId.trigger("change"),a.clearLocation.removeClass("hidden")):e.preventDefault():a.typeahead.typeahead("val",""):["arrowup","arrowdown","arrowleft","arrowright","end","home","pagedown","pageup","meta","control","alt"].includes(e.key.toLowerCase())||e.metaKey||e.ctrlKey||(a.topSuggestion=null);return r()(this).val().trim().length>0?a.clearLocation.removeClass("hidden"):a.clearLocation.addClass("hidden"),a.settings.enterSubmitsForm||13!=e.which})).on("click",(function(e){a.topSuggestion&&a.typeahead.typeahead("val").trim().length>=3&&(a.targetId.val(a.topSuggestion.payload.id).data("d",a.topSuggestion),a.typeahead.typeahead("val",a.topSuggestion.text),a.typeahead.trigger("typeahead:set",[a.topSuggestion.payload.id]),a.targetId.trigger("change"),a.typeahead.typeahead("close"),a.clearLocation.removeClass("hidden"))})),a},defaults:{inputId:"#location",targetId:"#locationId",type:h,enterSubmitsForm:!0,noContinents:!1,displayOptions:{hint:!0,highlight:!0,minLength:1},onChange:function(e){this.typeahead.typeahead("val").trim().length>=3?(this.topSuggestion?(this.targetId.val(this.topSuggestion.payload.id).data("d",this.topSuggestion),this.typeahead.trigger("typeahead:set",[this.topSuggestion.payload.id]),this.targetId.trigger("change"),this.typeahead.typeahead("val",this.topSuggestion.text),this.typeahead.typeahead("close")):this.targetId.val("").removeData("d"),this.clearLocation.removeClass("hidden")):(this.targetId.val("").removeData("d"),this.typeahead.trigger("typeahead:clear"),this.targetId.trigger("change"),this.clearLocation.addClass("hidden"))}}}}var h='["loc"]'}}]);