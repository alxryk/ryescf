(self.webpackChunkfindagrave_frontend=self.webpackChunkfindagrave_frontend||[]).push([[8556],{6141:(e,t,o)=>{"use strict";o.d(t,{Z:()=>b});var a=o(3336),n=o.n(a);const r=function(){function e(){this.didScroll=!1,this.lastScrollTop=0,this.delta=5,this.navbarHeight=n()("header").outerHeight(),n()(window).width()<768&&n()(".scroll-prad").hide(),window.self!=window.top&&n()("#hidden-back").removeClass("hidden"),n()("#modal-tutorial-video").on("show.bs.modal",(function(){n()("#tutorial-video").attr("src",n()("#tutorial-video").attr("data-src"))})),n()("#modal-tutorial-video").on("hide.bs.modal",(function(){n()("#tutorial-video").attr("src","")})),this.mobileNav=new i,this.initializeMainLinks(),this.initializeAccordion(),this.initializeScrolling(),this.initializeDialogs(),window.backToTop=function(e){if(n()(".list-item-page[data-url='page=1']").length>0)n()("HTML, BODY").animate({scrollTop:0},700);else{var t=window.location.search.replace(/[&?]page=\d+/g,"").replace(/#\w*/g,""),o="";o=t?t+"&page=1":"?page=1",e&&(o+=e),window.location.href=window.location.pathname+o}}}return e.prototype.initializeMainLinks=function(){var e=window.location.pathname.split("/")[1];n()("#main-nav-list").find(".main-nav-list li a").removeClass("active"),e.match(/^memorial/g)&&n()("#main-nav-list .main-nav-list").find(".memorialActive").addClass("active"),e.match(/cemetery/gi)&&n()("#main-nav-list .main-nav-list").find(".cemeteryActive").addClass("active"),(e.match(/famous-memorial/g)||e.match(/necrology/gi)||e.match(/posthumous-reunion/gi)||e.match(/interesting/gi)||e.match(/posthumous-reunion/gi)||e.match(/most-popular/gi)||e.match(/new-listings/gi)||e.match(/geographic/gi)||e.match(/claim-to-fame/gi))&&n()("#main-nav-list .main-nav-list").find(".famousActive").addClass("active"),(e.match(/contribute/gi)||e.match(/transcribe/gi)||e.match(/upload-excel/gi)||e.match(/edit-request/gi)||e.match(/photo-request/gi))&&n()("#main-nav-list .main-nav-list").find(".contributeActive").addClass("active"),e.match(/help/gi)&&n()("#main-nav-list .main-nav-list").find(".helpActive").addClass("active"),n()(document).on("click",".mem-id",(function(e){this.select(),e.preventDefault(),e.stopPropagation()}))},e.prototype.initializeAccordion=function(){n()("#PRaccordion").on("shown.bs.collapse",(function(){var e=n()(this).find(".show");n()("html, body").animate({scrollTop:e.offset().top-100},800)})),n()("#accordion").on("show.bs.collapse",(function(e){n()(e.target).prev().attr("data-parent")||n()("#accordion .panel.question-container").find(".panel-collapse.collapse").collapse("hide")})),n()("#accordion").on("shown.bs.collapse",(function(e){var t=n()(this).find(".in");n()(e.target).prev().attr("data-parent")||(n()("#accordion .panel.question-container").find(".panel-collapse.collapse").collapse("hide"),n()("html, body").animate({scrollTop:t.offset().top-100},800))}))},e.prototype.initializeScrolling=function(){var e=this;n()(window).on("scroll",(function(t){e.didScroll=!0})),setInterval((function(){e.didScroll&&(e.hasScrolled(),e.didScroll=!1)}),250),n()(".js--scroll-top").on("click",(function(){return n()("html, body").animate({scrollTop:0},700),!1}))},e.prototype.initializeDialogs=function(){n()(".modal").on("shown.bs.modal",(function(e){n()("body").addClass("modal-open")})),n()(".modal").on("hidden.bs.modal",(function(e){n()("body").css("padding-right","0")})),n()('[data-bs-toggle="popover"]').popover(),n()(window).on("resize",(function(){n()('[data-bs-toggle="popover"]').popover("hide")}))},e.prototype.hasScrolled=function(){var e=n()(this).scrollTop();Math.abs(this.lastScrollTop-e)<=this.delta||n()(window).width()>=768||(e>this.lastScrollTop&&e>this.navbarHeight?(n()("header").css("top",-n()("#header-main").height()),n()("#js--memorial-form").css("top","0")):e+n()(window).height()<n()(document).height()&&(n()("header").css("top",""),n()("#js--memorial-form").css("top","")),this.lastScrollTop=e)},e}();var i=function(){function e(){this.navIsOpen=!1;var e=this;n()(".ham-btn").on("click",(function(t){t.stopPropagation(),e.navIsOpen?e.close():e.open()})),n()(".content").on("click",(function(t){e.navIsOpen&&e.close()}))}return e.prototype.open=function(){n()("body").addClass("nav-open"),n()(".ham-btn").attr("aria-expanded","true"),n()("#main-nav-list").attr("aria-hidden","false"),this.navIsOpen=!0},e.prototype.close=function(){n()("body").removeClass("nav-open"),n()(".ham-btn").attr("aria-expanded","false"),n()("#main-nav-list").attr("aria-hidden","true"),this.navIsOpen=!1},e}(),s=function(e,t,o,a){return new(o||(o=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},c=function(e,t){var o,a,n,r,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,a&&(n=2&r[0]?a.return:r[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,r[1])).done)return n;switch(a=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){i.label=r[1];break}if(6===r[0]&&i.label<n[1]){i.label=n[1],n=r;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(r);break}n[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};const l=function(){function e(e,t){this.memContrib=e,this.contrib=t;this.grecaptchaLoadedPromise=new Promise((function(e){window.onloadCallback=function(){e()}})),window.enableSubmit=this.enableSubmit,window.disableSubmit=this.disableSubmit,n()("footer").after('<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer ><\/script>')}return e.prototype.enableSubmit=function(e){n()("#submit-reset-btn").prop("disabled",!1),n()("#error-1002").addClass("hidden")},e.prototype.disableSubmit=function(e){n()("#submit-reset-btn").attr("disabled","disabled")},e.prototype.renderRegistrationCaptcha=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.grecaptchaLoadedPromise];case 1:return e.sent(),this.registrationCaptcha=window.grecaptcha.render("recaptchaRegistration",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",hl:"{{locale}}"}),[2]}}))}))},e.prototype.renderLoginCaptcha=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.grecaptchaLoadedPromise];case 1:return e.sent(),this.loginCaptcha=window.grecaptcha.render("recaptchaLogin",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",callback:"enableSubmit","expired-callback":"disableSubmit","error-callback":"disableSubmit",hl:"{{locale}}"}),[2]}}))}))},e.prototype.renderShareCaptcha=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.grecaptchaLoadedPromise];case 1:return e.sent(),this.shareCaptcha=window.grecaptcha.render("shareCaptcha",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",hl:"{{locale}}"}),[2]}}))}))},e.prototype.renderMemorialEditCaptcha=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.memContrib==this.contrib?[3,2]:[4,this.grecaptchaLoadedPromise];case 1:e.sent(),this.editCaptcha=window.grecaptcha.render("recaptchaEdit",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",hl:"{{locale}}"}),this.emailCaptcha=window.grecaptcha.render("recaptchaEmail",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",hl:"{{locale}}"}),e.label=2;case 2:return[2]}}))}))},e.prototype.renderMessageUserCaptcha=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.grecaptchaLoadedPromise];case 1:return e.sent(),this.messageCaptcha=window.grecaptcha.render("recaptchaMessage",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",hl:"{{locale}}"}),[2]}}))}))},e.prototype.resetMessageUserCaptcha=function(){window.grecaptcha.reset(this.messageCaptcha)},e.prototype.renderContactCaptcha=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.grecaptchaLoadedPromise];case 1:return e.sent(),this.contactCaptcha=window.grecaptcha.render("recaptchaContact",{sitekey:"6LcBKBATAAAAAPop7Pa4s7tUKhHlmxMRs4LidGjO",hl:"{{locale}}",callback:function(){n()("#recaptchaContact textarea[name='g-recaptcha-response']").trigger("change")},"expired-callback":function(){n()("#recaptchaContact textarea[name='g-recaptcha-response']").trigger("change")}}),[2]}}))}))},e}();var d=o(7497),u=o(1224),h=o(8169),p=function(){return p=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},p.apply(this,arguments)},m=function(e,t,o,a){return new(o||(o=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},f=function(e,t){var o,a,n,r,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,a&&(n=2&r[0]?a.return:r[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,r[1])).done)return n;switch(a=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){i.label=r[1];break}if(6===r[0]&&i.label<n[1]){i.label=n[1],n=r;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(r);break}n[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};function g(){return m(this,void 0,void 0,(function(){var e,t,a,n;return f(this,(function(r){switch(r.label){case 0:e=(0,h.ej)("overrideLanguage")||(0,h.ej)("preferredLanguage")||"en",-1===["en","de","es","fr","fr-ca","it","nl","pt","sv"].indexOf(e)&&(e="en"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o(8746)("./".concat(e,".json"))];case 2:return v(t=r.sent().default),(a={})["fr-ca"===e?"fr-CA":e]={translation:t},[2,u.Z.init({lng:e,resources:a})];case 3:return n=r.sent(),console.log("Failed to retrieve translations",n),[3,4];case 4:return[2]}}))}))}function v(e){Object.getOwnPropertyNames(e).sort().forEach((function(t){if("string"==typeof e[t])e[t]=e[t].replace(/{{{/g,"{{-").replace(/}}}/g,"}}");else if("object"==typeof e[t]&&e[t].hasOwnProperty("one")&&e[t].hasOwnProperty("other")){var o=p({},e[t]);e[t]=o.one.replace("%s","{{count}}"),e[t+"_plural"]=o.other.replace("%s","{{count}}")}else v(e[t])}))}o(3138),o(7189);var y=o(3336);const b=function(){this.navigation=new r,this.recaptcha=new l(memContrib,contrib),this.authentication=new d.Z(this.recaptcha),g().then((function(e){window.i18next={t:e},y(document).trigger("i18nLoaded")}))}},2739:(e,t,o)=>{"use strict";o.d(t,{Z:()=>R});var a=o(5396),n=o(9056),r=o(9603),i=o(2965),s=o(7877),c=o(1545),l=o(2127),d=o(1954),u=o(9127),h=o(152),p=o(2006),m=o(6158),f=o.n(m),g=o(9167),v=o.n(g),y=o(3336),b=function(){return b=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},b.apply(this,arguments)},w=function(e,t,o,a){return new(o||(o=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function s(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},C=function(e,t){var o,a,n,r,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,a&&(n=2&r[0]?a.return:r[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,r[1])).done)return n;switch(a=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){i.label=r[1];break}if(6===r[0]&&i.label<n[1]){i.label=n[1],n=r;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(r);break}n[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},k=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var a,n,r=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return i},P=function(e,t,o){if(o||2===arguments.length)for(var a,n=0,r=t.length;n<r;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},L=o(4047),x=o(4198);const R=function(){function e(e,t,o,a){void 0===t&&(t=!0),void 0===o&&(o=!0),this.baseUrl="/cemetery/near-me",this.geoHashes=new Set,this.boundsUpdateHandler=a||this.refreshDataOnBoundsChange,f().accessToken=findagrave.mapboxAccessToken||"pk.eyJ1IjoiYW5jZXN0cnltYXBib3giLCJhIjoiNllqcGhKYyJ9.p9QKjx4kc2E_55jLTmDw0Q",this.map=window.map=new(f().Map)(b({style:findagrave.mapboxStyle||"mapbox://styles/ancestrymapbox/cl5gxd579000014l7rh9tjp3b",zoom:10,minZoom:7,maxZoom:15.99,container:e.container||"map_canvas_lg"},e)),this.map.addControl(new(v())),t&&this.map.addControl(new(f().NavigationControl),"bottom-right"),o&&this.map.addControl(new(f().FullscreenControl)),this.addListeners()}return e.prototype.loadInitialDataGeoHash=function(){var e=this,t=this.map.getCenter(),o=(0,a.encode)(t.lat,t.lng,3),n="".concat(e.baseUrl,"?bbox=").concat(JSON.stringify(e.decodeGeoHash(o)),"&count=9999&start=0");this.getJSON(n).then((function(t){if(y("#loader").addClass("hidden"),e.geoHashes.add(o),e.map.loaded()){var a=e.createCemeteryMarkers(t.cemeteries);e.addSourceAndLayers(a,o)}else e.map.on("load",(function(){var a=e.createCemeteryMarkers(t.cemeteries);e.addSourceAndLayers(a,o)}));"#list"===document.location.hash?(y("#cemetery-list").html(L.render({cemeteries:t.cemeteries})),y("#cemetery-list").show()):(y("#cemetery-map").css("visibility","visible"),e.map.resize())}))},e.prototype.getCemeteries=function(e,t){return this.getJSON(e).then((function(e){return{data:e,geohash:t}}))},e.prototype.getMap=function(){return this.map},e.prototype.updateMarkers=function(e){var t=this.createCemeteryMarkers(e),o=this.map.getSource("markers-");o?o.setData(t):this.addSourceAndLayers(e,"")},e.prototype.mapCemeteries=function(e,t){var o=this;this.geoHashes.add("");var a=this.createCemeteryMarkers(e);o.map.loaded()?o.addSourceAndLayers(a,t):o.map.on("load",(function(){o.addSourceAndLayers(a,t)}))},e.prototype.createCemeteryMarkers=function(e){var t={type:"FeatureCollection",features:[]};return t.features=e.map((function(e){var t=x.render(e),o="cemetery";return e.locationPrecision&&e.checked?o="cemetery-nonprecise-selected":e.locationPrecision>0?o="cemetery-nonprecise":e.photoRequests>0&&e.checked?o="cemetery-open-selected":e.photoRequests>0?o="cemetery-open":e.interments>0&&e.checked&&(o="cemetery-selected"),{type:"feature",properties:{title:e.name,description:t,"marker-symbol":o,cemetery:{cemeteryId:e.cemeteryId,name:e.name,cemeteryNameForURL:e.cemeteryNameForURL,fileName:e.fileName,locationName:e.locationName,locationPrecision:e.locationPrecision,photoRequests:e.photoRequests,interments:e.interments,photographed:e.photographed,alias:e.alias}},geometry:{type:"Point",coordinates:[e.location.lon,e.location.lat]}}})),t},e.prototype.addSourceAndLayers=function(e,t){this.map.addSource("markers-".concat(t),{type:"geojson",data:e,cluster:!0,clusterRadius:50,clusterMinPoints:2}),this.map.addLayer({id:"markers-".concat(t),type:"symbol",source:"markers-".concat(t),maxzoom:13.1,layout:{"icon-image":"{marker-symbol}","icon-size":.5,"icon-allow-overlap":!0},paint:{"icon-opacity":.95}},"poi_label"),this.map.addLayer({id:"cemeteryNames-".concat(t),type:"symbol",source:"markers-".concat(t),minzoom:13,layout:{"icon-image":"{marker-symbol}","icon-size":.5,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-padding":0,"text-field":"{title}","text-size":14,"text-max-width":8,"text-offset":[0,2],"text-anchor":"bottom","text-ignore-placement":!0,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"]},paint:{"text-color":"#000000","text-opacity":.95,"text-translate":[0,12],"text-halo-width":1,"text-halo-color":"rgba(255,255,255,1)"}}),this.map.addLayer({id:"cluster-".concat(t),type:"circle",source:"markers-".concat(t),paint:{"circle-color":"#cc6600","circle-radius":18,"circle-opacity":1},filter:[">=","point_count",2]}),this.map.addLayer({id:"cluster-count-".concat(t),type:"symbol",source:"markers-".concat(t),layout:{"text-field":"{point_count}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":16},paint:{"text-color":"#ffffff"}})},e.prototype.addListeners=function(){var e=this,t=this;this.map.on("click",(function(o){return w(e,void 0,void 0,(function(){var e,a,n,r,i;return C(this,(function(s){switch(s.label){case 0:return e=P([],k(t.geoHashes.values()),!1),(a=t.map.queryRenderedFeatures(o.point,{layers:e.reduce((function(e,t){return e.push("markers-".concat(t)),e.push("cemeteryNames-".concat(t)),e}),[])})).length?[3,4]:(a=t.map.queryRenderedFeatures(o.point,{layers:e.reduce((function(e,t){return e.push("cluster-".concat(t)),e.push("cluster-count-".concat(t)),e}),[])})).length?t.map.getZoom()<14?(t.map.easeTo({center:o.lngLat.wrap(),zoom:t.map.getZoom()+1}),[3,3]):[3,1]:[3,3];case 1:return[4,t.getClusterLeaves(a[0],a[0].properties.point_count)];case 2:n=s.sent(),r=n.map((function(e){return x.render(e.properties.cemetery)})).join("\n"),(new(f().Popup)).setLngLat(n[0].geometry.coordinates).setHTML(r).addTo(t.map),s.label=3;case 3:return[2];case 4:return i=a[0],(new(f().Popup)).setLngLat(i.geometry.coordinates).setHTML(i.properties.description).addTo(t.map),[2]}}))}))})),this.map.on("mousemove",(function(e){var o=P([],k(t.geoHashes.values()),!1),a=t.map.queryRenderedFeatures(e.point,{layers:o.reduce((function(e,t){return e.push("markers-".concat(t)),e.push("cluster-".concat(t)),e}),[])});t.map.getCanvas().style.cursor=a.length?"pointer":""})),this.boundsUpdateHandler()},e.prototype.refreshDataOnBoundsChange=function(){var e=this,t=(0,n.R)((function(e){l.map.on("zoomend",e)})),o=(0,n.R)((function(e){l.map.on("moveend",e)})),l=this;(0,r.T)(t,o).pipe((0,i.b)(500),(0,s.z)((function(e){var t=l.map.getBounds(),o=t._sw,n=t._ne;return(0,a.bboxes)(Math.min(o.lat,n.lat),Math.min(o.lng,n.lng),Math.max(o.lat,n.lat),Math.max(o.lng,n.lng),3)})),(0,s.z)((function(t){if(e.geoHashes.has(t))return c.E;y("#loader").removeClass("hidden"),e.geoHashes.add(t);var o="".concat(l.baseUrl,"?bbox=").concat(JSON.stringify(l.decodeGeoHash(t)),"&count=9999&start=0");return l.getCemeteries(o,t)}))).subscribe({next:function(e){var t=e.data,o=e.geohash;y("#cem-near").text(findagrave.mapText);var a=l.createCemeteryMarkers(t.cemeteries);l.addSourceAndLayers(a,o),y("#loader").addClass("hidden")},error:function(e){return console.log(e)}})},e.prototype.decodeGeoHash=function(e){var t=k((0,a.decode_bbox)(e),4),o=t[0],n=t[1];return{top_left:{lat:t[2],lon:n},bottom_right:{lat:o,lon:t[3]}}},e.prototype.getJSON=function(e){return new Promise((function(t){y.getJSON(e,(function(e){t(e)}))}))},e.prototype.prepareList=function(){var e=this,t=this.map.getZoom(),o=this.map.queryRenderedFeatures(void 0,{layers:P([],k(this.geoHashes.values()),!1).reduce((function(e,o){return e.push("".concat(t>13?"cemeteryNames":"markers","-").concat(o)),e.push("cluster-".concat(o)),e}),[])}),a=k((0,l.u)((0,d.D)(o),(function(e){return e.properties.cluster})),2),n=a[0],i=a[1];return(0,r.T)(n.pipe((0,s.z)((function(t){return e.getClusterLeaves(t,t.properties.point_count)})),(0,s.z)((function(e){return e})),(0,u.U)((function(e){return e.properties.cemetery}))),i.pipe((0,u.U)((function(e){return JSON.parse(e.properties.cemetery)})))).pipe((0,h.q)(),(0,u.U)((function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))})),(0,p.b)({next:function(e){return y("#cemetery-list").html(L.render({cemeteries:e}))}})).toPromise()},e.prototype.getClusterLeaves=function(e,t){return w(this,void 0,void 0,(function(){var o;return C(this,(function(a){return o=this.map.getSource(e.source),[2,new Promise((function(a,n){o.getClusterLeaves(e.properties.cluster_id,Math.min(t,e.properties.point_count),0,(function(e,t){e?n(e):a(t)}))}))]}))}))},e.prototype.useCurrentLocation=function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.map.easeTo({center:[t.coords.longitude,t.coords.latitude]})}),(function(e){}))},e}()},7497:(e,t,o)=>{"use strict";o.d(t,{Z:()=>g});var a=o(3336),n=o.n(a),r=o(1665),i=o(8169),s=o(2739),c=o(1230),l=o(3539),d=o(5866),u=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],a=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=o(8248),m=o(6955),f=!1;const g=function(){function e(e){this.recaptcha=e,this.initializeBaseForm(),this.initializeLoginForm(),this.initializeActivationLink(),this.initializeRegisterForm(),this.initializeChangePassword(),this.photoRequests={bbox:null,cemeteries:[],range:5,byUserLocation:!1,unit:"mi",forPhotoRequestSetup:!0,userLocation:{lat:null,lon:null},location:{id:null,lat:null,lon:null}},this.apolloClient=(0,l.W)({name:"findagrave-frontend-photorequest"})}return e.prototype.initializeBaseForm=function(){var t=this;n()((function(){if(window.location.hash){var t=window.location.hash.substring(1);"forgot-password"==t?(n()("#login-modal").modal("show"),e.showForgotPasswordForm()):"registration"==t?n()("#register-modal").modal("show"):"sign-in"==t&&n()("#login-modal").modal("show")}})),n()("#forgotPasswordLink").on("click",(function(){e.showForgotPasswordForm()})),n()("#signInLink").on("click",(function(){e.hideForgotPasswordForm()})),n()("#firstName, #lastName, #registerEmailId, #registerPassword, #publicName").on("blur",(function(){n()(this).val(n()(this).val().trim())})),n()("#firstName, #lastName").on("blur",(function(){n()("#publicName").val((n()("#firstName").val()+" "+n()("#lastName").val()).trim())})),n()("#show-password").on("click",(function(){n()("#show-password").is(":checked")?n()("#registerPassword").attr("type","text"):n()("#registerPassword").attr("type","password")})),n()("#showPass").on("click",(function(){n()("#showPass").is(":checked")?n()("#password").attr("type","text"):n()("#password").attr("type","password")})),n()("#prompt-signup").on("show.bs.modal",(function(e){var t=n()(e.relatedTarget).data("url");n()("#login-modal-btn").data("url",t)})),n()("#login-modal").on("hide.bs.modal",(function(t){e.hideForgotPasswordForm()})),n()("#login-modal").on("show.bs.modal",(function(e){!t.recaptcha.loginCaptcha&&t.recaptcha.renderLoginCaptcha();var o=n()(e.relatedTarget).data("url");n()("#submit-login-btn").data("url",o),n()(".alert").not("#tnc").not(".tnc").addClass("hidden"),n()("#password").parents(".mb-3").removeClass("hidden"),n()("#rememberMe").parents(".col-9").removeClass("invisible"),n()("#forgotPasswordLink").removeClass("hidden"),n()("#password").prop("disabled",!1),n()(".sign-in").removeClass("hidden"),n()(".submit").addClass("hidden")})),n()(".initiate-login").on("click",(function(e){e.preventDefault(),e.stopPropagation(),n()("#login-modal").modal("show")})),n()(".initiate-registration").on("click",(function(e){e.preventDefault(),e.stopPropagation(),n()("#login-modal").modal("hide"),n()("#register-modal").modal("show")}))},e.prototype.initializeLoginForm=function(){var e=this;n()("#loginform").on("submit",(function(t){n()("#missingEmailPassword").addClass("hidden"),n()("#missingEmail").addClass("hidden"),n()("#missingPassword").addClass("hidden");var o=n()("#submittype").val();if(n()("#password").is(":disabled")){if(!e.emailIsValid("#emailId"))return!1;if(!e.isCaptchaChecked())return!1;n()("#loginform").attr("action","/forgot-password"),n()("#loginform").attr("method","POST")}else{if(!n()("#emailId").val()||!n()("#password").val())return n()("#emailId").val()||n()("#password").val()?n()("#emailId").val()?n()("#password").val()||n()("#missingPassword").removeClass("hidden"):n()("#missingEmail").removeClass("hidden"):n()("#missingEmailPassword").removeClass("hidden"),!1;n()("#loginform").attr("action","/authenticate"),n()("#loginform").attr("method","POST")}"false"!=o&&(n()("#error-messages").children().addClass("hidden"),t.preventDefault(),n()("#password").is(":disabled")?n().ajax({url:"/forgot-password",method:"POST",data:{ajax:!0,emailId:n()("#emailId").val(),"g-recaptcha-response":n()("#recaptchaLogin").find("textarea[name='g-recaptcha-response']").val()},success:function(e){200==e.responseCode||e.forgotPasswordEmailSent?1002==e.registerResponseCode?n()("#missingRecaptcha").removeClass("hidden"):e.unknownError?n()("#forgotError").removeClass("hidden"):(n()("#forgotSuccess").removeClass("hidden"),n()("#forgotSuccess").html(n()("#forgotSuccess").html().replace("EmailID",e.email)),n()("#password").parents(".mb-3").removeClass("hidden"),n()("#rememberMe").parents(".col-9").removeClass("invisible"),n()("#forgotPasswordLink").removeClass("hidden"),n()("#password").prop("disabled",!1),n()(".sign-in").removeClass("hidden"),n()(".submit").addClass("hidden")):n()("#loginOtherErr").removeClass("hidden")}}):n().ajax({method:"POST",url:"/authenticate",data:{ajax:!0,emailId:n()("#emailId").val(),password:n()("#password").val(),rememberMe:n()("#rememberMe").is(":checked")},success:function(e){if(200!=e.responseCode){var t=n()("#error-"+e.responseCode);t.length>0?t.children().addBack().removeClass("hidden"):(n()("#loginOtherErr").html(e.errMsg),n()("#loginOtherErr").removeClass("hidden"))}else{var o=n()("#submit-login-btn").data("url");o?location.href=o:location.reload()}}}))}))},e.prototype.initializeActivationLink=function(){var e=this;n()(".resend-activation").on("click",(function(){var t=n()(this).attr("data-email")||"#emailId";if(!e.emailIsValid(t))return!1;var o=n()(t).val().trim();n()(".resend-activation").addClass("hidden"),n().getJSON("/resend-activation",{email:o},(function(e){n()("#error-412").addClass("hidden"),n()("#verifyEmail").addClass("hidden"),200===e.status?n()(".activateSuccess").removeClass("hidden"):n()("#loginOtherErr").removeClass("hidden")}))}))},e.prototype.initializeRegisterForm=function(){var e,t=this,o=(0,r.ZP)().singleTypeahead({inputId:"#reg-location",targetId:"#reg-locationId",type:'["city", "county"]'});function a(){if(t.photoRequests.location.id){var e=o.typeahead.typeahead("val").trim();if(e){var a=e.split(", ");a&&a.length&&a.splice(-1),e=a.join(", ")}n()("#cemeteries-found-message").html(i18next.t("usr.rf.CemeteriesFoundInLocation",{count:t.photoRequests.cemeteries.filter((function(e){return e.checked})).length,location:e}))}else{var r="mi"==t.photoRequests.unit?"Mi":"Km";n()("#cemeteries-found-message").html(i18next.t("usr.rf.CemeteriesFoundInLocation".concat(r),{count:t.photoRequests.cemeteries.filter((function(e){return e.checked})).length,range:t.photoRequests.range||5}))}}function l(){n()("#pr-cemetery-filter").addClass("hidden"),n()("#no-cemeteries-found").addClass("hidden"),n()(".loading-cemeteries").show(),t.photoRequests.cemeteries=[],n()("#pr-list").html(""),t.photoRequests.unit="us"===(0,i.ej)("ipLoc")?"mi":"km";var e={from:0,size:500,unit:t.photoRequests.unit};if(t.photoRequests.bbox)e.boundingBox=t.photoRequests.bbox;else if(t.photoRequests.location.id)t.photoRequests.byUserLocation=!1,e.containingLocationId=t.photoRequests.location.id,e.orderBy="name";else{if(!t.photoRequests.userLocation.lat||!t.photoRequests.userLocation.lon)return;t.photoRequests.byUserLocation=!0,e.coordinates={lat:t.photoRequests.userLocation.lat,lon:t.photoRequests.userLocation.lon},e.distance=Number(t.photoRequests.range||5)}t.apolloClient.query({query:(0,c.Ps)(v||(v=u(["query cemeteryDetail ($search: CemeterySearchInput) {cemeteries(search: $search) { cemeteries { id names { name } memorialCount photographedCount photos { photos { path } } distance locations { country state county city} coordinates { lat lon } coordinatePrecision }}}"],["query cemeteryDetail ($search: CemeterySearchInput) {cemeteries(search: $search) { cemeteries { id names { name } memorialCount photographedCount photos { photos { path } } distance locations { country state county city} coordinates { lat lon } coordinatePrecision }}}"]))),variables:{search:e}}).then((function(e){var a,r,i,s,c,l,u,f,g,v,y,b,w,C,k;n()(".loading-cemeteries").hide();var P=[];if(null===(u=null===(l=null===(c=null==e?void 0:e.data)||void 0===c?void 0:c.cemeteries)||void 0===l?void 0:l.cemeteries)||void 0===u?void 0:u.length){P=JSON.parse(JSON.stringify(e.data.cemeteries.cemeteries)),n()("#select-all-map").prop("checked",!0);try{for(var L=h(P),x=L.next();!x.done;x=L.next()){(I=x.value).cemeteryId=I.id.split("_")[1],I.name=I.names[0].name,I.names.length>1&&(I.alias=I.names[1].name),I.fileName=(null===(g=null===(f=I.photos)||void 0===f?void 0:f.photos[0])||void 0===g?void 0:g.path)||null,I.photographed=I.photographedCount&&I.memorialCount?Math.min(100,Math.round(parseInt(I.photographedCount)/parseInt(I.memorialCount)*100)):0,I.interments=I.memorialCount||0,I.location={lat:I.coordinates.lat,lon:I.coordinates.lon},I.locationName=(0,d.j)((null===(v=I.locations)||void 0===v?void 0:v.length)?I.locations[0]:{}),I.locationPrecision="user"==I.coordinatePrecision?0:1,I.volunteer=!0,I.checked=!0}}catch(e){a={error:e}}finally{try{x&&!x.done&&(r=L.return)&&r.call(L)}finally{if(a)throw a.error}}if(null===(y=findagrave.volunteerCemeteries)||void 0===y?void 0:y.length){var R=P.filter((function(e){return-1===findagrave.volunteerCemeteries.findIndex((function(t){return t.id==e.cemeteryId}))}));R.length<P.length&&n()("#pr-cemetery-filter").removeClass("hidden"),P=R}}if(P.length){var q;if(t.photoRequests.location.id){if(q=o.typeahead.typeahead("val").trim()){var A=q.split(", ");A&&A.length&&A.splice(-1),q=A.join(", ")}n()("#cemeteries-found-message").html(i18next.t("usr.rf.CemeteriesFoundInLocation",{count:P.length,location:q})),n()("#cemeteries-found-count-location").html(i18next.t("usr.rf.CemeteriesFoundCountLocation",{count:P.length,location:q})),n()("#cemeteries-found-count").html(i18next.t("usr.rf.CemeteriesFoundCount",{count:P.length}))}else if(t.photoRequests.userLocation.lat&&t.photoRequests.userLocation.lon){var S="mi"==t.photoRequests.unit?"Mi":"Km";n()("#cemeteries-found-message").html(i18next.t("usr.rf.CemeteriesFoundInLocation".concat(S),{count:P.length,range:t.photoRequests.range||5})),n()("#pr-typeahead-section").addClass("hidden"),n()("#pr-change-location").removeClass("hidden")}null===(b=t.cemeteryMap)||void 0===b||b.updateMarkers(P),(null===(w=t.photoRequests.location)||void 0===w?void 0:w.lat)&&(null===(C=t.photoRequests.location)||void 0===C?void 0:C.lon)&&(null===(k=t.cemeteryMap)||void 0===k||k.getMap().easeTo({center:{lat:t.photoRequests.location.lat,lon:t.photoRequests.location.lon}})),n()("#pr-or-section").addClass("hidden"),n()("#reg-location-label").addClass("hidden"),n()("#cemeteries-found").removeClass("hidden"),t.photoRequests.cemeteries=P,n()("#volunteer-cemeteries-done").removeClass("hidden");try{for(var E=h(P),O=E.next();!O.done;O=E.next()){var I=O.value;n()("#pr-list").append('<input type="hidden" name="prList[]" value="'.concat(I.id,'" />'))}}catch(e){i={error:e}}finally{try{O&&!O.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}t.photoRequests.byUserLocation?(n()("#pr-distance-range").removeClass("hidden").html(m.render({total:t.photoRequests.cemeteries.length,unit:t.photoRequests.unit||"mi",range:t.photoRequests.range||5})),n()("#pr-distance-range-ec").removeClass("hidden").html(m.render({total:t.photoRequests.cemeteries.length,unit:t.photoRequests.unit||"mi",range:t.photoRequests.range||5,excludeCount:!0}))):(n()("#pr-distance-range").addClass("hidden").html(""),n()("#pr-distance-range-ec").addClass("hidden").html("")),n()("#pr-cemetery-list").append(p.render(t.photoRequests))}else{var N=n()(document.createElement("p"));N.addClass("text-danger").addClass("text-center").addClass("p-3").text(i18next.t("accnt.pr.NoCemeteriesFound")),n()("#pr-cemetery-list").html(N),n()("#no-cemeteries-found").removeClass("hidden"),t.photoRequests.location.id&&n()("#pr-or-section").addClass("hidden")}})).catch((function(e){console.log(e)}))}n()("#reg-location").on("typeahead:set",(function(o,a){if(n()("#pr-locationError").addClass("hidden"),n()("#locationUnsupported").addClass("hidden"),(-1!==a.indexOf("city")||-1!==a.indexOf("county"))&&a!==e){t.resetPRLocation(),e=a;var r,i="/location/"+a+'/["location"]';n().getJSON(i,(function(e){e.locations&&e.locations[a]&&e.locations[a].location&&(r=e.locations[a].location,t.photoRequests.location={id:a,lat:r.lat||null,lon:r.lon||null},l())}))}})).on("typeahead:clear",(function(){e=null,t.resetPRLocation()})),n()("#pr-change-location").on("click",(function(e){t.resetPRLocation()})),n()("#pr-user-location").on("click",(function(e){navigator.geolocation?(n()("#pr-user-location").addClass("disabled").prop("disabled",!0),t.resetPRLocation(),f=!0,setTimeout((function(){f&&n()("#loading-location").show()}),200),n()("#pr-locationError").addClass("hidden"),n()("#locationUnsupported").addClass("hidden"),navigator.geolocation.getCurrentPosition((function(e){n()("#pr-user-location").removeClass("disabled").prop("disabled",!1),f=!1,n()("#loading-location").hide(),t.photoRequests.userLocation={lat:e.coords.latitude,lon:e.coords.longitude},t.photoRequests.locationId=null,l()}),(function(e){n()("#pr-user-location").removeClass("disabled").prop("disabled",!1),f=!1,n()("#loading-location").hide(),n()("#pr-locationError").removeClass("hidden")}),{maximumAge:6e5,enableHighAccuracy:!0,timeout:1e4})):n()("#locationUnsupported").removeClass("hidden")})),n()("#photo-request-cemeteries-modal").on("hide.bs.modal",(function(e){n()("#pr-list-view").tab("show")})),n()("#photo-request-cemeteries-modal").on("shown.bs.modal",(function(e){"my-account"==findagrave.viewId&&n()("#reg-location").trigger("focus")})),n()("#pr-map-view").on("show.bs.tab",(function(e){if(!t.cemeteryMap){var o={};t.photoRequests.location.id?(o.center={lat:t.photoRequests.location.lat,lon:t.photoRequests.location.lon},o.zoom=t.photoRequests.location.id.includes("county")?11:9):(o.center={lat:t.photoRequests.userLocation.lat,lon:t.photoRequests.userLocation.lon},o.zoom=t.photoRequests.range<25?10:9),t.cemeteryMap=new s.Z(o,!0,!1,(function(){})),t.cemeteryMap.mapCemeteries(t.photoRequests.cemeteries,"")}})).one("shown.bs.tab",(function(){return t.cemeteryMap.getMap().resize()})),n()(document).on("click",".pr-update-range",(function(){t.photoRequests.range=n()(this).attr("data-range"),t.resetPRCemeteries(),l()})),n()("#select-all-map").on("change",(function(){var e,o=n()(this).is(":checked");t.photoRequests.cemeteries.map((function(e){return e.checked=o})),n()(".volunteer-for-cemetery").prop("checked",o),t.cemeteryMap&&(null===(e=t.cemeteryMap)||void 0===e||e.updateMarkers(t.photoRequests.cemeteries)),o?n()("#volunteer-cemeteries-done").removeClass("hidden"):n()("#volunteer-cemeteries-done").addClass("hidden"),a()})),n()(document).on("change",".volunteer-for-cemetery",(function(){var e=n()(this).is(":checked"),o=n()(this).attr("data-id");n()("#volunteer-".concat(o)).prop("checked",e),n()("#volunteer-".concat(o,"-map")).prop("checked",e),t.photoRequests.cemeteries.find((function(e){return e.cemeteryId==o})).checked=e,t.photoRequests.cemeteries.filter((function(e){return e.checked})).length===t.photoRequests.cemeteries.length?n()("#select-all-map").prop("checked",!0):n()("#select-all-map").prop("checked",!1),t.photoRequests.cemeteries.filter((function(e){return e.checked})).length?n()("#volunteer-cemeteries-done").removeClass("hidden"):n()("#volunteer-cemeteries-done").addClass("hidden"),t.cemeteryMap&&t.cemeteryMap.updateMarkers(t.photoRequests.cemeteries),a()})),n()("#register-modal").on("show.bs.modal",(function(e){t.recaptcha.registrationCaptcha||t.recaptcha.renderRegistrationCaptcha()})),n()("#siteUpdateEmails").on("change",(function(e){n()(this).is(":checked")&&n()("#noSiteUpdateEmails").prop("checked",!1)})),n()("#noSiteUpdateEmails").on("change",(function(e){n()(this).is(":checked")&&n()("#siteUpdateEmails").prop("checked",!1)})),n()("#registrationform").on("submit",(function(e){var o=n()("#submittype").val(),a=!1;n()("#registerEmailId").val(n()("#registerEmailId").val().trim()),n()("#registerPassword").val(n()("#registerPassword").val().trim()),n()("#firstName").val(n()("#firstName").val().trim()),n()("#lastName").val(n()("#lastName").val().trim()),n()("#publicName").val(n()("#publicName").val().trim());var r="";if(n()("#isVolunteer").is(":checked")&&(r=t.photoRequests.cemeteries.filter((function(e){return e.checked})).map((function(e){return e.cemeteryId})).join(",")),n()("#missingEmail").addClass("hidden"),n()("#invalidEmail").addClass("hidden"),n()("#weakPassword").addClass("hidden"),n()("#agreeTOS").addClass("hidden"),n()("#alreadyExists").addClass("hidden"),n()("#registerOtherErr").addClass("hidden"),n()("#missingParams").addClass("hidden"),n()("#verifyEmail").addClass("hidden"),n()("#missingRecaptcha").addClass("hidden"),n()("#registerOtherErr").addClass("hidden"),n()("#registerEmailId").parent(".mb-3").removeClass("has-error"),n()("#registerPassword").parent(".mb-3").removeClass("has-error"),""==n()("#registerEmailId").val()?(n()("#registerEmailId").parent(".mb-3").addClass("has-error"),n()("#missingEmail").removeClass("hidden"),a=!0):n()("#registerEmailId").val().match(/^(\w[-\w]*\.)*\w[-\w]*\@(\w[-\w]*\.)+\w[-\w]*$/)?n()("#registerPassword").val().length<6?(n()("#registerPassword").parent(".mb-3").addClass("has-error"),n()("#passwordLength").removeClass("hidden"),a=!0):n()("#tos").is(":checked")?!n()("#noSiteUpdateEmails").length||n()("#noSiteUpdateEmails").is(":checked")||n()("#siteUpdateEmails").is(":checked")||(n()("#germanCheckboxError").removeClass("hidden"),a=!0):(n()("#agreeTOS").removeClass("hidden"),a=!0):(n()("#registerEmailId").parent(".mb-3").addClass("has-error"),n()("#invalidEmail").removeClass("hidden"),a=!0),a)e.preventDefault();else{n()("#registrationform").attr("action","/create-account"),n()("#registrationform").attr("method","POST"),n()("#btnCreateAccount").attr("disabled","disabled");var i=n()("#btnCreateAccount").html();n()("#btnCreateAccount").html(n()("#btnCreateAccount").attr("data-saving")),n()("#btnCreateAccount").attr("data-saving",i),"false"!=o&&(e.preventDefault(),n().ajax({method:"POST",url:"/create-account",data:{ajax:!0,registerEmailId:n()("#registerEmailId").val(),isEmailPublic:n()("#isEmailPublic").is(":checked")?"Y":"N",registerPassword:n()("#registerPassword").val(),firstName:n()("#firstName").val(),lastName:n()("#lastName").val(),publicName:n()("#publicName").val(),tos:n()("#tos").is(":checked")?"1":"0",remember:n()("#remember").is(":checked")?"on":"off",zipCode:n()("#zipCode").val(),latitude:n()("#gps-lat").val(),longitude:n()("#gps-long").val(),siteUpdateEmails:n()("#siteUpdateEmails").is(":checked")?"Y":"N",memorialUpdateEmails:n()("#memorialUpdateEmails").is(":checked")?"Y":"N",isVolunteer:n()("#isVolunteer").is(":checked")?"Y":"N",volunteerCemeteries:r,"g-recaptcha-response":n()("#recaptchaRegistration").find("textarea[name='g-recaptcha-response']").val()},success:function(e){n()("#btnCreateAccount").prop("disabled",!1);var t=n()("#btnCreateAccount").html();(n()("#btnCreateAccount").html(n()("#btnCreateAccount").attr("data-saving")),n()("#btnCreateAccount").attr("data-saving",t),200==e.registerResponseCode)?(n()("#registeredEmail").text(n()("#registerEmailId").val()),n()("#accCreateSuccess").detach().appendTo(".flyover"),n()("#register-modal").modal("hide"),n()("#accCreateSuccess").removeClass("hidden")):"missingParameters"===e.error?n()("#missingParams").removeClass("hidden"):"missingTOS"===e.error?n()("#agreeTOS").removeClass("hidden"):"accountExists"===e.error?n()("#alreadyExists").removeClass("hidden"):"emailNotVerified"===e.error?n()("#verifyEmail").removeClass("hidden"):"invalidEmail"===e.error?n()("#invalidEmail").removeClass("hidden"):"weakPassword"===e.error?n()("#weakPassword").removeClass("hidden"):"missingRecaptcha"===e.error?n()("#missingRecaptcha").removeClass("hidden"):n()("#registerOtherErr").removeClass("hidden")}}))}})),n()(".alert-toggle .close").on("click",(function(){n()(this).parents(".alert").addClass("hidden")})),n()("#isVolunteer").on("click",(function(){n()("#vol-location").toggleClass("hidden")})),n()("#registerPassword").on("keyup",(function(){var e=n()("#registerPassword").val(),t=0;e.length>=8?(n()("#password8char").removeClass("icon-warning").addClass("icon-check"),n()("#password8char").parent().attr("aria-hidden","true"),t++):(n()("#password8char").addClass("icon-warning").removeClass("icon-check"),n()("#password8char").parent().attr("aria-hidden","false")),/[a-z]/.test(e)?(n()("#password1low").removeClass("icon-warning").addClass("icon-check"),n()("#password1low").parent().attr("aria-hidden","true"),t++):(n()("#password1low").addClass("icon-warning").removeClass("icon-check"),n()("#password1low").parent().attr("aria-hidden","false")),/[A-Z]/.test(e)?(n()("#password1cap").removeClass("icon-warning").addClass("icon-check"),n()("#password1cap").parent().attr("aria-hidden","true"),t++):(n()("#password1cap").addClass("icon-warning").removeClass("icon-check"),n()("#password1cap").parent().attr("aria-hidden","false")),/[^A-Za-z]/.test(e)?(n()("#password1num").removeClass("icon-warning").addClass("icon-check"),n()("#password1num").parent().attr("aria-hidden","true"),t++):(n()("#password1num").addClass("icon-warning").removeClass("icon-check"),n()("#password1num").parent().attr("aria-hidden","false")),t>=4&&n()("#field-tool").removeClass("show"),n()("#pwd_score").removeClass(),n()("#pwd_score").addClass("score_"+t),n()("#pwd_score").attr("aria-valuenow",t)}))},e.prototype.initializeChangePassword=function(){var e=this;n()("#btnCreateAccount").on("click",(function(){e.validatePassword("register")?n()("#registrationform").submit():(n()("#field-tool").addClass("show"),setTimeout((function(){n()("#field-tool")}),2e3))}))},e.prototype.isCaptchaChecked=function(){return!(!grecaptcha||0===grecaptcha.getResponse.length)||(n()("#error-1002").removeClass("hidden"),event.preventDefault(),!1)},e.prototype.emailIsValid=function(e){return e=e||"#emailId",!!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(n()(e).val().trim())||(n()("#emailNotFound").removeClass("hidden"),event.preventDefault(),!1)},e.prototype.validatePassword=function(e){var t,o=!0;("both"!==e&&"old"!==e||0==n()("#old-password").val().length&&(n()("#oldPasswordLengthError").show().parents(".mb-3").addClass("has-error"),o=!1),"both"===e||"new"===e||"register"===e)&&((t="register"===e?n()("#registerPassword").val():n()("#new-password").val()).length<8&&(o=!1),/[a-z]/.test(t)||(o=!1),/[A-Z]/.test(t)||(o=!1),/[^A-Za-z]/.test(t)||(o=!1));return o},e.prototype.resetPRCemeteries=function(){var e;this.photoRequests.cemeteries=[],n()("#pr-list").html(""),n()("#pr-cemetery-list").html(""),null===(e=this.cemeteryMap)||void 0===e||e.updateMarkers([]),n()("#volunteer-cemeteries-done").addClass("hidden"),n()("#pr-cemetery-filter").addClass("hidden")},e.prototype.resetPRLocation=function(){this.photoRequests.byUserLocation=!1,this.photoRequests.userLocation={lat:null,lon:null},this.photoRequests.location={id:null,lat:null,lon:null},n()("#cemeteries-found-message").html(""),n()("#cemeteries-found-count").html(""),n()("#cemeteries-found-count-location").html(""),n()("#cemeteries-found").addClass("hidden"),n()("#no-cemeteries-found").addClass("hidden"),n()("#pr-typeahead-section").removeClass("hidden"),n()("#pr-change-location").addClass("hidden"),n()("#pr-or-section").removeClass("hidden"),n()("#reg-location-label").removeClass("hidden"),n()("#pr-distance-range").addClass("hidden").html(""),n()("#pr-distance-range-ec").addClass("hidden").html(""),this.resetPRCemeteries()},e.validateGPS=function(e,t){var o=!0;return e&&(e>90||e<-90)&&(n()("#gps-lat").parent(".error-holder").addClass("has-error"),n()("#invalidLat").css("display","block"),o=!1),t&&(t>180||t<-180)&&(n()("#gps-long").parent(".error-holder").addClass("has-error"),n()("#invalidLong").css("display","block"),o=!1),o},e.showForgotPasswordForm=function(){console.log("HEREEE"),n()("#error-messages").children().addClass("hidden"),n()("#password").parents(".mb-3").addClass("hidden"),n()("#recaptchaLogin").parents(".mb-3").removeClass("hidden"),n()("#rememberLogin").addClass("hidden"),n()("#forgotHeadline").removeClass("hidden"),n()("#loginHeadline").addClass("hidden"),n()("#forgotPasswordLink").addClass("hidden"),n()("#signInLink").removeClass("hidden"),n()("#password").attr("disabled","disabled"),n()(".sign-in").addClass("hidden"),n()(".sign-in + .checkbox").addClass("hidden"),n()(".submit").removeClass("hidden")},e.hideForgotPasswordForm=function(){n()("#error-messages").children().addClass("hidden"),n()("#recaptchaLogin").parents(".mb-3").addClass("hidden"),n()("#password").parents(".mb-3").removeClass("hidden"),n()("#rememberLogin").removeClass("hidden"),n()("#forgotHeadline").addClass("hidden"),n()("#loginHeadline").removeClass("hidden"),n()("#forgotPasswordLink").removeClass("hidden"),n()("#signInLink").addClass("hidden"),n()("#password").prop("disabled",!1),n()(".sign-in").removeClass("hidden"),n()(".sign-in + .checkbox").removeClass("hidden"),n()(".submit").addClass("hidden")},e}();var v},4065:function(e,t,o){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)},n=o(1224).Z;e.exports=function(e){e.addFilter("i18n",(function(){var e,t=arguments[0].substring(0,arguments[0].indexOf(":"));return arguments.length>1?(e=Array.prototype.slice.call(arguments,1)).unshift(t):e=[t],n.t.apply(n,e)})),e.addFilter("__nf",(function(){var e=arguments[0].singular,t=e.substring(0,e.indexOf(":"));return n.t(t,{count:arguments[1],nf:arguments[1].toLocaleString()})})),e.addFilter("__n",(function(){var e=arguments[0].singular,t=e.substring(0,e.indexOf(":")),o={count:arguments[1]};return arguments[2]&&"object"==typeof arguments[2]&&(delete arguments[2].count,o=a(a({},o),arguments[2])),n.t(t,o)})),e.addFilter("memorialNameForURL",(function(){var e=arguments[0],t=e.given,o=e.middle,a=e.last;return[t?t.replace(/\?+/g,"").replace(/&amp;/g,"").replace(/&+/g,""):"",o?o.replace(/\?+/g,"").replace(/&amp;/g,"").replace(/&+/g,""):"",a?a.replace(/\?+/g,"").replace(/&amp;/g,"").replace(/&+/g,""):""].filter((function(e){return e&&""!==e.trim()})).map((function(e){return encodeURIComponent(e.toLowerCase().trim().replace(/\s+/g,"_").replace(/\/+/g,"").replace(/#+/g,"").replace(/\.+/g,""))})).join("-")||"_"})),e.addFilter("cemeteryNameForURL",(function(){return encodeURIComponent((arguments[0]?arguments[0]:"").toLowerCase().replace(/\s+/g,"-"))})),e.addFilter("getNotesFromEditsNoDuplicates",(function(e){return e.filter((function(e,t,o){return e.note&&t===o.findIndex((function(t){return t.note===e.note}))}))})),e.addFilter("getNotesFromEdits",(function(e){return e.filter((function(e){return e.note})).map((function(e){return{editFieldToDisplay:e.editFieldToDisplay,note:e.note}}))}))}},3539:(e,t,o)=>{"use strict";o.d(t,{W:()=>c});var a=o(2359),n=o(2198),r=o(6988),i=o(5874),s=o(9266);function c(e){return new a.f({link:(0,i.Nq)({sha256:s.JQ,useGETForHashedQueries:!0}).concat(new n.u({uri:e.uri||"".concat(document.location.hostname.includes("localhost")?"".concat(document.location.protocol,"//").concat(document.location.hostname,":3080"):"","/orc/graphql"),credentials:document.location.hostname.includes("localhost")?"include":"same-origin",headers:{"Content-Type":"application/json"}})),cache:new r.h,name:e.name||"findagrave-frontend"})}}}]);