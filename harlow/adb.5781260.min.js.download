/*  AdBridg Connect v2.1.0, copyright AdBridg Inc. All rights reserved. f59389ea:ldoy0c2a:39j */
!function i(n,o,a){function s(r,e){if(!o[r]){if(!n[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(d)return d(r,!0);throw new Error("Cannot find module '"+r+"'")}e=o[r]={exports:{}};n[r][0].call(e.exports,function(e){var t=n[r][1][e];return s(t||e)},e,e.exports,i,n,o,a)}return o[r].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,c){"use strict";function r(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function g(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}var m=e("../shim.js").polyfills,f=(m.registerBidder,m.config),h=m.deepAccess,b=m.uniques,v=m.isArray,y=m.getWindowTop,_=m.isGptPubadsDefined,w=m.isSlotMatchingAdUnitCode,x=m.logInfo,I=m.logWarn,S=m.getWindowSelf,i=m.mergeDeep,A=m.pick,E=m.BANNER,T=m.VIDEO,n="33across",o=["33across_mgni"],k="https://ssc.33across.com/api/v1/hb",s="https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",a="USD",d=/^[a-zA-Z0-9_-]{22}$/,z={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},j=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],O={uniqueSiteIds:[]},C="nm";function R(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function B(e){return"".concat(e.bidId)}function D(e,t){return i({},0<arguments.length&&void 0!==e?e:{},{ext:1<arguments.length?t:void 0})}function P(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function N(e){return i({},e,{params:{productId:U(e)}})}function U(e){var t=e.params,e=e.mediaTypes,r=e.banner,e=e.video;return e&&!r&&"instream"===e.context?z.INSTREAM:t.productId===z.INVIEW?t.productId:z.SIAB}function q(e,t,r){e=e.getFloor({currency:a,mediaType:r,size:[t.w,t.h]});if(!isNaN(e.floor)&&e.currency===a)return e.floor}var u={NON_MEASURABLE:C,code:n,aliases:o,supportedMediaTypes:[E,T],gvlid:58,isBidRequestValid:function(e){return!((t=e).bidder!==n&&!o.includes(t.bidder)||!t.params)&&!(null===(h(t,"params.siteId","")||"").trim().match(d))&&function(e){e=h(e,"mediaTypes.banner");return void 0===e||!!Array.isArray(e.sizes)}(e)&&(e=h(t=e,"mediaTypes.video"),t=h(t,"params.video",{}),void 0===e||!!Array.isArray(e.playerSize)&&(!!e.context&&(t=g(g({},e),t),!(!Array.isArray(t.mimes)||0===t.mimes.length)&&(!(!Array.isArray(t.protocols)||0===t.protocols.length)&&((void 0===t.placement||"number"==typeof t.placement)&&("instream"!==e.context||void 0===t.startdelay||"number"==typeof t.startdelay))))));var t},buildRequests:function(e,t){a=e,t=t,r=m.utils.assign({},f.getConfig("ttxSettings")),i=m.utils.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),n=t&&t.uspConsent,t=null==t||null==(t=t.refererInfo)?void 0:t.page,O.uniqueSiteIds=a.map(function(e){return e.params.siteId}).filter(b);var r,i,n,o,a={ttxSettings:r,gdprConsent:i,uspConsent:n,pageUrl:t},s=a.ttxSettings,d=a.gdprConsent,c=a.uspConsent,u=a.pageUrl,p=function(e,t){t=t.map(N),e=e&&e.enableSRAMode;return function(e,r){var i={};return e.forEach(function(e){var t=r(e);i[t]=i[t]||[],i[t].push(e)}),i}(t,!0===e?R:B)}(s,e),l=[];for(o in p)l.push(function(e){var t=e.bidRequests,r=e.gdprConsent,r=void 0===r?{}:r,i=e.uspConsent,n=e.pageUrl,e=e.ttxSettings,o={},a=t[0],s=a.params,d=s.siteId,s=s.test;o.imp=[],t.forEach(function(e){o.imp.push(function(e){var t=h(e,"ortb2Imp.ext.gpid"),t={id:e.bidId,ext:g({ttx:{prod:h(e,"params.productId")}},t?{gpid:t}:{})};h(e,"mediaTypes.banner")&&(t.banner=g({},function(i){var e,t=h(i,"mediaTypes.banner",{}),r=function(e){return document.getElementById(e)||document.getElementById(function(e){if(_())for(var t,r=googletag.pubads().getSlots(),i=w(e),n=0;n<r.length;n++)if(i(r[n]))return t=r[n].getSlotElementId(),x("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(t)),t;return I("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(e))}(i.adUnitCode),t=function(e){return!v(e)||2!==e.length||v(e[0])?e.map(P):[P(e)]}(t.sizes);e="function"==typeof i.getFloor?t.map(function(e){var t,r=q(i,e,E);return m.utils.assign({},e,t=r?{ext:{ttx:{bidfloors:[r]}}}:t)}):t;t=function(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}(t),r=function(e){return{ttx:{viewability:{amount:isNaN(e)?e:Math.round(e)}}}}(function(e){return!function(){try{return S()!==y()}catch(e){return 1}}()&&null!==e}(r)?function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=r.w,r=r.h;return"visible"===t.document.visibilityState?function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=r.w,r=r.h,e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.w,t=t.h,e=e.getBoundingClientRect(),i=e.width,n=e.height,o=e.left,a=e.top,s=e.right,e=e.bottom;(0===i||0===n)&&r&&t&&(s=o+(i=r),e=a+(n=t));return{width:i,height:n,left:o,top:a,right:s,bottom:e}}(e,{w:i,h:r}),i=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},r=1;r<e.length;++r){if(t.left=Math.max(t.left,e[r].left),t.right=Math.min(t.right,e[r].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[r].top),t.bottom=Math.min(t.bottom,e[r].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},e]);return null===i?0:(r=i.width*i.height,t=e.width*e.height,r/t*100)}(e,t,{w:i,h:r}):0}(r,y(),t):C);return{format:e,ext:r}}(e)));h(e,"mediaTypes.video")&&(t.video=function(e){var t=h(e,"mediaTypes.video",{}),r=h(e,"params.video",{}),i=g(g({},t),r),n={},t=P(i.playerSize[0]),r=t.w,t=t.h,r=(n.w=r,n.h=t,j.forEach(function(e){i.hasOwnProperty(e)&&(n[e]=i[e])}),U(e));n.placement=n.placement||2,r===z.INSTREAM&&(n.startdelay=n.startdelay||0,n.placement=1);"function"!=typeof e.getFloor||(t=q(e,{w:n.w,h:n.h},T))&&m.utils.assign(n,{ext:{ttx:{bidfloors:[t]}}});return n}(e));return t}(e))}),o.site={id:d},o.device=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=S(),t={ext:{ttx:g(g({},function(){var e=S(),t=e.innerWidth,r=e.innerHeight,e=e.screen,e=[Math.max(e.width,e.height),Math.min(e.width,e.height)],i=e[0],e=e[1];if(t<r)return{w:e,h:i};return{w:i,h:e}}()),{},{pxr:t.devicePixelRatio,vp:function(){var e=function(){var e=S();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement;return{w:e.clientWidth,h:e.clientHeight}}(),ah:t.screen.availHeight,mtp:t.navigator.maxTouchPoints})}};e.sua&&(t.sua=A(e.sua,["browsers","platform","model"]));return t}(null==(t=a.ortb2)?void 0:t.device),n&&(o.site.page=n);o.id=a.auctionId,r.consentString&&(o.user=D(o.user,{consent:r.consentString}));Array.isArray(a.userIdAsEids)&&0<a.userIdAsEids.length&&(o.user=D(o.user,{eids:a.userIdAsEids}));o.regs=D(o.regs,{gdpr:Number(r.gdprApplies)}),i&&(o.regs=D(o.regs,{us_privacy:i}));o.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"7.31.0"}]}},a.schain&&(o.source=D(o.source,{schain:a.schain}));1===s&&(o.test=1);return{method:"POST",url:e&&e.url||"".concat(k,"?guid=").concat(d),data:JSON.stringify(o),options:{contentType:"text/plain",withCredentials:!0}}}({bidRequests:p[o],gdprConsent:d,uspConsent:c,pageUrl:u,ttxSettings:s}));return l},interpretResponse:function(e,t){var r=(e=e.body).seatbid,i=void 0===(e=e.cur)?"USD":e;return v(r)?r.filter(function(e){return v(e.bid)&&0<e.bid.length}).reduce(function(e,t){return e.concat(t.bid.map(function(e){var t=i,r=e.adomain&&e.adomain.length,t={requestId:e.impid,bidderCode:n,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:h(e,"ext.ttx.mediaType",E),currency:t,netRevenue:!0};return r&&(t.meta={advertiserDomains:e.adomain}),t.mediaType===T&&("xml"===h(e,"ext.ttx.vastType","xml")?t.vastXml=t.ad:t.vastUrl=t.ad),t}))},[]):[]},getUserSyncs:function(e,t,o,a){return e=e.iframeEnabled?O.uniqueSiteIds.map(function(e){var t=void 0===(t=(e={gdprConsent:o,uspConsent:a,siteId:e}).siteId)?"zzz000000000003zzz":t,r=void 0===(r=e.gdprConsent)?{}:r,e=e.uspConsent,i=(i=f.getConfig("ttxSettings"))&&i.syncUrl||s,n=r.consentString,r=r.gdprApplies,i={type:"iframe",url:"".concat(i,"&id=").concat(t,"&gdpr_consent=").concat(encodeURIComponent(n),"&us_privacy=").concat(encodeURIComponent(e))};return"boolean"==typeof r&&(i.url+="&gdpr=".concat(Number(r))),i}):[],O.uniqueSiteIds=[],e}};t.exports=e("../shim.js").wrap({spec:u,unitIDKey:"siteId",floorKey:!1,floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],2:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var n=e("../shim.js").polyfills,s=n.isInteger,o=n.logError,d=n.isEmpty,c=n.logWarn,u=n.getUniqueIdentifierStr,p=n._each,l=n.deepSetValue,g=(n.registerBidder,n.BANNER),m={AOL:"aol",VERIZON:"verizon",ONEMOBILE:"onemobile",ONEDISPLAY:"onedisplay"},f={GET:"display-get"},h={GET:"mobile-get",POST:"mobile-post"},b={TAG:"iframe",TYPE:"iframe"},v={TAG:"img",TYPE:"image"},y=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxrtb.com","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"],_=A(i(["","/pubapi/3.0/","/","/","/","/ADTECH;v=2;cmd=bid;cors=yes;alias=",";misc=",";",""]),"host","network","placement","pageid","sizeid","alias","misc","dynamicParams"),w=A(i(["","/bidRequest?"]),"host"),x=A(i(["dcn=","&pos=","&cmd=bid",""]),"dcn","pos","dynamicParams"),I={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},S=1;function A(o){for(var e=arguments.length,a=new Array(1<e?e-1:0),t=1;t<e;t++)a[t-1]=arguments[t];return function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var i=r[r.length-1]||{},n=[o[0]];return a.forEach(function(e,t){e=(s(e)?r:i)[e];n.push(e,o[t+1])}),n.join("")}}function E(e){return e===m.AOL||e===m.VERIZON||e===m.ONEMOBILE}function T(e){if(E(e.bidder)&&e.params.id&&e.params.imp&&e.params.imp[0])return(e=e.params.imp[0]).id&&e.tagid&&e.banner&&e.banner.w&&e.banner.h}function k(e){return E(e.bidder)&&e.params.dcn&&e.params.pos}function z(e){return((t=e.bidder)===m.AOL||t===m.VERIZON||t===m.ONEDISPLAY)&&e.params.placement&&e.params.network;var t}function j(e){return e.userIdAsEids.filter(function(e){return-1!==y.indexOf(e.source)})}g={code:m.AOL,gvlid:25,aliases:[m.ONEMOBILE,m.ONEDISPLAY,m.VERIZON],supportedMediaTypes:[g],isBidRequestValid:function(e){return z(e)||(k(e=e)||T(e))},buildRequests:function(e,t){var r=this,i={};return t&&(i.gdpr=t.gdprConsent,i.uspConsent=t.uspConsent),e.map(function(e){var t=k(t=e)?h.GET:T(t)?h.POST:z(t)?f.GET:void 0;if(t)return r.formatBidRequest(t,e,i)})},interpretResponse:function(e,t){e=e.body;if(e){var r=this._parseBidResponse(e,t);if(r)return r}else o("Empty bid response",t.bidderCode,e)},getUserSyncs:function(e,t){t=!d(t)&&t[0].body;return t&&t.ext&&t.ext.pixels?this.parsePixelItems(t.ext.pixels):[]},formatBidRequest:function(e,t,r){var i;switch(e){case f.GET:i={url:this.buildMarketplaceUrl(t,r),method:"GET",ttl:60};break;case h.GET:i={url:this.buildOneMobileGetUrl(t,r),method:"GET",ttl:3600};break;case h.POST:i={url:this.buildOneMobileBaseUrl(t),method:"POST",ttl:3600,data:this.buildOpenRtbRequestData(t,r),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":"2.2"}}}}return i.bidderCode=t.bidder,i.bidId=t.bidId,i.userSyncOn=t.params.userSyncOn,i},buildMarketplaceUrl:function(e,t){var e=e.params,r=e.server,i=e.region||"us";return I.hasOwnProperty(i)||(c("Unknown region '".concat(i,"' for AOL bidder.")),i="us"),r=r||I[i],e.region=i,this.applyProtocol(_({host:r,network:e.network,placement:parseInt(e.placement),pageid:e.pageId||0,sizeid:e.sizeId||0,alias:e.alias||u(),misc:(new Date).getTime(),dynamicParams:this.formatMarketplaceDynamicParams(e,t)}))},buildOneMobileGetUrl:function(e,t){var r=e.params,i=r.dcn,n=r.pos,o=r.ext,r=("object"===a(e.userId)&&(o=o||{},j(e).forEach(function(e){o["eid"+e.source]=e.uids[0].id})),this.buildOneMobileBaseUrl(e));return i&&n&&(e=this.formatOneMobileDynamicParams(o,t),r+=x({dcn:i,pos:n,dynamicParams:e})),r},buildOneMobileBaseUrl:function(e){return this.applyProtocol(w({host:e.params.host||"c2shb.ssp.yahoo.com"}))},applyProtocol:function(e){return/^https?:\/\//i.test(e)?e:(0===e.indexOf("//")?"".concat("https",":"):"".concat("https","://")).concat(e)},formatMarketplaceDynamicParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={},i=(n.utils.assign(r,this.formatKeyValues(e.keyValues)),n.utils.assign(r,this.formatConsentData(t)),"");return p(r,function(e,t){i+="".concat(t,"=").concat(encodeURIComponent(e),";")}),i},formatOneMobileDynamicParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(this.isSecureProtocol()&&(e.secure=S),n.utils.assign(e,this.formatConsentData(t)),"");return p(e,function(e,t){r+="&".concat(t,"=").concat(encodeURIComponent(e))}),r},buildOpenRtbRequestData:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={id:e.params.id,imp:e.params.imp};return this.isEUConsentRequired(t)&&(l(r,"regs.ext.gdpr",S),t.gdpr.consentString&&l(r,"user.ext.consent",t.gdpr.consentString)),t.uspConsent&&l(r,"regs.ext.us_privacy",t.uspConsent),"object"===a(e.userId)&&(r.user=r.user||{},r.user.ext=r.user.ext||{},0<(t=j(e)).length&&(r.user.ext.eids=t)),r},isEUConsentRequired:function(e){return!!(e&&e.gdpr&&e.gdpr.gdprApplies)},formatKeyValues:function(e){var r={};return p(e,function(e,t){r["kv".concat(t)]=e}),r},formatConsentData:function(e){var t={};return this.isEUConsentRequired(e)&&(t.gdpr=S,e.gdpr.consentString&&(t.euconsent=e.gdpr.consentString)),e.uspConsent&&(t.us_privacy=e.uspConsent),t},parsePixelItems:function(e){var r=/\w*(?=\s)/,i=/src=("|')(.*?)\1/,n=[];return e&&(e=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi))&&e.forEach(function(e){var t=e.match(r)[0],e=e.match(i)[2];t&&e&&n.push({type:(t===v.TAG?v:b).TYPE,url:e})}),n},_parseBidResponse:function(e,t){var r,i;try{r=e.seatbid[0].bid[0]}catch(e){return}if(r.ext&&r.ext.encp)i=r.ext.encp;else if(null===(i=r.price)||isNaN(i))return void o("Invalid price in bid response",m.AOL,r);return{bidderCode:t.bidderCode,requestId:t.bidId,ad:r.adm,cpm:i,width:r.w,height:r.h,creativeId:r.crid||0,pubapiId:e.id,currency:e.cur||"USD",dealId:r.dealid,netRevenue:!0,meta:{advertiserDomains:r&&r.adomain?r.adomain:[]},ttl:t.ttl}},isOneMobileBidder:E,isSecureProtocol:function(){return"https:"===document.location.protocol}};t.exports=e("../shim.js").wrap({spec:g,unitIDKey:"placement",floorKey:!1,floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],3:[function(e,n,f){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var p=e("../shim.js").polyfills,A=p.chunk,E=p.convertCamelToUnderscore,T=p.convertTypes,h=p.createTrackPixelHtml,k=p.deepAccess,z=p.deepClone,K=p.fill,b=p.getBidRequest,J=p.getMaxValueFromArray,X=p.getMinValueFromArray,j=p.getParameterByName,v=p.getUniqueIdentifierStr,y=p.getWindowFromDocument,O=p.isArray,a=(p.isArrayOfNums,p.isEmpty),_=p.isFn,C=p.isNumber,R=p.isPlainObject,B=p.isStr,D=p.logError,Y=p.logInfo,l=p.logMessage,w=p.logWarn,P=p.mergeDeep,N=p.transformBidderParamKeywords,x=p.Renderer,U=p.config,I=p.getIabSubCategory,g=(p.registerBidder,p.ADPOD),s=p.BANNER,d=p.NATIVE,c=p.VIDEO,H=p.auctionManager,q=p.find,F=p.includes,Q=p.INSTREAM,$=p.OUTSTREAM,t=p.getStorageManager,Z=p.bidderSettings,M=p.hasPurpose1Consent,ee=p.convertOrtbRequestToProprietaryNative,r="appnexus",te=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],re=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],ie=["age","externalUid","segments","gender","dnt","language"],ne=["geo","device_id"],oe=["enabled","dongle","member_id","debug_timeout"],W={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},u={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},ae=t({gvlid:32,bidderCode:r}),t={code:r,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"adasta"},{code:"beintoo",gvlid:618}],supportedMediaTypes:[s,c,d],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var r,i=(e=ee(e)).map(se),n=q(e,ce),o={},a=(!0===U.getConfig("coppa")&&(o={coppa:!0}),n&&Object.keys(n.params.user).filter(function(e){return F(ie,e)}).forEach(function(e){var t,r=E(e);"segments"===e&&O(n.params.user[e])?(t=[],n.params.user[e].forEach(function(e){C(e)?t.push({id:e}):R(e)&&t.push(e)}),o[r]=t):"segments"!==e&&(o[r]=n.params.user[e])}),q(e,pe)),s=(a&&a.params&&a.params.app&&(r={},Object.keys(a.params.app).filter(function(e){return F(ne,e)}).forEach(function(e){return r[e]=a.params.app[e]})),q(e,le)),d=(s&&s.params&&a.params.app&&a.params.app.id&&(h={appid:s.params.app.id}),{}),c={},u=ae.getCookie("apn_prebid_debug")||null;if(u)try{d=JSON.parse(u)}catch(e){D("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(W).forEach(function(e){var t=j(e);B(t)&&""!==t&&(d[W[e]]=t,d.enabled=!0)});var d=T({member_id:"number",debug_timeout:"number"},d),u=q(e,ge);u&&u.debug&&(d=u.debug)}d&&d.enabled&&Object.keys(d).filter(function(e){return F(oe,e)}).forEach(function(e){c[e]=d[e]});var u=q(e,ue),u=u?parseInt(u.params.member,10):0,p=e[0].schain,l=q(e,fe),g={tags:S(i),user:o,sdk:{source:"pbjs",version:"7.31.0"},schain:p};l&&(g.iab_support={omidpn:"Appnexus",omidpv:"7.31.0"}),0<u&&(g.member_id=u),a&&(g.device=r),s&&(g.app=h);var m,f,h,b,v,p=z(t&&t.ortb2),l=(m=p,f=[],["site.keywords","site.content.keywords","user.keywords","app.keywords","app.content.keywords"].forEach(function(e){e=k(m,e);B(e)&&f.push(e)}),f.map(ve)),y=z(U.getConfig("appnexusAuctionKeywords"))||{},u=(Object.keys(y).forEach(function(e){(B(y[e])||C(y[e]))&&(y[e]=[y[e]])}),P.apply(void 0,[{},y].concat(S(l)))),s=N(u),p=(0<s.length&&(s.forEach(L),g.keywords=s),U.getConfig("adpod.brandCategoryExclusion")&&(g.brand_category_uniqueness=!0),c.enabled&&(g.debug=c,Y("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(c,null,4))),t&&t.gdprConsent&&(g.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~")&&(p=(h=t.gdprConsent.addtlConsent).substring(h.indexOf("~")+1),g.gdpr_consent.addtl_consent=p.split(".").map(function(e){return parseInt(e,10)}))),t&&t.uspConsent&&(g.us_privacy=t.uspConsent),null!=t&&t.gppConsent?g.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!=(l=t.ortb2)&&null!=(u=l.regs)&&u.gpp&&(g.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo&&(s={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},h=t.refererInfo.canonicalUrl,B(h)&&""!==h&&(s.rd_can=h),g.referrer_detection=s),q(e,me)&&e.filter(me).forEach(function(t){var e=function(e,t){var r=t.mediaTypes.video,i=r.durationRangeSec,r=r.requireExactDuration,n=function(e){var t=e.adPodDurationSec,r=e.durationRangeSec,e=e.requireExactDuration,i=X(r),t=Math.floor(t/i);return e?Math.max(t,r.length):t}(t.mediaTypes.video),o=J(i),e=e.filter(function(e){return e.uuid===t.bidId}),e=K.apply(void 0,S(e).concat([n]));{var a;r?(r=Math.ceil(n/i.length),a=A(e,r),i.forEach(function(t,e){a[e].map(function(e){G(e,"minduration",t),G(e,"maxduration",t)})})):e.map(function(e){return G(e,"maxduration",o)})}return e}(i,t),r=g.tags.filter(function(e){return e.uuid!==t.bidId});g.tags=[].concat(S(r),S(e))}),e[0].userId&&(V(b=[],k(e[0],"userId.criteoId"),"criteo.com",null),V(b,k(e[0],"userId.netId"),"netid.de",null),V(b,k(e[0],"userId.idl_env"),"liveramp.com",null),V(b,k(e[0],"userId.tdid"),"adserver.org","TDID"),V(b,k(e[0],"userId.uid2.id"),"uidapi.com","UID2"),e[0].userId.pubProvidedId&&e[0].userId.pubProvidedId.forEach(function(t){t.uids.forEach(function(e){b.push({source:t.source,id:e.id})})}),b.length&&(g.eids=b)),i[0].publisher_id&&(g.publisher_id=i[0].publisher_id),g),_=t,w=[],x={withCredentials:!0},I="https://ib.adnxs.com/ut/v3/prebid";return M(null==_?void 0:_.gdprConsent)||(I="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==j("apn_test").toUpperCase()&&!0!==U.getConfig("apn_test")||(x.customHeaders={"X-Is-Test":1}),15<p.tags.length?(v=z(p),A(p.tags,15).forEach(function(e){v.tags=e;e=JSON.stringify(v);w.push({method:"POST",url:I,data:e,bidderRequest:_,options:x})})):(p=JSON.stringify(p),w={method:"POST",url:I,data:p,bidderRequest:_,options:x}),w},interpretResponse:function(e,t){var r=this,i=t.bidderRequest,n=(e=e.body,[]);return!e||e.error?(t="in response for ".concat(i.bidderCode," adapter"),e&&e.error&&(t+=": ".concat(e.error)),D(t)):(e.tags&&e.tags.forEach(function(e){var t=(t=e)&&t.ads&&t.ads.length&&q(t.ads,function(e){return e.rtb});t&&(!0===Z.get(i.bidderCode,"allowZeroCpmBids")?0<=t.cpm:0<t.cpm)&&F(r.supportedMediaTypes,t.ad_type)&&((e=function(t,e,r){var i=b(t.uuid,[r]),n=v(),o={adId:n,requestId:t.uuid,cpm:e.cpm,creativeId:e.creative_id,dealId:e.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:e.buyer_member_id,dealPriority:e.deal_priority,dealCode:e.deal_code}};e.adomain&&(o.meta=p.utils.assign({},o.meta,{advertiserDomains:[]}));e.advertiser_id&&(o.meta=p.utils.assign({},o.meta,{advertiserId:e.advertiser_id}));e.buyer_member_id&&(o.meta=p.utils.assign({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(e)}));e.brand_id&&(o.meta=p.utils.assign({},o.meta,{brandId:e.brand_id}));if(e.rtb.video){var a;switch(p.utils.assign(o,{width:e.rtb.video.player_width,height:e.rtb.video.player_height,vastImpUrl:e.notify_url,ttl:3600}),k(i,"mediaTypes.video.context")){case g:var s=I(i.bidder,e.brand_category_id),s=(o.meta=p.utils.assign({},o.meta,{primaryCatId:s}),e.deal_priority);o.video={context:g,durationSeconds:Math.floor(e.rtb.video.duration_ms/1e3),dealTier:s},o.vastUrl=e.rtb.video.asset_url;break;case $:o.adResponse=t,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=e.rtb.video.content,e.renderer_url&&(s=q(r.bids,function(e){return e.bidId===t.uuid}),a=(a=k(s,"mediaTypes.video.renderer.options"))||k(s,"renderer.options"),o.renderer=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=x.install({id:t.renderer_id,url:t.renderer_url,config:r,loaded:!1,adUnitCode:e});try{t.setRender(he)}catch(e){w("Prebid Error calling setRender on renderer",e)}return t.setEventHandlers({impression:function(){return l("AppNexus outstream video impression event")},loaded:function(){return l("AppNexus outstream video loaded event")},ended:function(){l("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),t}(o.adUnitCode,e,a));break;case Q:o.vastUrl=e.notify_url+"&redir="+encodeURIComponent(e.rtb.video.asset_url)}}else{p.utils.assign(o,{width:e.rtb.banner.width,height:e.rtb.banner.height,ad:e.rtb.banner.content});try{if(e.rtb.trackers)for(var d=0;d<e.rtb.trackers[0].impression_urls.length;d++){var c=e.rtb.trackers[0].impression_urls[d],u=h(c);o.ad+=u}}catch(e){D("Error appending tracking pixel",e)}}return o}(e,t,i)).mediaType=function(e){e=e.ad_type;return e===c?c:e===d?d:s}(t),n.push(e))}),e.debug&&e.debug.debug_info&&(t=(t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info).replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),l("https://console.appnexus.com/docs/understanding-the-debug-auction"),l(t))),n},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,r,i,n){if(e.iframeEnabled&&M(r)&&(!(e=n)||!Array.isArray(e.applicableSections)||e.applicableSections.every(function(e){return"number"==typeof e&&e<=5})))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(r,e,t,i){var n,o,a=N;return!0===e&&(n=null,o=U.getConfig("s2sConfig"),R(o)?n=k(o,"endpoint.p1Consent"):O(o)&&o.forEach(function(e){F(e.bidders,t.bids[0].bidder)&&(n=k(e,"endpoint.p1Consent"))}),n&&n.match("/openrtb2/prebid")&&(a=be)),r=T({member:"string",invCode:"string",placementId:"number",keywords:a,publisherId:"number"},r),e&&(r.use_pmt_rule="boolean"==typeof r.usePaymentRule&&r.usePaymentRule,r.usePaymentRule&&delete r.usePaymentRule,m(r.keywords)&&r.keywords.forEach(L),Object.keys(r).forEach(function(e){var t=E(e);t!==e&&(r[t]=r[e],delete r[e])})),r}};function m(e){return O(e)&&0<e.length}function L(e){m(e.value)&&""===e.value[0]&&delete e.value}function se(r){var t,n={},e=(n.sizes=de(r.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=r.bidId,r.params.placementId?n.id=parseInt(r.params.placementId,10):n.code=r.params.invCode,n.allow_smaller_sizes=r.params.allowSmallerSizes||!1,n.use_pmt_rule=r.params.usePaymentRule||!1,n.prebid=!0,n.disable_psa=!0,_((i=r).getFloor)?(e=i.getFloor({currency:"USD",mediaType:"*",size:"*"}),!R(e)||isNaN(e.floor)||"USD"!==e.currency?null:e.floor):i.params.reserve||null),i=(e&&(n.reserve=e),r.params.position?n.position={above:1,below:2}[r.params.position]||0:0!==(i=k(r,"mediaTypes.banner.pos")||k(r,"mediaTypes.video.pos"))&&1!==i&&3!==i||(n.position=3===i?2:i),r.params.trafficSourceCode&&(n.traffic_source_code=r.params.trafficSourceCode),r.params.privateSizes&&(n.private_sizes=de(r.params.privateSizes)),r.params.supplyType&&(n.supply_type=r.params.supplyType),r.params.pubClick&&(n.pubclick=r.params.pubClick),r.params.extInvCode&&(n.ext_inv_code=r.params.extInvCode),r.params.publisherId&&(n.publisher_id=parseInt(r.params.publisherId,10)),r.params.externalImpId&&(n.external_imp_id=r.params.externalImpId),k(r,"ortb2Imp.ext.data.keywords")),i=((B(i)&&""!==i||!a(r.params.keywords))&&(i=ve(i),t=R(r.params.keywords)?z(r.params.keywords):{},Object.keys(t).forEach(function(e){(B(t[e])||C(t[e]))&&(t[e]=[t[e]])}),i=P({},t,i),0<(i=N(i)).length&&(i.forEach(L),n.keywords=i)),k(r,"ortb2Imp.ext.data.pbadslot")),o=(i&&(n.gpid=i),k(r,"mediaTypes.".concat(c))),i=k(r,"mediaTypes.video.context"),i=(n.hb_source=o&&"adpod"===i?7:1,r.mediaType!==c&&!o||n.ad_types.push(c),(r.mediaType===c||o&&"outstream"!==i)&&(n.require_asset_url=!0),r.params.video&&(n.video={},Object.keys(r.params.video).filter(function(e){return F(te,e)}).forEach(function(e){switch(e){case"context":case"playback_method":var t=r.params.video[e],t=O(t)?t[0]:t;n.video[e]=u[e][t];break;case"frameworks":break;default:n.video[e]=r.params.video[e]}}),r.params.video.frameworks&&O(r.params.video.frameworks)&&(n.video_frameworks=r.params.video.frameworks)),o&&(n.video=n.video||{},Object.keys(o).filter(function(e){return F(re,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof n.video[e]&&(n.video[e]=o[e]);break;case"skip":"boolean"!=typeof n.video.skippable&&(n.video.skippable=1===o[e]);break;case"skipafter":"number"!=typeof n.video.skipoffset&&(n.video.skippoffset=o[e]);break;case"playbackmethod":"number"!=typeof n.video.playback_method&&(i=o[e],1<=(i=O(i)?i[0]:i)&&i<=4&&(n.video.playback_method=i));break;case"api":!n.video_frameworks&&O(o[e])&&(i=o[e].map(function(e){e=4===e?5:5===e?4:e;if(1<=e&&e<=5)return e}).filter(function(e){return e}),n.video_frameworks=i);break;case"startdelay":case"placement":var t,r,i="context";"number"!=typeof n.video[i]&&(r=o.placement,t=o.startdelay,r=function(e){if(e)return 2===e?"in-banner":2<e?"outstream":void 0}(r)||function(e){if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0}(t),n.video[i]=u[i][r])}})),r.renderer&&(n.video=p.utils.assign({},n.video,{custom_renderer_present:!0})),r.params.frameworks&&O(r.params.frameworks)&&(n.banner_frameworks=r.params.frameworks),q(H.getAdUnits(),function(e){return r.transactionId===e.transactionId}));return i&&i.mediaTypes&&i.mediaTypes.banner&&n.ad_types.push(s),0===n.ad_types.length&&delete n.ad_types,n}function de(e){var t=[],r={};if(O(e)&&2===e.length&&!O(e[0]))r.width=parseInt(e[0],10),r.height=parseInt(e[1],10),t.push(r);else if("object"===o(e))for(var i=0;i<e.length;i++){var n=e[i];(r={}).width=parseInt(n[0],10),r.height=parseInt(n[1],10),t.push(r)}return t}function ce(e){return!!e.params.user}function ue(e){return!!parseInt(e.params.member,10)}function pe(e){if(e.params)return!!e.params.app}function le(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function ge(e){return!!e.debug}function me(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===g}function fe(e){var t=!1,r=e.params,i=e.params.video;return t=!(t=r.frameworks&&O(r.frameworks)?F(e.params.frameworks,6):t)&&i&&i.frameworks&&O(i.frameworks)?F(e.params.video.frameworks,6):t}function G(e,t,r){a(e.video)&&(e.video={}),e.video[t]=r}function he(e,t){var r=e.adUnitCode;try{var i=document.getElementById(r).querySelectorAll("div[id^='google_ads']");i[0]&&i[0].style.setProperty("display","none")}catch(e){}r=e.adUnitCode;try{var n=document.getElementById(r).querySelectorAll("script[id^='sas_script']");n[0].nextSibling&&"iframe"===n[0].nextSibling.localName&&n[0].nextSibling.style.setProperty("display","none")}catch(e){}e.renderer.push(function(){(y(t)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,t,r){e.renderer.handleVideoEvent({id:t,eventName:r})}.bind(null,e))})}function V(e,t,r,i){t&&(i?e.push({source:r,id:t,rti_partner:i}):e.push({source:r,id:t}))}function be(e){var r="";return Object.keys(e).forEach(function(t){B(e[t])?""!==e[t]?r+="".concat(t,"=").concat(e[t],","):r+="".concat(t,","):O(e[t])&&(""===e[t][0]?r+="".concat(t,","):e[t].forEach(function(e){r+="".concat(t,"=").concat(e,",")}))}),r=r.substring(0,r.length-1)}function ve(e){var i={};return B(e)&&""!==e&&e.split(/\s*(?:,)\s*/).forEach(function(e){var t,r;-1!==e.indexOf("=")?(t=(r=e.split("="))[0],r=r[1],i.hasOwnProperty(t)?i[t].push(r):i[t]=[r]):i.hasOwnProperty(e)||(i[e]=[""])}),i}n.exports=e("../shim.js").wrap({spec:t,unitIDKey:"placementId",floorKey:"reserve",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],4:[function(e,t,r){"use strict";function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var n=e("../shim.js").polyfills,o=n.logWarn,u=n.isStr,p=n.deepAccess,l=n.isArray,g=n.getBidIdParameter,m=n.deepSetValue,f=n.isEmpty,d=n._each,s=n.convertTypes,c=n.parseUrl,h=n.mergeDeep,b=n.buildUrl,v=n._map,y=n.logError,_=n.isFn,w=n.isPlainObject,x=(n.registerBidder,n.BANNER),I=n.VIDEO,n=n.getStorageManager,S="conversant",A=n({gvlid:24,bidderCode:S}),n={code:S,gvlid:24,aliases:["cnvr"],supportedMediaTypes:[x,I],isBidRequestValid:function(e){if(!e||!e.params)return o(S+": Missing bid parameters"),!1;if(!u(e.params.site_id))return o(S+": site_id must be specified as a string"),!1;if(T(e)){e=e.params.mimes||p(e,"mediaTypes.video.mimes");if(e){if(!l(e)||!e.every(function(e){return u(e)}))return o(S+": mimes must be an array of strings"),!1}else o(S+": mimes should be specified for videos")}return!0},buildRequests:function(e,t){var r=t&&t.refererInfo?t.refererInfo.page:"",o="",a="",s=null,d="_pubcid",c="https://web.hb.ad.cpe.dotomi.com/cvx/client/hb/ortb/25",i=e.map(function(e){var t,r,i,n=function(e){var t=g("bidfloor",e.params);!t&&_(e.getFloor)&&(e=e.getFloor({currency:"USD",mediaType:"*",size:"*"}),w(e)&&!isNaN(e.floor)&&"USD"===e.currency&&(t=e.floor));return t}(e),n=(o=g("site_id",e.params)||o,d=g("pubcid_name",e.params)||d,a=e.auctionId,{id:e.bidId,secure:1,bidfloor:n||0,displaymanager:"Prebid.js",displaymanagerver:"7.31.0"});return e.ortb2Imp&&h(n,e.ortb2Imp),k(e.params.tag_id,n,"tagid"),T(e)?(t={},(r=E((i=p(e,"mediaTypes.video")||{}).playerSize||e.sizes))&&r[0]&&(k(r[0].w,t,"w"),k(r[0].h,t,"h")),k(e.params.position||i.pos,t,"pos"),k(e.params.mimes||i.mimes,t,"mimes"),k(e.params.maxduration||i.maxduration,t,"maxduration"),k(e.params.protocols||i.protocols,t,"protocols"),k(e.params.api||i.api,t,"api"),n.video=t):(i={format:E((r=p(e,"mediaTypes.banner")||{}).sizes||e.sizes)},k(e.params.position||r.pos,i,"pos"),n.banner=i),e.userId&&e.userId.pubcid?s=e.userId.pubcid:e.crumbs&&e.crumbs.pubcid&&(s=e.crumbs.pubcid),e.params.white_label_url&&(c=e.params.white_label_url),n}),r={id:a,imp:i,site:{id:o,mobile:null!==document.querySelector('meta[name="viewport"][content*="width=device-width"]')?1:0,page:r},device:(i=navigator.language?"language":"userLanguage",{h:screen.height,w:screen.width,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack?1:0,language:navigator[i].split("-")[0],make:navigator.vendor||"",ua:navigator.userAgent}),at:1},i={},n=p(e,"0.schain"),n=(n&&m(r,"source.ext.schain",n),t&&(t.gdprConsent&&(i.consent=t.gdprConsent.consentString,"boolean"==typeof t.gdprConsent.gdprApplies&&m(r,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t.uspConsent&&m(r,"regs.ext.us_privacy",t.uspConsent)),(s=s||function(e){var t;try{var r;(t=A.getCookie(e))||(""===(r=A.getDataFromLocalStorage("".concat(e,"_exp")))||r&&0<new Date(r).getTime()-Date.now())&&(t=(t=A.getDataFromLocalStorage(e))&&decodeURIComponent(t)),u(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t))}catch(e){y(e)}return t}(d))&&(i.fpc=s),function(e){var e=e[0],t=[];{var r;l(e.userIdAsEids)&&0<e.userIdAsEids.length&&(r={"epsilon.com":1,"adserver.org":1,"liveramp.com":1,"criteo.com":1,"id5-sync.com":1,"parrable.com":1,"liveintent.com":1},e.userIdAsEids.forEach(function(e){r.hasOwnProperty(e.source)&&t.push(e)}))}return t}(e)),e=(0<n.length&&(i.eids=n),f(i)||(r.user={ext:i}),t.ortb2||{});return h(r,e),{method:"POST",url:c,data:r}},interpretResponse:function(o,e){var a=[],s={};return o=o.body,e&&e.data&&e.data.imp&&d(e.data.imp,function(e){return s[e.id]=e}),o&&l(o.seatbid)&&d(o.seatbid,function(e){d(e.bid,function(e){var t,r,i,n=parseFloat(e.price);0<n&&e.impid&&(t=e.adm||"",r=e.nurl||"",i=s[e.impid],n={requestId:e.impid,currency:o.cur||"USD",cpm:n,creativeId:e.crid||"",ttl:300,netRevenue:!0,meta:{}},e.adomain&&0<e.adomain.length&&(n.meta.advertiserDomains=e.adomain),i.video?("<"===t.charAt(0)?n.vastXml=t:n.vastUrl=t,n.mediaType="video",n.width=i.video.w,n.height=i.video.h):(n.ad=t+'<img src="'+r+'" />',n.width=e.w,n.height=e.h),a.push(n))})}),a},transformBidParams:function(e,t){return s({site_id:"string",secure:"number",mobile:"number"},e)},getUserSyncs:function(t,e,r,i){var n={},o=[];return r&&(n.gdpr=r.gdprApplies?1:0,n.gdpr_consent=encodeURIComponent(r.consentString||"")),i&&(n.us_privacy=encodeURIComponent(i)),e&&e.ext&&(r=[{urls:e.ext.fsyncs,type:"iframe"},{urls:e.ext.psyncs,type:"image"}].filter(function(e){return e.urls&&("iframe"===e.type&&t.iframeEnabled||"image"===e.type&&t.pixelEnabled)}).map(function(t){return t.urls.map(function(e){e=c(e);return h(e.search,n),0===Object.keys(e.search).length&&delete e.search,{type:t.type,url:b(e)}}).reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),o.push.apply(o,a(r))),o}};function E(e){var t;return t=Array.isArray(e)?2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[{w:e[0],h:e[1]}]:v(e,function(e){return{w:e[0],h:e[1]}}):t}function T(e){return"video"===e.mediaType||p(e,"mediaTypes.video")}function k(e,t,r){e&&(t[r]=e)}t.exports=e("../shim.js").wrap({spec:n,unitIDKey:"site_id",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],5:[function(e,a,s){"use strict";function z(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function j(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function J(e,t){var r,i,n,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){i=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw n}}};if(Array.isArray(e)||(a=_(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var r=e("../shim.js").polyfills,w=r.contains,x=r.convertTypes,O=r.deepAccess,C=r.deepClone,R=r.deepSetValue,m=r.getGptSlotInfoForAdUnitCode,I=r.inIframe,X=r.isArray,Y=r.isEmpty,S=r.isFn,B=r.isInteger,D=r.logError,f=r.logWarn,P=r.mergeDeep,N=r.parseQueryStringParameters,A=r.safeJSONParse,U=r.BANNER,h=r.VIDEO,b=r.NATIVE,g=r.config,E=r.CONSTANTS,T=r.getStorageManager,k=r.events,H=r.find,Q=(r.registerBidder,r.INSTREAM),$=r.OUTSTREAM,Z=r.Renderer,q="ix",ee="roundel",d=[U,h,b],te=[144,144],re={JPY:1},ie={PBJS:"p",IX:"x"},ne=1,oe=2,ae=3,se=4,de=5,ce=6,ue=7,pe=8,le=9,ge={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},F={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":""},me=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId"],fe=["mimes","minduration","maxduration"],he=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],M="ixdiag",n="".concat(q,"_features"),be=!1,W=T({gvlid:10,bidderCode:q}),L={featureToggles:{},isFeatureEnabled:function(e){return O(this.featureToggles,"features.".concat(e,".activated"))},getFeatureToggles:function(){var e;W.localStorageIsEnabled()&&(e=A(W.getDataFromLocalStorage(n)),O(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles())},setFeatureToggles:function(e){var e=e.body,t=new Date,e=O(e,"ext.features");e&&(this.featureToggles={expiry:t.setHours(t.getHours()+1),features:e},W.localStorageIsEnabled()&&W.setDataInLocalStorage(n,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},W.localStorageIsEnabled()&&W.removeDataFromLocalStorage(n)}},G=0,V="",ve="",ye=2;function _e(e){var t,r=c(e,h),i=O(e,"mediaTypes.video"),n=O(e,"params.video");if(we(i,n).length)return{};for(t in r.video=n?C(e.params.video):{},r.ext.tid=O(e,"ortb2Imp.ext.tid"),i)-1===he.indexOf(t)||r.video.hasOwnProperty(t)||(r.video[t]=i[t]);if(r.video.minduration>r.video.maxduration)return D("IX Bid Adapter: video minduration [".concat(r.video.minduration,"] cannot be greater than video maxduration [").concat(r.video.maxduration,"]"),{bidder:q,code:le}),{};var o=n&&n.context||i&&i.context;if(o&&!r.video.hasOwnProperty("placement")&&(o===Q?r.video.placement=1:o===$?O(n,"playerConfig.floatOnScroll")?r.video.placement=5:r.video.placement=4:f("IX Bid Adapter: Video context '".concat(o,"' is not supported"))),!r.video.w||!r.video.h){n=p(O(r,"video.playerSize"))||p(O(e,"params.size"));if(!n)return f("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};r.video.w=n[0],r.video.h=n[1]}return v(e,r,h),r}function c(e,t){var r={};if(r.id=e.bidId,r.ext={},O(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case U:r.ext.siteID=e.params.banner.siteId.toString();break;case h:r.ext.siteID=e.params.video.siteId.toString();break;case b:r.ext.siteID=e.params.native.siteId.toString()}else r.ext.siteID=e.params.siteId.toString();return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(r.ext.sid=String(e.params.id)),r}function v(e,t,r){var i=null,n=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),S(e.getFloor)){var o="*",a="*";r&&w(d,r)&&(a=[(r=t[o=r]).w,r.h]);try{n=e.getFloor({mediaType:o,size:a})}catch(e){f("priceFloors module call getFloor failed, error : ",e)}}n?(t.bidfloor=n.floor,t.bidfloorcur=n.currency,t.ext.fl=ie.PBJS):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl=ie.IX)}function o(e){return Array.isArray(e)&&2===e.length&&B(e[0])&&B(e[1])}function u(e,t){var r=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length&&void 0!==t?t:[];if(o(r))return r[0]===i[0]&&r[1]===i[1];for(var n=0;n<r.length;n++)if(r[n][0]===i[0]&&r[n][1]===i[1])return!0;return!1}function we(e,t){var r,i=[],n=(e||f("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit"),J(fe));try{for(n.s();!(r=n.n()).done;){var o=r.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);a||s||i.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){n.e(e)}finally{n.f()}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return d||c||u||p||i.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),i}function p(e){e=0<arguments.length&&void 0!==e?e:[];return o(e)?e:!!o(e[0])&&e[0]}function y(h,b,v){var y="https://htlb.casalemedia.com/openrtb/pbjs",e=function(e){var t=[],r={};if(X(e)){var i,n=J(e);try{for(n.s();!(i=n.n()).done;){var o=i.value;F.hasOwnProperty(o.source)&&O(o,"uids.0")&&(r[o.source]=!0,""!=F[o.source]&&(o.uids[0].ext={rtiPartner:F[o.source]}),delete o.uids[0].atype,t.push(o))}}catch(e){n.e(e)}finally{n.f()}}return{toSend:t,seenSources:r}}(O(h,"0.userIdAsEids")),t=e.toSend,r=O(b,"refererInfo.page"),_=8e3;if(L.isFeatureEnabled("pbjs_use_32kb_size_limit")&&(_=32e3),window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var i=window.headertag.getIdentityInfo();if(i&&"object"===l(i))for(var n in i)!i.hasOwnProperty(n)||!(n=i[n]).responsePending&&n.data&&"object"===l(n.data)&&Object.keys(n.data).length&&!e.seenSources[n.data.source]&&t.push(n.data)}if(b&&b.bidderCode===ee&&!e.seenSources["liveramp.com"])return[];var o,w={},a=g.getConfig("bidderTimeout"),s=(w.id=h[0].bidderRequestId.toString(),w.site={},w.ext={},w.ext.source="prebid",w.ext.ixdiag={},w.ext.ixdiag.ls=W.localStorageIsEnabled(),w.imp=[],w.at=1,function(e){for(var r,i=e.map(function(e){return e.transactionId}).filter(function(e,t,r){return r.indexOf(e)===t}),n={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"7.31.0",userIds:function(e){var t=e.userId||{};return me.filter(function(e){return t[e]})}(e[0]),url:window.location.href.split("?")[0]},t=0;t<i.length;t++)!function(t){r=e.filter(function(e){return e.transactionId===i[t]})[0],O(r,"mediaTypes")&&(1<Object.keys(r.mediaTypes).length&&n.mfu++,O(r,"mediaTypes.native")&&n.nu++,O(r,"mediaTypes.banner")&&n.bu++,"outstream"===O(r,"mediaTypes.video.context")&&(n.ou++,K(r)&&(n.ren=!0)),"instream"===O(r,"mediaTypes.video.context")&&n.iu++,n.allu++)}(t);return n}(h));for(o in s)w.ext.ixdiag[o]=s[o];a&&(w.ext.ixdiag.tmax=a),g.getConfig("userSync")&&(w.ext.ixdiag.syncsPerBidder=g.getConfig("userSync").syncsPerBidder);var a=function(){if(W.localStorageIsEnabled()){var r,i={};try{r=JSON.parse(W.getDataFromLocalStorage(M)||"{}")}catch(e){return D("ix can not read ixdiag from localStorage."),null}return Object.keys(r).forEach(function(t){Object.keys(r[t]).forEach(function(e){"number"==typeof r[t][e]&&(i[e]=i[e]?i[e]+r[t][e]:r[t][e])})}),i}}(),x=(Y(a)||(w.ext.ixdiag.err=a),w.ext.ixdiag.imps=Object.keys(v).length,w.source={tid:h[0].auctionId},h[0].schain&&(w.source.ext={},w.source.ext.schain=h[0].schain),0<t.length&&(w.user={},w.user.eids=t),document.referrer&&""!==document.referrer&&(w.site.ref=document.referrer),b&&(b.gdprConsent&&((V=b.gdprConsent).hasOwnProperty("gdprApplies")&&(w.regs={ext:{gdpr:V.gdprApplies?1:0}}),V.hasOwnProperty("consentString")&&(w.user=w.user||{},w.user.ext={consent:V.consentString||""},V.hasOwnProperty("addtlConsent")&&V.addtlConsent&&(w.user.ext.consented_providers_settings={consented_providers:V.addtlConsent}))),b.uspConsent&&(R(w,"regs.ext.us_privacy",b.uspConsent),ve=b.uspConsent),r&&(w.site.page=r)),g.getConfig("coppa")&&R(w,"regs.coppa",1),{}),a=(G=h[0].params.siteId,x.s=G,b&&b.bidderCode||"ix"),r=g.getConfig(a),I=[],S=0,A=Object.keys(v),E="".concat(y).concat(N(j(j({},x),{},{r:JSON.stringify(w)}))).length;if(_<E)D("IX Bid Adapter: Base request size has exceeded maximum request size.",{bidder:q,code:ue});else{var T=E,k=!1;if(r&&"object"===l(r.firstPartyData)){var d,c=r.firstPartyData,u="?";for(d in c)c.hasOwnProperty(d)&&(u+="".concat(encodeURIComponent(d),"=").concat(encodeURIComponent(c[d]),"&"));u=u.slice(0,-1),(a=encodeURIComponent(u).length)<_?("page"in w.site?w.site.page+=u:w.site.page=u,T+=a):D("IX Bid Adapter: IX config FPD request size has exceeded maximum request size.",{bidder:q,code:ce})}for(var p=0;p<A.length;p++)if("break"===function(e){if(_<=T||4<=I.length)return"break";for(var t=v[A[e]],r=t.missingImps,t=t.ixImps,i=!1,n=_-T,o={ixImps:void 0===t?[]:t,missingBannerImpressions:void 0===r?[]:r},a=Object.keys(o).map(function(e){return o[e]}).filter(function(e){return Array.isArray(e)}).reduce(function(e,t){return e.concat.apply(e,z(t))},[]),s=encodeURIComponent(JSON.stringify({impressionObjects:a})).length;a.length&&n<s;)i=!0,a.pop(),s=encodeURIComponent(JSON.stringify({impressionObjects:a})).length;var d=v[A[e]].gpid,t=v[A[e]].dfp_ad_unit_code,r=v[A[e]].tid,c=v[A[e]].sid;if(a.length&&U in a[0]){for(var u=a[0],p={id:u.id,banner:{topframe:u.banner.topframe,format:a.map(function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}})}},l=0;l<p.banner.format.length;l++)null!=p.banner.format[l].ext&&null!=p.banner.format[l].ext.sid&&delete p.banner.format[l].ext.sid,"bidfloor"in a[l]&&(p.banner.format[l].ext.bidfloor=a[l].bidfloor);var u=v[A[e]].pos;B(u)&&(p.banner.pos=u),(t||d||r||c)&&(p.ext={},p.ext.dfp_ad_unit_code=t,p.ext.gpid=d,p.ext.tid=r,p.ext.sid=c),"bidfloor"in a[0]&&(p.bidfloor=a[0].bidfloor),"bidfloorcur"in a[0]&&(p.bidfloorcur=a[0].bidfloorcur),w.imp.push(p)}else a.forEach(function(e){return R(e,"ext.gpid",d)}),(u=w.imp).push.apply(u,z(a));T+=s;var g,m,t=O(b,"ortb2")||{},u=(Y(t)||k||(w.ext.ixdiag.fpd=!0,g=j({},t.site||t.context),Object.keys(g).forEach(function(e){-1===ge.SITE.indexOf(e)&&delete g[e]}),m=j({},t.user),Object.keys(m).forEach(function(e){-1===ge.USER.indexOf(e)&&delete m[e]}),(r=C(w)).site=P({},r.site,g),r.user=P({},r.user,m),"".concat(y).concat(N(j(j({},x),{},{r:JSON.stringify(r)}))).length<_?(w.site=P({},w.site,g),w.user=P({},w.user,m),k=!0,c=encodeURIComponent(JSON.stringify(j(j({},g),m))).length,T+=c):D("IX Bid Adapter: FPD request size has exceeded maximum request size.",{bidder:q,code:pe})),v[A[e]].pbadslot),t=v[A[e]].tagId,r=v[A[e]].adUnitCode,c=v[A[e]].divId,f=((u||t||r||c)&&(f=C(w),"".concat(y).concat(N(j(j({},x),{},{r:JSON.stringify(f)}))).length<_&&(w.ext.ixdiag.pbadslot=u,w.ext.ixdiag.tagid=t,w.ext.ixdiag.adunitcode=r,w.ext.ixdiag.divId=c)),e===A.length-1);(i||f)&&(f&&!S||(w.ext.ixdiag.sn=S),S++,I.push({method:"POST",url:y+"?s="+G,data:C(w),option:{contentType:"text/plain"},validBidRequests:h}),T=E,w.imp=[],k=!1)}(p))break}return I}function xe(e,t){if(t)for(var r=0;r<e.length;r++){var i=e[r];if(t[0]===i[0]&&t[1]===i[1]){e.splice(r,1);break}}}function Ie(e,t){i=c(r=e,b),(n=r.nativeOrtbRequest).eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,i.native={request:JSON.stringify(n),ver:"1.2"},i.ext.tid=O(r,"ortb2Imp.ext.tid"),v(r,i,b);var r,i,n=i;0!=Object.keys(n).length&&(t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=O(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=O(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=O(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=O(e,"params.tagId"),r=e.adUnitCode,i=document.getElementById(r)?r:m(r).divId,t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i)}function Se(e,t,r){(a=c(o=e,U)).banner={},(n=O(o,"params.size"))&&(a.banner.w=n[0],a.banner.h=n[1]),a.banner.topframe=I()?0:1,v(o,a,U);var i,n=a,o=u(O(e,"mediaTypes.banner.sizes"),O(e,"params.size")),a=(r.hasOwnProperty(e.transactionId)||(r[e.transactionId]={}),r[e.transactionId].gpid=O(e,"ortb2Imp.ext.gpid"),r[e.transactionId].dfp_ad_unit_code=O(e,"ortb2Imp.ext.data.adserver.adslot"),r[e.transactionId].tid=O(e,"ortb2Imp.ext.tid"),r[e.transactionId].pbadslot=O(e,"ortb2Imp.ext.data.pbadslot"),r[e.transactionId].tagId=O(e,"params.tagId"),r[e.transactionId].pos=O(e,"mediaTypes.banner.pos"),O(e,"params.id")),a=(!a||"string"!=typeof a&&"number"!=typeof a||(r[e.transactionId].sid=String(a)),e.adUnitCode),s=document.getElementById(a)?a:m(a).divId,a=(r[e.transactionId].adUnitCode=a,r[e.transactionId].divId=s,o&&(r[e.transactionId].hasOwnProperty("ixImps")||(r[e.transactionId].ixImps=[]),r[e.transactionId].ixImps.push(n)),e),s=t,o=n,r=a.transactionId;s.hasOwnProperty(r)?(i=[],xe(i=s[r].hasOwnProperty("missingSizes")?s[r].missingSizes:i,a.params.size),s[r].missingSizes=i):O(a,"mediaTypes.banner.sizes")&&(xe(i=C(a.mediaTypes.banner.sizes),a.params.size),a={missingSizes:i,impression:o},s[r]=a)}function Ae(e){if("ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===q){var r;if(W.localStorageIsEnabled()){try{r=JSON.parse(W.getDataFromLocalStorage(M)||"{}")}catch(e){f("ix can not read ixdiag from localStorage.")}var t,i=new Date;Object.keys(r).map(function(e){var t=new Date(e);t.setDate(t.getDate()+7)-i<0&&delete r[e]}),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===q&&(t=i.toISOString().slice(0,10),(e=e.arguments[1].code)&&(r[t]=r[t]||{},Number(r[t][e])||(r[t][e]=0),r[t][e]++)),W.setDataInLocalStorage(M,JSON.stringify(r))}}}function Ee(t){t.renderer.push(function(){var e=t.adUnitCode,e=document.getElementById(e)?e:m(e).divId;e?window.createIXPlayer(e,t):f("IX Bid Adapter: adUnitCode: ".concat(e," not found on page."))})}function K(e){var t;if("outstream"===O(e,"mediaTypes.video.context"))return!!("object"!==l(t=(t=O(e,"mediaTypes.video.renderer"))||O(e,"renderer"))||!t.url||!t.render)||t.backupOnly}r={code:q,gvlid:10,aliases:[{code:ee,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:d,isBidRequestValid:function(e){be||(k.on(E.EVENTS.AUCTION_DEBUG,Ae),k.on(E.EVENTS.AD_RENDER_FAILED,Ae),be=!0);var t=O(e,"params.video"),r=O(e,"params.size"),i=O(e,"mediaTypes.banner.sizes"),n=O(e,"mediaTypes.video"),o=O(e,"mediaTypes.video.playerSize"),a=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!w(d,e.mediaType))return f("IX Bid Adapter: media type is not supported."),!1;if(O(e,"mediaTypes.banner")&&!i)return!1;if(r){r=p(r);if(!r)return D("IX Bid Adapter: size has invalid format.",{bidder:q,code:ne}),!1;if(!u(e.sizes,r)&&!u(o,r)&&!u(i,r))return D("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:q,code:oe}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return D("IX Bid Adapter: siteId must be string or number type.",{bidder:q,code:se}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return D("IX Bid Adapter: siteId must valid value",{bidder:q,code:se}),!1;if((a||s)&&!(a&&s&&(o=e.params.bidFloor,i=e.params.bidFloorCur,Boolean("number"==typeof o&&"string"==typeof i&&i.match(/^[A-Z]{3}$/)))))return D("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:q,code:de}),!1;if(n&&t){r=_e(e).video,a=we(n,t);if(O(e,"mediaTypes.video.context")===$&&K(e)&&r){s=[O(r,"w"),O(r,"h")];if(!(te[0]<=s[0]&&te[1]<=s[1]))return D("IX Bid Adapter: ".concat(s," is an invalid size for IX outstream renderer")),!1}if(a.length)return a.forEach(function(e){D(e,{bidder:q,code:ae})}),!1}return void 0===O(o=e,"mediaTypes.native")||o.nativeOrtbRequest&&Array.isArray(o.nativeOrtbRequest.assets)&&0<o.nativeOrtbRequest.assets.length},buildRequests:function(e,t){var r,i,n,o=[],s={},d={},c={},u={};for(r in L.getFeatureToggles(),e.forEach(function(e){var t,r,i,n,o,a=Object.keys(O(e,"mediaTypes",{}));for(t in a)switch(a[t]){case U:Se(e,u,s);break;case h:i=d,o=n=void 0,o=_e(r=e),0!=Object.keys(o).length&&(i[r.transactionId]={},i[r.transactionId].ixImps=[],i[r.transactionId].ixImps.push(o),i[r.transactionId].gpid=O(r,"ortb2Imp.ext.gpid"),i[r.transactionId].dfp_ad_unit_code=O(r,"ortb2Imp.ext.data.adserver.adslot"),i[r.transactionId].pbadslot=O(r,"ortb2Imp.ext.data.pbadslot"),i[r.transactionId].tagId=O(r,"params.tagId"),o=r.adUnitCode,n=document.getElementById(o)?o:m(o).divId,i[r.transactionId].adUnitCode=o,i[r.transactionId].divId=n);break;case b:Ie(e,c);break;default:f("IX Bid Adapter: ad unit mediaTypes ".concat(t," is not supported"))}}),u)if(u.hasOwnProperty(r))for(var a=u[r].missingSizes,p=(s.hasOwnProperty(r)||(s[r]={}),s[r].hasOwnProperty("missingImps")||(s[r].missingImps=[],s[r].missingCount=0),u[r].impression),l=0;l<a.length;l++){i=e[0],n=p,g=a[l],(n=C(n)).banner.w=g[0],n.banner.h=g[1],v(i,n,U);var g=n;s[r].missingImps.push(g),s[r].missingCount++}return 0<Object.keys(s).length&&o.push.apply(o,z(y(e,t,s))),0<Object.keys(d).length&&o.push.apply(o,z(y(e,t,d))),0<Object.keys(c).length&&o.push.apply(o,z(y(e,t,c))),o},interpretResponse:function(e,t){var r=[],i=null;if(e.hasOwnProperty("body")&&e.body.hasOwnProperty("seatbid"))for(var n=e.body,o=n.seatbid,a=0;a<o.length;a++)if(o[a].hasOwnProperty("bid")){for(var s=o[a].bid,d=t.data,c=0;c<s.length;c++){var u=function(t,e,r){if(t)return j(j({},H(r,function(e){return e.bidId===t})),H(e,function(e){return e.id===t}))}(s[c].impid,d.imp,t.validBidRequests);if((i=function(e,t,r){var i={},n=!(!O(e,"exp")||!B(e.exp)),o=O(e,"dealid")||O(e,"ext.dealid"),o=(re.hasOwnProperty(t)?i.cpm=e.price/re[t]:i.cpm=e.price/100,i.requestId=e.impid,o&&(i.dealId=o),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype==ye?i.vastXml=e.adm:e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl),null);if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{o=JSON.parse(e.adm)}catch(e){f("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==ye?(i.width=r.video.w,i.height=r.video.h,i.mediaType=h,i.mediaTypes=r.mediaTypes,i.ttl=n?e.exp:3600):o&&o.native?(i.native={ortb:o.native},i.width=e.w||1,i.height=e.h||1,i.mediaType=b,i.ttl=n?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=U,i.ttl=n?e.exp:300),i.meta={},i.meta.networkId=O(e,"ext.dspid"),i.meta.brandId=O(e,"ext.advbrandid"),i.meta.brandName=O(e,"ext.advbrand"),e.adomain&&0<e.adomain.length&&(i.meta.advertiserDomains=e.adomain),i}(s[c],n.cur,u)).mediaType===h&&K(u)){u=O(n,"ext.videoplayerurl");if(i.renderer=function(e,t){e=Z.install({id:e,url:t,loaded:!1});try{e.setRender(Ee)}catch(e){return f("Prebid Error calling setRender on renderer",e),null}return t?e:(f("Outstream renderer URL not found"),null)}(s[c].bidId,u),!i.renderer)continue}r.push(i)}if(O(d,"ext.ixdiag.err")&&W.localStorageIsEnabled())try{W.removeDataFromLocalStorage(M)}catch(e){D("ix can not clear ixdiag from localStorage.")}}return L.setFeatureToggles(e),r},transformBidParams:function(e,t){return x({siteID:"number"},e)},getUserSyncs:function(e,t){var r=[],i=null;if(void 0!==(i=0<t.length?O(t[0],"body.ext.publishersyncsperbidderoverride"):i)&&0==i)return[];if(e.iframeEnabled)r.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var n=null;0===(n=g.getConfig("userSync")?g.getConfig("userSync").syncsPerBidder:n)&&(n=i);for(var n=i&&(0===n||n)?n<i?n:i:1,o=0;o<n;o++)r.push({type:"image",url:function(e,t){var r="",i="0";V&&V.hasOwnProperty("gdprApplies")&&(i=V.gdprApplies?"1":"0");V&&V.hasOwnProperty("consentString")&&(r=V.consentString||"");return"https://dsum.casalemedia.com/pbusermatch?origin=prebid&site_id="+G.toString()+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+i+"&gdpr_consent="+r+"&us_privacy="+(ve||"")}(n,o)})}return r}};a.exports=e("../shim.js").wrap({spec:r,unitIDKey:"siteId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],6:[function(e,t,r){"use strict";function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function n(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r,i,n,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){i=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw n}}};if(Array.isArray(e)||(a=c(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var u=e("../shim.js").polyfills,p=u.config,l=u.BANNER,g=u.VIDEO,m=(u.registerBidder,u.deepAccess),f=u.generateUUID,h=u.logError,b=u.isArray,v=u.getStorageManager,y=u.find,_="insticator",w="https://ex.ingage.tech/v1/openrtb",x="hb_insticator_uid",I=2592e6,S=300,A=v({gvlid:910,bidderCode:_});function E(e){var t,r,i,n={id:e.bidId,tagid:e.adUnitCode,instl:m(e,"ortb2Imp.instl"),secure:"https:"===location.protocol?1:0,ext:{gpid:m(e,"ortb2Imp.ext.gpid"),insticator:{adUnitId:e.params.adUnitId}}};return m(e,"mediaTypes.banner")&&(n.banner=function(e){var t,r=[],i=m(e,"mediaTypes.banner.pos"),n=d(m(e,"mediaTypes.banner.sizes")||e.sizes);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push({w:o[0],h:o[1]})}}catch(e){n.e(e)}finally{n.f()}return{format:r,pos:i}}(e)),m(e,"mediaTypes.video")&&(n.video=(t=m(e=e,"mediaTypes.video.w"),r=m(e,"mediaTypes.video.h"),i=m(e,"mediaTypes.video.mimes"),{placement:m(e,"mediaTypes.video.placement")||3,mimes:i,w:t,h:r})),n}function T(e){var t,r,i=(i=(i=A.localStorageIsEnabled()?A.getDataFromLocalStorage(x):A.getCookie(x))&&36!==i.length?void 0:i)||f(),n=m(e,"params.user.yob"),e=m(e,"params.user.gender");return t=i,A.localStorageIsEnabled()&&A.setDataInLocalStorage(x,t),A.cookiesAreEnabled()&&(r=new Date(Date.now()+I).toUTCString(),A.setCookie(x,t,r)),{id:i,yob:n,gender:e}}function k(e,t){var r={id:t.bidderRequestId,tmax:t.timeout,source:{fd:1,tid:t.auctionId},site:{domain:t.refererInfo.domain,page:t.refererInfo.page,ref:t.refererInfo.ref},device:(i=p.getConfig("device"),r={w:window.innerWidth,h:window.innerHeight,js:!0,ext:{localStorage:A.localStorageIsEnabled(),cookies:A.cookiesAreEnabled()}},"object"===s(i)&&u.utils.assign(r,i),r),regs:(i=t).gdprConsent?{ext:{gdpr:i.gdprConsent.gdprApplies?1:0,gdprConsentString:i.gdprConsent.consentString}}:{},user:T(e[0]),imp:e.map(E),ext:{insticator:{adapter:{vendor:"prebid",prebid:"7.31.0"}}}},i=p.getConfig("insticator.params"),i=(i&&(r.ext={insticator:n(n({},r.ext.insticator),i)}),function(e,t){if(e&&0!==e.length&&e[0].schain)return(e=e[0].schain)&&e.nodes&&e.nodes.length&&e.nodes[0]&&(e.nodes[0].rid=t),e}(e,t.bidderRequestId)),t=(i&&(r.source.ext={schain:i}),function(e){if(e)return(e.find(function(e){return b(e.userIdAsEids)&&0<e.userIdAsEids.length})||e[0]).userIdAsEids}(e));return t&&(r.user.ext={eids:t}),r}function z(e,i){return e.bid.map(function(e){return t=e,e=y((e=i).bids,function(e){return e.bidId===t.impid}),r={},t.ext&&t.ext.meta&&(r=t.ext.meta),t.adomain&&(r.advertiserDomains=t.adomain),n({requestId:t.impid,creativeId:t.crid,cpm:t.price,currency:"USD",netRevenue:!0,ttl:t.exp||p.getConfig("insticator.bidTTL")||S,width:t.w,height:t.h,mediaType:"banner",ad:t.adm,adUnitCode:e.adUnitCode},0<Object.keys(r).length?{meta:r}:{});var t,r})}function j(e){return e instanceof Array&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function O(e){return e instanceof Array&&0<e.length&&e.map(j).reduce(function(e,t){return e&&t},!0)}p.setDefaults({insticator:{endpointUrl:w,bidTTL:S}});v={code:_,gvlid:910,supportedMediaTypes:[l,g],isBidRequestValid:function(e){return!((e.params.adUnitId?!(l in(r=e).mediaTypes||g in r.mediaTypes)&&(h("insticator: expected banner or video in mediaTypes"),1):(h("insticator: missing adUnitId bid parameter"),1))||void 0!==m(r=e,"mediaTypes.banner")&&!O(r.sizes)&&!O(r.mediaTypes.banner.sizes)&&(h("insticator: banner sizes not specified or invalid"),1)||void 0!==m(e=e,"mediaTypes.video")&&(j([m(e,"mediaTypes.video.w"),m(e,"mediaTypes.video.h")])?(t=m(e,"mediaTypes.video.mimes"),Array.isArray(t)&&0!==t.length?void 0!==(t=m(e,"mediaTypes.video.placement"))&&"number"!=typeof t&&(h("insticator: video placement is not a number"),1):(h("insticator: mimes not specified"),1)):(h("insticator: video size not specified or invalid"),1)));var t,r},buildRequests:function(e,t){var r=[],i=(i=p.getConfig("insticator.endpointUrl")||w).replace(/^http:/,"https:");return 0<e.length&&r.push({method:"POST",url:i,options:{contentType:"application/json",withCredentials:!0},data:JSON.stringify(k(e,t)),bidderRequest:t}),r},interpretResponse:function(e,t){var r=t.bidderRequest,t=e.body;return t&&t.id===r.bidderRequestId?t.seatbid?t.seatbid.map(function(e){return z(e,r)}).reduce(function(e,t){return e.concat(t)},[]):[]:(h("insticator: response id does not match bidderRequestId"),[])},getUserSyncs:function(e,t){var r,i=[],n=d(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.body&&o.body.ext&&o.body.ext.sync instanceof Array&&i.push.apply(i,a(o.body.ext.sync))}}catch(e){n.e(e)}finally{n.f()}return i}};t.exports=e("../shim.js").wrap({spec:v,unitIDKey:"adUnitId",floorKey:!1,floorStr:!1,uspSupport:!1,gdprSupport:!0})},{"../shim.js":37}],7:[function(e,t,P){"use strict";var p=e("../shim.js").polyfills,i=p.buildUrl,l=p.deepAccess,o=p.getGptSlotInfoForAdUnitCode,n=p.getWindowTop,a=p.isArray,g=p.isEmpty,r=p.isEmptyStr,s=p.isStr,d=p.logError,c=p.logInfo,u=p.triggerPixel,m=(p.registerBidder,p.config),f=p.BANNER,h=p.NATIVE,b=p.VIDEO,v=p.getRefererInfo,y=p.Renderer,_=p.convertOrtbRequestToProprietaryNative,w="medianet",x="https://prebid.media.net/video/bundle.js",I={NOT_DETERMINED:0,ABOVE_THE_FOLD:1,BELOW_THE_FOLD:2},S="client_timeout",A="client_bid_won",v=v(),E={};window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[],E.urlData={domain:v.domain,page:v.page,isTop:v.reachedTop};function T(e,t){var r,t=t.refererInfo,e={domain:(e=e||{}).domain||t.domain,page:e.page||t.page,ref:e.ref||function(){try{return window.top.document.referrer}catch(e){return document.referrer}}(),topMostLocation:t.topmostLocation,isTop:e.isTop||t.reachedTop};return p.utils.assign(e,(E.pageMeta||(t=k('link[rel="canonical"]',"href"),e=k('meta[property="og:url"]',"content"),r=k('meta[name="twitter:url"]',"content"),E.pageMeta=p.utils.assign({},t&&{canonical_url:t},e&&{og_url:e},r&&{twitter_url:r})),E.pageMeta))}function k(e,t){var e=function(e,t){try{var r=n().document.querySelector(e);if(null!==r&&r[t])return r[t]}catch(e){}}(e,t);return e&&(t=e,(e=n().document.createElement("a")).href=t,e.href)}function z(e,t){return e.filter(function(e){return e.type===t})}function j(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function N(e){var t={id:e.bidId,transactionId:e.transactionId,ext:{dfp_id:e.adUnitCode,display_count:e.bidRequestsCount},all:e.params},r=(e.ortb2Imp&&(t.ortb2Imp=e.ortb2Imp),l(e,"mediaTypes.banner.sizes")||[]),i=l(e,"mediaTypes.video")||{},n=l(e,"params.video")||{},n=p.utils.assign({},n,i);if(g(n)||(t.video=n),0<r.length&&(t.banner=a(i=r)&&2===i.length&&!a(i[0])?[j(i)]:i.map(j)),e.nativeParams)try{t.native=JSON.stringify(e.nativeParams)}catch(e){d("".concat(w," : Incorrect JSON : bidRequest.nativeParams"))}e.params.crid&&(t.tagid=e.params.crid.toString());n=parseFloat(e.params.bidfloor||e.params.bidFloor),n&&(t.bidfloor=n),r=e.adUnitCode,(i=document.getElementById(r))||-1===r.indexOf("/")||(r=o(r).divId,s(r)&&(i=document.getElementById(r))),n=i&&i.getBoundingClientRect?(r=i.getBoundingClientRect(),(i={}).top_left={y:r.top,x:r.left},i.bottom_right={y:r.bottom,x:r.right},i):null,n&&t.banner&&0!==t.banner.length?(r={top_left:{x:n.top_left.x+window.pageXOffset,y:n.top_left.y+window.pageYOffset},bottom_right:{x:n.bottom_right.x+window.pageXOffset,y:n.bottom_right.y+window.pageYOffset}},t.ext.coordinates=r,t.ext.viewability=R(n.top_left,C(t.banner)),.5<R(r.top_left,C(t.banner))?t.ext.visibility=I.ABOVE_THE_FOLD:t.ext.visibility=I.BELOW_THE_FOLD):t.ext.visibility=I.NOT_DETERMINED,i=function(r){var i=[];"function"==typeof r.getFloor&&[f,b,h].forEach(function(t){r.mediaTypes.hasOwnProperty(t)&&(t==f?r.mediaTypes.banner.sizes.forEach(function(e){O(r,t,e,i)}):O(r,t,"*",i))});return i}(e);return i&&0<i.length&&(t.bidfloors=i),t}function O(e,t,r,i){e=e.getFloor({currency:"USD",mediaType:t,size:r});1<r.length&&(e.size=r),e.mediaType=t,i.push(e)}function C(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}function R(e,t){var r=t.w*t.h,i=D.getWindowSize(),t={x:e.x+t.w,y:e.y+t.h};return 0==r||-1===i.w||-1===i.h?0:function(e,t,r,i){if(e.x>i.x||t.x<r.x||e.y>i.y||t.y<r.y)return 0;return(Math.min(t.x,i.x)-Math.max(e.x,r.x))*(Math.min(t.y,i.y)-Math.max(e.y,r.y))}(e,t,{x:0,y:0},{x:i.w,y:i.h})/r}function U(e,t){return{site:T(e[0].params.site,t),ext:(r=e[0],i=t,n=l(r,"params"),o=l(i,"gdprConsent"),i=l(i,"uspConsent"),a=l(r,"userId"),r=l(r,"schain")||{},s=D.getWindowSize(),d=!(!o||!o.gdprApplies),c=!!i,u=!!m.getConfig("coppa"),p.utils.assign({},{customer_id:n.cid},{prebid_version:AdBridg.globals.version},{gdpr_applies:d},d&&{gdpr_consent_string:o.consentString||""},{usp_applies:c},c&&{usp_consent_string:i||""},{coppa_applies:u},-1!==s.w&&-1!==s.h&&{screen:s},a&&{user_id:a},AdBridg.globals.medianetGlobals.analyticsEnabled&&{analytics:!0},!g(r)&&{schain:r})),id:e[0].auctionId,imp:e.map(N),ortb2:t.ortb2,tmax:t.timeout||m.getConfig("bidderTimeout")};var r,i,n,o,a,s,d,c,u}function B(e,t){var r,t={protocol:"https",hostname:"qsearch-a.akamaihd.net/log",search:(e=e,t=a(t=t)&&t||[],(r={logid:"kfk",evtid:"projectevents",project:"prebid"}).acid=l(t,"0.auctionId")||"",r.cid=AdBridg.globals.medianetGlobals.cid||"",r.crid=t.map(function(e){return l(e,"params.0.crid")||e.adUnitCode}).join("|"),r.adunit_count=t.length||0,r.dn=E.urlData.domain||"",r.requrl=E.urlData.page||"",r.istop=E.urlData.isTop||"",r.event=e.name||"",r.value=e.value||"",r.rd=e.related_data||"",r)};u(i(t))}function q(e){var t=l(e,"context")||"",r=l(e,"vto");"outstream"==t&&r&&(e.renderer=((t=y.install({url:x})).setRender(function(r){window.mnet.queue.push(function(){var e={width:r.width,height:r.height,vastTimeout:r.vto,maxAllowedVastTagRedirects:r.mavtr,allowVpaid:r.avp,autoPlay:r.ap,preload:r.pl,mute:r.mt},t=r.dfp_id,t=o(t).divId||t;window.mnet.mediaNetoutstreamPlayer(r,t,e)})}),t))}AdBridg.globals.medianetGlobals=AdBridg.globals.medianetGlobals||{};var D={code:w,gvlid:142,aliases:[{code:"aax",gvlid:720}],supportedMediaTypes:[f,h,b],isBidRequestValid:function(e){return e.params?e.params.cid&&s(e.params.cid)&&!r(e.params.cid)?(p.utils.assign(AdBridg.globals.medianetGlobals,!AdBridg.globals.medianetGlobals.cid&&{cid:e.params.cid}),!0):(d("".concat(w," : cid should be a string")),!1):(d("".concat(w," : Missing bid parameters")),!1)},buildRequests:function(e,t){e=U(e=_(e),t);return{method:"POST",url:(t=e.ext.customer_id,"https://prebid.media.net/rtb/prebid?cid="+encodeURIComponent(t)),data:JSON.stringify(e)}},interpretResponse:function(e,t){var r=[];return e&&e.body?(e=e.body.bidList,a(e)&&0!==e.length?(r=e.filter(function(e){return!1===(e=e).no_bid&&0<parseFloat(e.cpm)})).forEach(q):c("".concat(w," : no bids"))):c("".concat(w," : response is empty")),r},getUserSyncs:function(e,t){t=!g(t=t)&&t[0].body&&t[0].body.ext&&a(t[0].body.ext.csUrl)?t[0].body.ext.csUrl:[];return e.iframeEnabled?z(t,"iframe"):e.pixelEnabled?z(t,"image"):void 0},onTimeout:function(e){try{B({name:S,value:e.length,related_data:e[0].timeout||m.getConfig("bidderTimeout")},e)}catch(e){}},onBidWon:function(e){try{B({name:A,value:e.cpm},[e])}catch(e){}},clearMnData:function(){E={}},getWindowSize:function(){return{w:window.screen.width||-1,h:window.screen.height||-1}}};t.exports=e("../shim.js").wrap({spec:D,unitIDKey:"crid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],8:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?o(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var a=e("../shim.js").polyfills,s=a._each,d=a._map,c=a.convertTypes,u=a.deepAccess,p=a.deepSetValue,l=a.inIframe,g=a.isArray,m=a.parseSizesInput,f=a.parseUrl,h=a.config,b=(a.registerBidder,a.BANNER),v=a.VIDEO,y=a.includes,_=["startdelay","mimes","minduration","maxduration","startdelay","skippable","playbackmethod","api","protocols","boxingallowed","linearity","delivery","protocol","placement","minbitrate","maxbitrate"],w="hb_pb",x="3.0.3",I="USD",S={britepoolid:"britepoolid",criteoId:"criteoid",fabrickId:"nuestarid",hadronId:"audigentid",id5id:"id5id",idl_env:"lre",IDP:"zeotapid",idxId:"idxid",intentIqId:"intentiqid",lipb:"lipbid",lotamePanoramaId:"lotameid",merkleId:"merkleid",netId:"netid",parrableId:"parrableid",pubcid:"pubcid",quantcastId:"quantcastid",tapadId:"tapadid",tdid:"ttduuid",uid2:"uid2",admixerId:"admixerid",deepintentId:"deepintentid",dmdId:"dmdid",nextrollId:"nextrollid",novatiq:"novatiqid",mwOpenLinkId:"mwopenlinkid",dapId:"dapid",amxId:"amxid",kpuid:"kpuid",publinkId:"publinkid",naveggId:"naveggid",imuid:"imuid",adtelligentId:"adtelligentid"},a={code:"openx",gvlid:69,supportedMediaTypes:[b,v],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return u(e,"mediaTypes.banner")&&t?!!e.params.unit||0<u(e,"mediaTypes.banner.sizes.length"):!(!e.params.unit||!t)},buildRequests:function(e,t){var r,i;return 0===e.length?[]:(r=[],i=(e=n(e.reduce(function(e,t){var r;return(u(r=t,"mediaTypes.video")&&!u(r,"mediaTypes.banner")||r.mediaType===v?e[0]:e[1]).push(t),e},[[],[]]),2))[0],0<(e=e[1]).length&&r.push(function(e,t){var i=[],n=!1,t=A(e,t),r=d(e,function(e){return e.params.unit});t.aus=d(e,function(e){return m(e.mediaTypes.banner.sizes).join(",")}).join("|"),t.divids=d(e,function(e){return encodeURIComponent(e.adUnitCode)}).join(","),t.aucs=d(e,function(e){e=u(e,"ortb2Imp.ext.data.pbadslot");return encodeURIComponent(e||"")}).join(","),r.some(function(e){return e})&&(t.auid=r.join(","));e.some(function(e){return e.params.doNotTrack})&&(t.ns=1);!0!==h.getConfig("coppa")&&!e.some(function(e){return e.params.coppa})||(t.tfcd=1);e.forEach(function(r){var e;r.params.customParams?(e=d(Object.keys(r.params.customParams),function(e){var t=r.params.customParams;return t=t[e],g(t)&&(t=t.join(",")),(e.toLowerCase()+"="+t.toLowerCase()).replace("+",".").replace("/","_")}),e=window.btoa(e.join("&")),n=!0,i.push(e)):i.push("")}),n&&(t.tps=i.join(","));return T(t,b,e),{method:"GET",url:t.ph?"https://u.openx.net/w/1.0/arj":"https://".concat(e[0].params.delDomain,"/w/1.0/arj"),data:t,payload:{bids:e,startTime:new Date}}}(e,t)),0<i.length&&i.forEach(function(e){r.push(function(e,t){t=function(e,t){var r,i,n=u(e,"mediaTypes.video"),t=A([e],t),o=u(e,"params.video")||{},a=u(e,"mediaTypes.video.context"),s=u(e,"mediaTypes.video.playerSize");g(e.sizes)&&2===e.sizes.length&&!g(e.sizes[0])?(r=parseInt(e.sizes[0],10),i=parseInt(e.sizes[1],10)):g(e.sizes)&&g(e.sizes[0])&&2===e.sizes[0].length?(r=parseInt(e.sizes[0][0],10),i=parseInt(e.sizes[0][1],10)):g(s)&&2===s.length&&(r=parseInt(s[0],10),i=parseInt(s[1],10));var d={w:r,h:i},c=e.params.video||e.params.openrtb||{};c.openrtb&&(c=c.openrtb);g(c.imp)&&(c=c.imp[0].video);Object.keys(c).filter(function(e){return y(_,e)}).forEach(function(e){return d[e]=c[e]}),Object.keys(n).filter(function(e){return y(_,e)}).forEach(function(e){return d[e]=n[e]});s={imp:[{video:d}]};t.openrtb=JSON.stringify(s),t.auid=e.params.unit,t.vwd=r||o.vwd,t.vht=i||o.vht,"outstream"===a&&(t.vos="101");o.mimes&&(t.vmimes=o.mimes);e.params.test&&(t.vtest=1);s=u(e,"ortb2Imp.ext.data.pbadslot");s&&(t.aucs=encodeURIComponent(s));return T(t,v,[e]),t}(e,t);return{method:"GET",url:t.ph?"https://u.openx.net/v/1.0/avjp":"https://".concat(e.params.delDomain,"/v/1.0/avjp"),data:t,payload:{bid:e,startTime:new Date}}}(e,t))}),r)},interpretResponse:function(e,t){e=e.body;return((/avjp$/.test(t.url)?v:b)===v?function(e,t){var r=t.bid,t=(t.startTime,[]);{var i,n;void 0!==e&&""!==e.vastUrl&&0<e.pub_rev&&(i=f(e.vastUrl).search||{},(n={}).requestId=r.bidId,e.deal_id&&(n.dealId=e.deal_id),n.ttl=300,n.netRevenue=!0,n.currency=e.currency,n.cpm=parseInt(e.pub_rev,10)/1e3,n.width=parseInt(e.width,10),n.height=parseInt(e.height,10),n.creativeId=e.adid,n.vastUrl=e.vastUrl,n.mediaType=v,e.ph=i.ph,e.colo=i.colo,e.ts=i.ts,t.push(n))}return t}:function(e,t){for(var r=t.bids,i=(t.startTime,e.ads.ad),n=[],o=0;o<i.length;o++){var a=i[o],s=parseInt(a.idx,10),d={};d.requestId=r[s].bidId,a.pub_rev&&(d.cpm=Number(a.pub_rev)/1e3,(s=a.creative[0])&&(d.width=s.width,d.height=s.height),d.creativeId=s.id,d.ad=a.html,a.deal_id&&(d.dealId=a.deal_id),d.ttl=300,d.netRevenue=!0,d.currency=a.currency,a.tbd&&(d.tbd=a.tbd),d.ts=a.ts,d.meta={},a.brand_id&&(d.meta.brandId=a.brand_id),a.adomain&&0<length(a.adomain)?d.meta.advertiserDomains=a.adomain:d.meta.advertiserDomains=[],a.adv_id&&(d.meta.dspid=a.adv_id),n.push(d))}return n})(e,t.payload)},getUserSyncs:function(e,t,r,i){if(e.iframeEnabled||e.pixelEnabled)return[{type:e.iframeEnabled?"iframe":"image",url:u(t,"0.body.ads.pixels")||u(t,"0.body.pixels")||function(e,t){var r=[];e&&(r.push("gdpr="+(e.gdprApplies?1:0)),r.push("gdpr_consent="+encodeURIComponent(e.consentString||"")));t&&r.push("us_privacy="+encodeURIComponent(t));return"".concat("https://u.openx.net/w/1.0/pd").concat(0<r.length?"?"+r.join("&"):"")}(r,i)}]},transformBidParams:function(e,t){return c({unit:"string",customFloor:"number"},e)}};function A(e,t){var n,r=l(),r={ju:t.refererInfo.page,ch:document.charSet||document.characterSet,res:"".concat(screen.width,"x").concat(screen.height,"x").concat(screen.colorDepth),ifr:r,tz:(new Date).getTimezoneOffset(),tws:function(e){var t,r,i=window,n=document,o=n.documentElement;if(e){try{i=window.top,n=window.top.document}catch(e){return}e=n.body,t=i.innerWidth||o.clientWidth||e.clientWidth,r=i.innerHeight||o.clientHeight||e.clientHeight}else t=i.innerWidth||o.clientWidth,r=i.innerHeight||o.clientHeight;return"".concat(t,"x").concat(r)}(r),be:1,bc:e[0].params.bc||"".concat(w,"_").concat(x),dddid:d(e,function(e){return e.transactionId}).join(","),nocache:(new Date).getTime()},i=E("user.data",t.ortb2),i=(0<i.length&&(r.sm=i),E("site.content.data",t.ortb2));return 0<i.length&&(r.scsm=i),e[0].params.platform&&(r.ph=e[0].params.platform),t.gdprConsent&&(void 0!==(i=t.gdprConsent).consentString&&(r.gdpr_consent=i.consentString),void 0!==i.gdprApplies&&(r.gdpr=i.gdprApplies?1:0),"iab"===h.getConfig("consentManagement.cmpApi")&&(r.x_gdpr_f=1)),t&&t.uspConsent&&(r.us_privacy=t.uspConsent),u(e[0],"crumbs.pubcid")&&p(e[0],"userId.pubcid",u(e[0],"crumbs.pubcid")),n=r,i=e[0].userId,s(i,function(e,t){var r,i=S[t];if(S.hasOwnProperty(t))switch(t){case"merkleId":case"uid2":n[i]=e.id;break;case"lipb":n[i]=e.lipbid,Array.isArray(e.segments)&&0<e.segments.length&&(r="liveintent:"+e.segments.join("|"),n.sm="".concat(n.sm?n.sm+",":"").concat(r));break;case"parrableId":n[i]=e.eid;break;case"id5id":n[i]=e.uid;break;case"novatiq":n[i]=e.snowflake;break;default:n[i]=e}}),r=n,e[0].schain&&(r.schain=(t=e[0].schain,"".concat(t.ver,",").concat(t.complete,"!").concat(function(e){var r=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return r.map(function(e){return t[e]||""}).join(",")}).join("!")}(t.nodes)))),r}function E(e,t){var r,t=u(t,e);return Array.isArray(t)&&t.length?(r=t.filter(function(e){return Array.isArray(e.segment)&&0<e.segment.length&&void 0!==e.name&&0<e.name.length}).reduce(function(e,t){var r="object"===i(t.ext)&&t.ext.segtax?"".concat(t.name,"/").concat(t.ext.segtax):t.name;return e[r]=(e[r]||[]).concat(t.segment.map(function(e){return e.id})),e},{}),Object.keys(r).map(function(e,t){return e+":"+r[e].join("|")}).join(",")):""}function T(e,t,r){var i=[],n=!1;r.forEach(function(e){e=function(e,t){var r={},i=h.getConfig("currency.adServerCurrency")||I;"function"==typeof e.getFloor&&(r=e.getFloor({currency:i,mediaType:t,size:"*"}));i=r.floor||e.params.customFloor||0;return Math.round(1e3*i)}(e,t);e?(i.push(e),n=!0):i.push(0)}),n&&(e.aumfs=i.join(","))}t.exports=e("../shim.js").wrap({spec:a,unitIDKey:"unit",floorKey:"customFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],9:[function(e,n,u){"use strict";function g(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function t(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function F(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=e("../shim.js").polyfills,M=m.getBidRequest,v=m.logWarn,r=m._each,p=m.isBoolean,y=m.isStr,_=m.isArray,w=m.inIframe,f=m.mergeDeep,x=m.deepAccess,o=m.isNumber,I=m.deepSetValue,S=m.logInfo,a=m.logError,W=m.deepClone,l=m.convertTypes,h=m.uniques,A=(m.registerBidder,m.BANNER),E=m.VIDEO,T=m.NATIVE,k=m.ADPOD,z=m.config,L=m.Renderer,j=m.bidderSettings,G=m.convertOrtbRequestToProprietaryNative,s="pubmatic",O="PubMatic: ",C=void 0,V="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),K="Video.Placement param missing",R={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},d={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},c={mimes:d.ARRAY,minduration:d.NUMBER,maxduration:d.NUMBER,startdelay:d.NUMBER,playbackmethod:d.ARRAY,api:d.ARRAY,protocols:d.ARRAY,w:d.NUMBER,h:d.NUMBER,battr:d.ARRAY,linearity:d.NUMBER,placement:d.NUMBER,minbitrate:d.NUMBER,maxbitrate:d.NUMBER,skip:d.NUMBER},B={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},D={ICON:1,LOGO:2,IMAGE:3},P=[{id:B.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:B.TITLE.ID,required:!0},{id:B.IMAGE.ID,required:!0}],J={1:"PMP",5:"PREF",6:"PMPG"},N={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var r,i=N.getRendererId("pubmatic",e.rendererCode),e=document.getElementById(e.adUnitCode),n=0;n<window.bluebillywig.renderers.length;n++)if(window.bluebillywig.renderers[n]._id===i){r=window.bluebillywig.renderers[n];break}r?r.bootstrap(t,e):v("".concat(O,": Couldn't find a renderer with ").concat(i))}else v("".concat(O,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){e=V.replace("$RENDERER",e),e=L.install({url:e,loaded:!1,adUnitCode:t});try{e.setRender(N.outstreamRender)}catch(e){v("".concat(O,": Error tying to setRender on renderer"),e)}return e},outstreamRender:function(e){e.renderer.push(function(){N.bootstrapPlayer(e)})},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},X=[A,E,T],Y=0,H=!1,Q={},$={},U=["pubmatic"],Z=["all"];function q(e,t){if(!y(t))return t&&v(O+"Ignoring param key: "+e+", expects string-value, found "+b(t)),C;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map(function(e){return e.trim()}).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||C;case"yob":return parseInt(t)||C;default:return t}}function ee(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(r=e.params.adSlot,y(r)?r.replace(/^\s+/g,"").replace(/\s+$/g,""):(r&&v(s+": adSlot must be a string. Ignoring adSlot"),""));var t=(r=e.params.adSlot).split(":"),r=t[0];if(2==t.length&&(e.params.adUnitIndex=t[1]),t=r.split("@"),e.params.adUnit=t[0],1<t.length)2!=(t=t[1].split("x")).length?v(O+"AdSlot Error: adSlot not in required format"):(e.params.width=parseInt(t[0],10),e.params.height=parseInt(t[1],10));else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(A)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,n=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&n.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=n,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function te(e){var t,r,i=f(x(e.mediaTypes,"video"),e.params.video);if(i!==C){for(var n in t={},r=e.adUnitCode,x(i,"placement")||v(K+" for "+r),c)i.hasOwnProperty(n)&&(t[n]=function(e,t,r){var i,e="Ignoring param key: "+e+", expects "+r+", found "+b(t);switch(r){case d.BOOLEAN:i=p;break;case d.NUMBER:i=o;break;case d.STRING:i=y;break;case d.ARRAY:i=_}return i(t)?t:(v(O+e),C)}(n,i[n],c[n]));_(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):o(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=C,v(O+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function re(e,t,r){var i=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,n="";if(void 0!==i&&""!==i&&i.hasOwnProperty("segments")){var o=i.segments.length;n+="jw-id="+i.content.id;for(var a=0;a<o;a++)n+="|jw-"+i.segments[a]+"=1";r?void 0===e.dctr||0==e.dctr.length?e.dctr=n:e.dctr+="|"+n:(t=e.ext)&&void 0===t.key_val?t.key_val=n:t.key_val+="|"+n}}function ie(e){var t,r,i,n,o,a,s,d,c={},u={},p=e.hasOwnProperty("sizes")?e.sizes:[],l="",g=[],c={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:q("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:q("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?q("currency",e.params.currency):"USD"};if(i=c,(n=e).params.deals&&(_(n.params.deals)?n.params.deals.forEach(function(e){y(e)&&3<e.length?(i.pmp||(i.pmp={private_auction:0,deals:[]}),i.pmp.deals.push({id:e})):v(O+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+e)}):v(O+"Error: bid.params.deals should be an array of strings.")),n=c,a="",(o=e).params.dctr&&(a=o.params.dctr,y(a)&&0<a.length?(o=a.split("|"),a="",o.forEach(function(e){a+=0<e.length?e.trim()+"|":""}),o=a.length,"|"===a.substring(o,o-1)&&(a=a.substring(0,o-1)),n.ext.key_val=a.trim()):v(O+"Ignoring param : dctr with value : "+a+", expects string-value, found empty or non-string value")),re(c,e),e.hasOwnProperty("mediaTypes"))for(l in e.mediaTypes)switch(l){case A:(t=function(e){var t,r=e.mediaTypes.banner.sizes,i=[];if(r!==C&&_(r)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===r.length)return t=C,v(O+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(r[0][0],10),t.h=parseInt(r[0][1],10),r=r.splice(1,r.length-1)}0<r.length&&(i=[],r.forEach(function(e){1<e.length&&i.push({w:e[0],h:e[1]})}),0<i.length&&(t.format=i)),t.pos=0,t.topframe=w()?0:1}else v(O+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=C;return t}(e))!==C&&(c.banner=t);break;case T:u.request=JSON.stringify(function(e){var t,r,i,n={assets:[]};for(t in e){if(e.hasOwnProperty(t)){var o={};if(!(n.assets&&0<n.assets.length&&n.assets.hasOwnProperty(t)))switch(t){case B.TITLE.KEY:e[t].len||e[t].length?o={id:B.TITLE.ID,required:e[t].required?1:0,title:{len:e[t].len||e[t].length,ext:e[t].ext}}:v(O+"Error: Title Length is required for native ad: "+JSON.stringify(e));break;case B.IMAGE.KEY:o={id:B.IMAGE.ID,required:e[t].required?1:0,img:{type:D.IMAGE,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:C),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:C),wmin:e[t].wmin||e[t].minimumWidth||(e[t].minsizes?e[t].minsizes[0]:C),hmin:e[t].hmin||e[t].minimumHeight||(e[t].minsizes?e[t].minsizes[1]:C),mimes:e[t].mimes,ext:e[t].ext}};break;case B.ICON.KEY:o={id:B.ICON.ID,required:e[t].required?1:0,img:{type:D.ICON,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:C),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:C)}};break;case B.VIDEO.KEY:o={id:B.VIDEO.ID,required:e[t].required?1:0,video:{minduration:e[t].minduration,maxduration:e[t].maxduration,protocols:e[t].protocols,mimes:e[t].mimes,ext:e[t].ext}};break;case B.EXT.KEY:o={id:B.EXT.ID,required:e[t].required?1:0};break;case B.LOGO.KEY:o={id:B.LOGO.ID,required:e[t].required?1:0,img:{type:D.LOGO,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:C),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:C)}};break;case B.SPONSOREDBY.KEY:case B.BODY.KEY:case B.RATING.KEY:case B.LIKES.KEY:case B.DOWNLOADS.KEY:case B.PRICE.KEY:case B.SALEPRICE.KEY:case B.PHONE.KEY:case B.ADDRESS.KEY:case B.DESC2.KEY:case B.DISPLAYURL.KEY:case B.CTA.KEY:r=$[t],i=void 0,i=r.KEY,o={id:r.ID,required:e[i].required?1:0,data:{type:r.TYPE,len:e[i].len,ext:e[i].ext}}}}o&&o.id&&(n.assets[n.assets.length]=o)}var a=P.length,s=0;return P.forEach(function(e){for(var t=n.assets.length,r=0;r<t;r++)if(e.id==n.assets[r].id){s++;break}}),H=a!=s,n}(e.nativeParams)),H?v(O+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):c.native=u;break;case E:(r=te(e))!==C&&(c.video=r)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:w()?0:1},_(p)&&1<p.length&&((p=p.splice(1,p.length-1)).forEach(function(e){g.push({w:e[0],h:e[1]})}),t.format=g),c.banner=t;s=c,d=F({},x(e,"ortb2Imp.ext.data")),Object.keys(d).forEach(function(e){"pbadslot"===e?"string"==typeof d[e]&&d[e]&&I(s,"ext.data.pbadslot",d[e]):"adserver"===e?["name","adslot"].forEach(function(e){var t=x(d,"adserver.".concat(e));"string"==typeof t&&t&&(I(s,"ext.data.adserver.".concat(e.toLowerCase()),t),"adslot"===e&&I(s,"ext.dfp_ad_unit_code",t))}):I(s,"ext.data.".concat(e),d[e])});var m=c,f=e,h=-1;return"function"!=typeof f.getFloor||z.getConfig("pubmatic.disableFloors")||[A,E,T].forEach(function(r){var t;m.hasOwnProperty(r)&&(t=[],"banner"===r&&(m[r].w&&m[r].h&&t.push([m[r].w,m[r].h]),_(m[r].format)&&m[r].format.forEach(function(e){return t.push([e.w,e.h])})),0===t.length&&t.push("*"),t.forEach(function(e){var t=f.getFloor({currency:m.bidfloorcur,mediaType:r,size:e});S(O,"floor from floor module returned for mediatype:",r," and size:",e," is: currency",t.currency,"floor",t.floor),"object"!==b(t)||t.currency!==m.bidfloorcur||isNaN(parseInt(t.floor))||(e=parseFloat(t.floor),S(O,"floor from floor module:",e,"previous floor value",h,"Min:",Math.min(e,h)),h=-1===h?e:Math.min(e,h),S(O,"new floor value:",h))}))}),m.bidfloor&&(S(O,"floor from floor module:",h,"impObj.bidfloor",m.bidfloor,"Max:",Math.max(h,m.bidfloor)),h=Math.max(h,m.bidfloor)),m.bidfloor=!isNaN(h)&&0<h?h:C,S(O,"new impObj.bidfloor value:",m.bidfloor),c.hasOwnProperty(A)||c.hasOwnProperty(T)||c.hasOwnProperty(E)?c:C}function ne(e,t){0<(t=t.filter(function(e){return"string"==typeof e||(v(O+"acat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,r){return r.indexOf(e)===t})).length&&(v(O+"acat: Selected: ",t),e.ext.acat=t)}function oe(e){return!0===_(e)&&0<e.length}r(B,function(e){Q[e.ID]=e.KEY}),r(B,function(e){$[e.KEY]=e});r={code:s,gvlid:76,supportedMediaTypes:[A,E,T],isBidRequestValid:function(e){if(e&&e.params){if(!y(e.params.publisherId))return v(O+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(E)){var t=x(e.mediaTypes,"video.mimes"),r=x(e,"params.video.mimes");if(!1===oe(t)&&!1===oe(r))return v(O+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[E].hasOwnProperty("context"))return a("".concat(O,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[E].context&&!y(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[E].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(A)||e.mediaTypes.hasOwnProperty(T)?(delete e.mediaTypes[E],v("".concat(O,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(a("".concat(O,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){e=G(e),t&&t.refererInfo&&(r=t.refererInfo);var r,i,n,o,a,s={pageURL:(null==(a=r)?void 0:a.page)||window.location.href,refURL:(null==a?void 0:a.ref)||window.document.referrer},d=(a=s,{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:a.pageURL,ref:a.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}),c="",u=[],p=[],l=[];if(e.forEach(function(e){(i=W(e)).params.adSlot=i.params.adSlot||"",ee(i),i.mediaTypes&&i.mediaTypes.hasOwnProperty("video")||i.params.hasOwnProperty("video")||i.hasOwnProperty("mediaTypes")&&i.mediaTypes.hasOwnProperty(T)||0!==i.params.width||0!==i.params.height?(s.pubId=s.pubId||i.params.publisherId,(s=function(e,t){var r,i,n;for(r in t.kadpageurl||(t.kadpageurl=t.pageURL),R)R.hasOwnProperty(r)&&(i=e[r])&&("object"===b(n=R[r])&&(i=n.f(i,t)),y(i)?t[r]=i:v(O+"Ignoring param : "+r+" with value : "+R[r]+", expects string-value, found "+b(i)));return t}(i.params,s)).transactionId=i.transactionId,""===c?c=i.params.currency||C:i.params.hasOwnProperty("currency")&&c!==i.params.currency&&v(O+"Currency specifier ignored. Only one currency permitted."),i.params.currency=c,i.params.hasOwnProperty("dctr")&&y(i.params.dctr)&&u.push(i.params.dctr),i.params.hasOwnProperty("bcat")&&_(i.params.bcat)&&(p=p.concat(i.params.bcat)),i.params.hasOwnProperty("acat")&&_(i.params.acat)&&(l=l.concat(i.params.acat)),(e=ie(i))&&d.imp.push(e)):v(O+"Skipping the non-standard adslot: ",i.params.adSlot,JSON.stringify(i))}),0!=d.imp.length)return d.site.publisher.id=s.pubId.trim(),Y=s.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.profile=parseInt(s.profId)||C,d.ext.wrapper.version=parseInt(s.verId)||C,d.ext.wrapper.wiid=s.wiid||t.auctionId,d.ext.wrapper.wv="prebid_prebid_7.31.0",d.ext.wrapper.transactionId=s.transactionId,d.ext.wrapper.wp="pbjs",void 0!==(a=t?j.get(t.bidderCode,"allowAlternateBidderCodes"):void 0)&&(d.ext.marketplace={},t&&1==a&&(a=j.get(t.bidderCode,"allowedAlternateBidderCodes"),U=!_(a)||(a=a.map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e}).filter(h)).includes("*")?Z:[].concat(g(U),g(a))),d.ext.marketplace.allowedbidders=U.filter(h)),d.user.gender=s.gender?s.gender.trim():C,d.user.geo={},d.user.geo.lat=q("lat",s.lat),d.user.geo.lon=q("lon",s.lon),d.user.yob=q("yob",s.yob),d.device.geo=d.user.geo,d.site.page=s.kadpageurl.trim()||d.site.page.trim(),d.site.domain=(a=d.site.page,(n=document.createElement("a")).href=a,n.hostname),"object"===b(z.getConfig("content"))&&(d.site.content=z.getConfig("content")),"object"===b(z.getConfig("device"))&&(d.device=m.utils.assign(d.device,z.getConfig("device"))),d.device.language=d.device.language&&d.device.language.split("-")[0],I(d,"source.tid",s.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(d.test=1),e[0].schain&&I(d,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(I(d,"user.ext.consent",t.gdprConsent.consentString),I(d,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&I(d,"regs.ext.us_privacy",t.uspConsent),!0===z.getConfig("coppa")&&I(d,"regs.coppa",1),a=d,n=x(n=e,"0.userIdAsEids"),_(n)&&0<n.length&&I(a,"user.eids",n),(e=t&&t.ortb2||{}).site&&(n=(a=d.site).page,o=a.domain,a=a.ref,f(d,{site:e.site}),d.site.page=n,d.site.domain=o,d.site.ref=a),e.user&&f(d,{user:e.user}),e.bcat&&(p=p.concat(e.bcat)),null!=(n=e.ext)&&null!=(o=n.prebid)&&null!=(a=o.bidderparams)&&null!=(n=a[t.bidderCode])&&n.acat?(o=e.ext.prebid.bidderparams[t.bidderCode].acat,ne(d,o)):l.length&&ne(d,l),a=d,0<(n=(n=p).filter(function(e){return"string"==typeof e||(v(O+"bcat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,r){if(3<e.length)return r.indexOf(e)===t;v(O+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)})).length&&(v(O+"bcat: Selected: ",n),a.bcat=n),null!=t&&t.timeout?d.tmax=t.timeout||z.getConfig("bidderTimeout"):d.tmax=null==(e=window)||null==(o=e.PWT)||null==(a=o.versionDetails)?void 0:a.timeout,d.ext.epoch=(new Date).getTime(),"object"===b(z.getConfig("app"))&&(d.app=z.getConfig("app"),d.app.publisher=d.site.publisher,d.app.ext=d.site.ext||C,"object"!==b(d.app.content)&&(d.app.content=d.site.content||C),delete d.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(d),bidderRequest:t}},interpretResponse:function(e,b){var t=[],r="USD",i=JSON.parse(b.data),n=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&_(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach(function(e){e.bid&&_(e.bid)&&e.bid.forEach(function(f){var h={requestId:f.impid,cpm:parseFloat((f.price||0).toFixed(2)),width:f.w,height:f.h,creativeId:f.crid||f.id,dealId:f.dealid,currency:r,netRevenue:!0,ttl:300,referrer:n,ad:f.adm,pm_seat:e.seat||null,pm_dspid:f.ext&&f.ext.dspid?f.ext.dspid:null,partnerImpId:f.id||""};i.imp&&0<i.imp.length&&i.imp.forEach(function(e){if(f.impid===e.id){var t=h;if((i=f).ext&&null!=i.ext.bidtype)t.mediaType=X[i.ext.bidtype];else{S(O+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var r,i=i.adm,n=new RegExp(/VAST\s+version/);if(0<=i.indexOf('span class="PubAPIAd"'))t.mediaType=A;else if(n.test(i))t.mediaType=E;else try{(r=JSON.parse(i.replace(/\\/g,"")))&&r.native&&(t.mediaType=T)}catch(e){v(O+"Error: Cannot parse native reponse for ad response: "+i)}}switch(h.mediaType){case A:break;case E:h.width=(f.hasOwnProperty("w")?f:e.video).w,h.height=(f.hasOwnProperty("h")?f:e.video).h,h.vastXml=f.adm;var o,a,s,d=h,c=b;if(c.bidderRequest&&c.bidderRequest.bids){for(var u=0;u<c.bidderRequest.bids.length;u++)c.bidderRequest.bids[u].bidId===d.requestId&&(o=c.bidderRequest.bids[u].params,a=c.bidderRequest.bids[u].mediaTypes[E].context,s=c.bidderRequest.bids[u].adUnitCode);a&&"outstream"===a&&o&&o.outstreamAU&&s&&(d.rendererCode=o.outstreamAU,d.renderer=N.newRenderer(d.rendererCode,s))}p=h,g=b,null!=(l=f)&&null!=(m=l.ext)&&m.prebiddealpriority&&(m=M(p.requestId,[g.bidderRequest]),(null==(g=x(m,"mediaTypes.video"))?void 0:g.context)==k&&(m=(null==l||null==(m=l.ext)||null==(m=m.video)?void 0:m.duration)||(null==g?void 0:g.maxduration),p.video={context:k,durationSeconds:m,dealTier:l.ext.prebiddealpriority}));break;case T:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return v(O+"Error: Cannot parse native reponse for ad response: "+t.adm)}if(r&&r.native&&r.native.assets&&0<r.native.assets.length){t.mediaType=T;for(var i=0,n=r.native.assets.length;i<n;i++)switch(r.native.assets[i].id){case B.TITLE.ID:t.native.title=r.native.assets[i].title&&r.native.assets[i].title.text;break;case B.IMAGE.ID:t.native.image={url:r.native.assets[i].img&&r.native.assets[i].img.url,height:r.native.assets[i].img&&r.native.assets[i].img.h,width:r.native.assets[i].img&&r.native.assets[i].img.w};break;case B.ICON.ID:t.native.icon={url:r.native.assets[i].img&&r.native.assets[i].img.url,height:r.native.assets[i].img&&r.native.assets[i].img.h,width:r.native.assets[i].img&&r.native.assets[i].img.w};break;case B.SPONSOREDBY.ID:case B.BODY.ID:case B.LIKES.ID:case B.DOWNLOADS.ID:case B.PRICE:case B.SALEPRICE.ID:case B.PHONE.ID:case B.ADDRESS.ID:case B.DESC2.ID:case B.CTA.ID:case B.RATING.ID:case B.DISPLAYURL.ID:t.native[Q[r.native.assets[i].id]]=r.native.assets[i].data&&r.native.assets[i].data.value}t.native.clickUrl=r.native.link&&r.native.link.url,t.native.clickTrackers=r.native.link&&r.native.link.clicktrackers||[],t.native.impressionTrackers=r.native.imptrackers||[],t.native.jstracker=r.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(f,h)}}var p,l,g,m}),f.ext&&f.ext.deal_channel&&(h.dealChannel=J[f.ext.deal_channel]||null),h.meta={},f.ext&&f.ext.dspid&&(h.meta.networkId=f.ext.dspid),f.ext&&f.ext.advid&&(h.meta.buyerId=f.ext.advid),f.adomain&&0<f.adomain.length&&(h.meta.advertiserDomains=f.adomain,h.meta.clickUrl=f.adomain[0]),e.ext&&e.ext.buyid&&(h.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),f.ext&&f.ext.marketplace&&(h.bidderCode=f.ext.marketplace),t.push(h)})}))}catch(e){a(e)}return t},getUserSyncs:function(e,t,r,i){var n=""+Y;return r&&(n=(n+="&gdpr="+(r.gdprApplies?1:0))+"&gdpr_consent="+encodeURIComponent(r.consentString||"")),i&&(n+="&us_privacy="+encodeURIComponent(i)),!0===z.getConfig("coppa")&&(n+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+n}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+n}]},transformBidParams:function(e,t,r,i){return re(e,r.bids[0],!0),l({publisherId:"string",adSlot:"string"},e)}};n.exports=e("../shim.js").wrap({spec:r,unitIDKey:"adSlot",floorKey:"kadfloor",floorStr:!0,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],10:[function(e,t,P){"use strict";function i(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=e("../shim.js").polyfills,r=g._each,o=g.convertTypes,m=g.deepAccess,f=g.deepSetValue,a=g.formatQS,h=g.isArray,s=g.isNumber,d=g.isStr,b=g.logError,v=g.logMessage,y=g.logWarn,_=g.mergeDeep,w=g.parseSizesInput,x=(g.registerBidder,g.config),I=g.BANNER,S=g.VIDEO,N=g.find,U=g.Renderer,q=g.getGlobal,A={},E=(x.getConfig("rubicon",function(e){_(A,e.rubicon)}),{1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160"}),T=(r(E,function(e,t){return E[e]=t}),{code:"rubicon",gvlid:52,supportedMediaTypes:[I,S],isBidRequestValid:function(e){if("object"!==l(e.params))return!1;for(var t=0,r=["accountId","siteId","zoneId"];t<r.length;t++)if(e.params[r[t]]=parseInt(e.params[r[t]]),isNaN(e.params[r[t]]))return b("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i,n,o,a,s=C(e,!0);return!!s&&("video"!==s||(i=e,n=!0,s=Object.prototype.toString.call([]),o=Object.prototype.toString.call(0),a={mimes:s,protocols:s,linearity:o,api:s},Object.keys(a).forEach(function(e){Object.prototype.toString.call(m(i,"mediaTypes.video."+e))!==a[e]&&(n=!1,b("Rubicon: mediaTypes.video."+e+" is required and must be of type: "+a[e]))}),n))},buildRequests:function(e,c){var n,t=e.filter(function(e){return"video"===C(e)}).map(function(e){e.startTime=(new Date).getTime();var t,r,i,n,o={id:e.transactionId,test:x.getConfig("debug")?1:0,cur:["USD"],source:{tid:e.transactionId},tmax:c.timeout,imp:[{exp:x.getConfig("s2sConfig.defaultTtl"),id:e.adUnitCode,secure:1,ext:u({},e.bidder,e.params),video:m(e,"mediaTypes.video")||{}}],ext:{prebid:{channel:{name:"pbjs",version:AdBridg.globals.version},cache:{vastxml:{returnCreative:!0===A.returnVast}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:(o=x).getConfig("customPriceBucket")&&o.getConfig("customPriceBucket").buckets}[o.getConfig("priceGranularity")]}},bidders:{rubicon:{integration:A.int_type||"pbjs"}}}}},a=("rubicon"!==e.bidder&&(o.ext.prebid.aliases=u({},e.bidder,"rubicon")),q().installedModules);if(!a||a.length&&-1===a.indexOf("rubiconAnalyticsAdapter")||f(o,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),"function"!=typeof e.getFloor||A.disableFloors)n=parseFloat(m(e,"params.floor"));else{try{t=e.getFloor({currency:"USD",mediaType:"video",size:z(e,"video")})}catch(e){b("Rubicon: getFloor threw an error: ",e)}n="object"!==l(t)||"USD"!==t.currency||isNaN(parseInt(t.floor))?void 0:parseFloat(t.floor)}isNaN(n)||(o.imp[0].bidfloor=n),"object"===l(e.floorData)&&(o.ext.prebid.floors={enabled:!1}),o.imp[0].ext[e.bidder].video.size_id=(a=e,t=parseInt(m(a,"params.video.size_id")),isNaN(t)?"outstream"===m(a,"mediaTypes.".concat(S,".context"))?203:201:t),i=e,n=c,(r=o)&&("object"===l(x.getConfig("app"))?r.app=x.getConfig("app"):r.site={page:k(i,n)},"object"===l(x.getConfig("device"))&&(r.device=x.getConfig("device")),i.params.video.language&&["site","device"].forEach(function(e){r[e]&&("site"===e?r[e].content=g.utils.assign({language:i.params.video.language},r[e].content):r[e]=g.utils.assign({language:i.params.video.language},r[e]))}));var a=o,s=e,a=("object"===l(a.imp[0].video)&&void 0===a.imp[0].video.skip&&(a.imp[0].video.skip=s.params.video.skip),"object"===l(a.imp[0].video)&&void 0===a.imp[0].video.skipafter&&(a.imp[0].video.skipafter=s.params.video.skipdelay),"object"===l(a.imp[0].video)&&void 0===a.imp[0].video.pos&&("atf"===s.params.position?a.imp[0].video.pos=1:"btf"===s.params.position&&(a.imp[0].video.pos=3)),s=z(s,"video"),a.imp[0].video.w=s[0],a.imp[0].video.h=s[1],c.gdprConsent&&("boolean"==typeof c.gdprConsent.gdprApplies&&(d=c.gdprConsent.gdprApplies?1:0),f(o,"regs.ext.gdpr",d),f(o,"user.ext.consent",c.gdprConsent.consentString)),c.uspConsent&&f(o,"regs.ext.us_privacy",c.uspConsent),m(c,"bids.0.userIdAsEids")),s=(a&&a.length&&f(o,"user.ext.eids",a),x.getConfig("user.id")),d=(s&&f(o,"user.id",s),!0===x.getConfig("coppa")&&f(o,"regs.coppa",1),e.schain&&R(e.schain)&&f(o,"source.ext.schain",e.schain),x.getConfig("multibid"));return d&&f(o,"ext.prebid.multibid",d.reduce(function(e,t){var r={};return Object.keys(t).forEach(function(e){r[e.toLowerCase()]=t[e]}),e.push(r),e},[])),j(e,S,o),f(o.imp[0],"ext.prebid.auctiontimestamp",c.auctionStart),o.ext.prebid.storedrequest=void 0,o.imp[0].ext.prebid.storedrequest=void 0,{method:"POST",url:"https://".concat(A.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:e}});return!0!==x.getConfig("rubicon.singleRequest")?t.concat(e.filter(function(e){return"banner"===C(e)}).map(function(e){var i=T.createSlotParams(e,c);return{method:"GET",url:"https://".concat(A.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:T.getOrderedParams(i).reduce(function(e,t){var r=i[t];return d(r)&&""!==r||s(r)?"".concat(e).concat(B(t,r),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})):(n=e.filter(function(e){return"banner"===C(e)}).reduce(function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e},{}),t.concat(Object.keys(n).reduce(function(t,e){var r,i;return r=n[e],i=10,r.map(function(e,t){return t%i==0?r.slice(t,t+i):null}).filter(function(e){return e}).forEach(function(e){var i=T.combineSlotUrlParams(e.map(function(e){return T.createSlotParams(e,c)}));t.push({method:"GET",url:"https://".concat(A.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:T.getOrderedParams(i).reduce(function(e,t){var r=i[t];return d(r)&&""!==r||s(r)?"".concat(e).concat(B(t,r),"&"):e},"")+"slots=".concat(e.length,"&rand=").concat(Math.random()),bidRequest:e})}),t},[])))},getOrderedParams:function(e){var t=/^tg_v/,r=/^tg_i/,i=/^eid_|^tpid_/,n=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter(function(e){return i.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(["tk_flint","x_source.tid","l_pb_bid_id","x_source.pchain","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return n.concat(Object.keys(e).filter(function(e){return-1===n.indexOf(e)}))},combineSlotUrlParams:function(n){var i,o;return 1===n.length?n[0]:(i=n.reduce(function(t,r,i){return Object.keys(r).forEach(function(e){t.hasOwnProperty(e)||(t[e]=new Array(n.length)),t[e].splice(i,1,r[e])}),t},{}),o=new RegExp("^([^;]*)(;\\1)+$"),Object.keys(i).forEach(function(e){var t=i[e].join(";"),r=t.match(o);i[e]=r?r[1]:t}),i)},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var r,i=e.params,n=z(e,"banner"),o=p(i.latLong||[],2),a=o[0],o=o[1],s={account_id:i.accountId,site_id:i.siteId,zone_id:i.zoneId,size_id:n[0],alt_size_ids:n.slice(1).join(",")||void 0,rp_floor:.01<=(i.floor=parseFloat(i.floor))?i.floor:void 0,rp_secure:"1",tk_flint:"".concat(A.int_type||"pbjs_lite","_v7.31.0"),"x_source.tid":e.transactionId,l_pb_bid_id:e.bidId,"x_source.pchain":i.pchain,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:i.userId,"p_geo.latitude":isNaN(parseFloat(a))?void 0:parseFloat(a).toFixed(4),"p_geo.longitude":isNaN(parseFloat(o))?void 0:parseFloat(o).toFixed(4),"tg_fl.eid":e.code,rf:k(e,t)};if("function"==typeof e.getFloor&&!A.disableFloors){try{r=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){b("Rubicon: getFloor threw an error: ",e)}s.rp_hard_floor="object"!==l(r)||"USD"!==r.currency||isNaN(parseInt(r.floor))?void 0:r.floor}n={1:"atf",3:"btf"}[m(e,"mediaTypes.banner.pos")]||"",s.p_pos="atf"===i.position||"btf"===i.position?i.position:n,a=x.getConfig("user.id");return a&&(s.ppuid=a),e.userIdAsEids&&e.userIdAsEids.forEach(function(t){try{var e;"adserver.org"===t.source?(s.tpid_tdid=t.uids[0].id,s["eid_adserver.org"]=t.uids[0].id):"liveintent.com"===t.source?(s["tpid_liveintent.com"]=t.uids[0].id,s["eid_liveintent.com"]=t.uids[0].id,t.ext&&Array.isArray(t.ext.segments)&&t.ext.segments.length&&(s["tg_v.LIseg"]=t.ext.segments.join(","))):"liveramp.com"===t.source?s.x_liverampidl=t.uids[0].id:"id5-sync.com"===t.source?s["eid_id5-sync.com"]="".concat(t.uids[0].id,"^").concat(t.uids[0].atype,"^").concat(t.uids[0].ext&&t.uids[0].ext.linkType||""):s["eid_".concat(t.source)]="".concat(t.uids[0].id,"^").concat(t.uids[0].atype||""),s.ppuid||(e=N(t.uids,function(e){return e.ext&&"ppuid"===e.ext.stype}))&&e.id&&(s.ppuid=e.id)}catch(e){y("Rubicon: error reading eid:",t,e)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(s.gdpr=Number(t.gdprConsent.gdprApplies)),s.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(s.us_privacy=encodeURIComponent(t.uspConsent)),s.rp_maxbids=t.bidLimit||1,j(e,I,s),!0===x.getConfig("coppa")&&(s.coppa=1),e.schain&&R(e.schain)&&(s.rp_schain=T.serializeSupplyChain(e.schain)),s},serializeSupplyChain:function(e){var t,r;return R(e)?(t=e.ver,r=e.complete,e=e.nodes,"".concat(t,",").concat(r,"!").concat(T.serializeSupplyChainNodes(e))):""},serializeSupplyChainNodes:function(e){var r=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return r.map(function(e){return encodeURIComponent(t[e]||"")}).join(",")}).join("!")},interpretResponse:function(s,e){var n,d,c,u=e.bidRequest;return(s=s.body)&&"object"===l(s)?s.seatbid?(e=m(s,"ext.errors.rubicon"),Array.isArray(e)&&0<e.length&&y("Rubicon: Error in video response"),n=[],s.seatbid.forEach(function(i){(i.bid||[]).forEach(function(e){var t={requestId:u.bidId,currency:s.cur||"USD",creativeId:e.crid,cpm:e.price||0,bidderCode:i.seat,ttl:300,netRevenue:!1!==A.netRevenue,width:e.w||m(u,"mediaTypes.video.w")||m(u,"params.video.playerWidth"),height:e.h||m(u,"mediaTypes.video.h")||m(u,"params.video.playerHeight")},r=(e.id&&(t.seatBidId=e.id),e.dealid&&(t.dealId=e.dealid),e.adomain&&f(t,"meta.advertiserDomains",Array.isArray(e.adomain)?e.adomain:[e.adomain]),m(e,"ext.bidder.rp.advid")&&f(t,"meta.advertiserId",e.ext.bidder.rp.advid),m(s,"ext.responsetimemillis.rubicon"));u&&r&&(u.serverResponseTimeMs=r),m(e,"ext.prebid.type")===S?(t.mediaType=S,f(t,"meta.mediaType",S),(r=m(e,"ext.prebid.targeting"))&&"object"===l(r)&&(t.adserverTargeting=r),e.ext.prebid.cache&&"object"===l(e.ext.prebid.cache.vastXml)&&e.ext.prebid.cache.vastXml.cacheId&&e.ext.prebid.cache.vastXml.url?(t.videoCacheKey=e.ext.prebid.cache.vastXml.cacheId,t.vastUrl=e.ext.prebid.cache.vastXml.url):r&&r.hb_uuid&&r.hb_cache_host&&r.hb_cache_path&&(t.videoCacheKey=r.hb_uuid,t.vastUrl="https://".concat(r.hb_cache_host).concat(r.hb_cache_path,"?uuid=").concat(r.hb_uuid)),e.adm&&(t.vastXml=e.adm),e.nurl&&(t.vastUrl=e.nurl),!t.vastUrl&&e.nurl&&(t.vastUrl=e.nurl),"outstream"===m(u,"mediaTypes.video.context").toLowerCase()&&(t.renderer=function(e){e=U.install({id:e.adId,url:A.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:A.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{e.setRender(F)}catch(e){y("Prebid Error calling setRender on renderer",e)}return e}(t))):y("Rubicon: video response received non-video media type"),n.push(t)})}),n):(e=s.ads,c=0,"object"!==l(u)||Array.isArray(u)||"video"!==C(u)||"object"!==l(e)||(e=e[u.adUnitCode]),!Array.isArray(e)||e.length<1?[]:e.reduce(function(e,t,r){var i,n,o,a;return t.impression_id&&d===t.impression_id?c++:d=t.impression_id,"ok"===t.status&&((i=Array.isArray(u)?u[r-c]:u)&&"object"===l(i)?(n={requestId:i.bidId,currency:"USD",creativeId:t.creative_id||"".concat(t.network||"","-").concat(t.advertiser||""),cpm:t.cpm||0,dealId:t.deal,ttl:300,netRevenue:!1!==A.netRevenue,rubicon:{advertiserId:t.advertiser,networkId:t.network},meta:{advertiserId:t.advertiser,networkId:t.network,mediaType:I}},t.creative_type&&(n.mediaType=t.creative_type),t.adomain&&(n.meta.advertiserDomains=Array.isArray(t.adomain)?t.adomain:[t.adomain]),t.creative_type===S?(n.width=i.params.video.playerWidth,n.height=i.params.video.playerHeight,n.vastUrl=t.creative_depot_url,n.impression_id=t.impression_id,n.videoCacheKey=t.impression_id):(n.ad=(o=t.script,a=t.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(a,"'>\n<script type='text/javascript'>").concat(o,"<\/script>\n</div>\n</body>\n</html>")),a=p(E[t.size_id].split("x").map(function(e){return Number(e)}),2),n.width=a[0],n.height=a[1]),n.rubiconTargeting=(Array.isArray(t.targeting)?t.targeting:[]).reduce(function(e,t){return e[t.key]=t.values[0],e},{rpfl_elemid:i.adUnitCode}),e.push(n)):b("Rubicon: bidRequest undefined at index position:".concat(r),u,s)),e},[]).sort(function(e,t){return(t.cpm||0)-(e.cpm||0)})):[]},getUserSyncs:function(e,t,r,i){if(!D&&e.iframeEnabled)return e={},r&&("boolean"==typeof r.gdprApplies&&(e.gdpr=Number(r.gdprApplies)),"string"==typeof r.consentString&&(e.gdpr_consent=r.consentString)),i&&(e.us_privacy=encodeURIComponent(i)),e=Object.keys(e).length?"?".concat(a(e)):"",D=!0,{type:"iframe",url:"https://".concat(A.syncHost||"eus",".rubiconproject.com/usync.html")+e}},transformBidParams:function(e,t){return o({accountId:"number",siteId:"number",zoneId:"number"},e)}});function k(e,t){t=e.params.referrer||t.refererInfo.page;return e.params.secure?t.replace(/^http:/i,"https:"):t}function F(e){var t,r=document.getElementById(e.adUnitCode),i=((t=(t=r).querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(t=(t=(t=r).querySelector("script[id^='sas_script']"))&&t.nextSibling)&&"iframe"===t.localName&&t.style.setProperty("display","none"),e.renderer.getConfig());e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:r,align:i.align||"center",position:i.position||"append"},closeButton:i.closeButton||!1,label:i.label||void 0,collapse:i.collapse||!0})})}function z(e,t){var n,r=e.params;return"video"===t?(t=[],r.video&&r.video.playerWidth&&r.video.playerHeight?t=[r.video.playerWidth,r.video.playerHeight]:Array.isArray(m(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?t=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&0<e.sizes.length&&Array.isArray(e.sizes[0])&&1<e.sizes[0].length&&(t=e.sizes[0]),t):(t=[],Array.isArray(r.sizes)?t=r.sizes:void 0!==m(e,"mediaTypes.banner.sizes")?t=O(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&0<e.sizes.length?t=O(e.sizes):y("Rubicon: no sizes are setup or found"),n=[15,2,9],t.sort(function(e,t){var r=n.indexOf(e),i=n.indexOf(t);return-1<r||-1<i?-1===r?1:-1===i?-1:r-i:e-t}))}function j(e,t,a){function r(e,t,r){var i,n,o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],e=(e=e,n=t,"data"===(i=r)&&Array.isArray(e)?e.filter(function(e){return e.segment&&m(e,"ext.segtax")&&s[n]&&-1!==s[n].indexOf(m(e,"ext.segtax"))}).map(function(e){e=e.segment.filter(function(e){return e.id}).reduce(function(e,t){return e.push(t.id),e},[]);if(0<e.length)return e.toString()}).toString():"object"===l(e)&&!Array.isArray(e)||void 0===e?void 0:(Array.isArray(e)?e.filter(function(e){if("object"!==l(e)&&void 0!==e)return e.toString();y("Rubicon: Filtered value: ",e,"for key",i,": Expected value to be string, integer, or an array of strings/ints")}):e).toString()),o=d[r]&&o?"".concat(d[r]):"data"===r?"".concat(d[t],"iab"):"".concat(d[t]).concat(r);a[o]=a[o]?a[o].concat(",",e):e}var i={user:{ext:{data:c({},e.params.visitor)}},site:{ext:{data:c({},e.params.inventory)}}},n=(e.params.keywords&&(i.site.keywords=h(e.params.keywords)?e.params.keywords.join(","):e.params.keywords),_({},e.ortb2||{},i)),i=m(e.ortb2Imp,"ext")||{},o=m(e.ortb2Imp,"ext.data")||{},e=m(e,"ortb2Imp.ext.gpid"),s={user:[4],site:[1,2,5,6]},d={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"};t===I?(["site","user"].forEach(function(t){Object.keys(n[t]).forEach(function(e){"site"===t&&"content"===e&&n[t][e].data?r(n[t][e].data,t,"data"):"ext"!==e?r(n[t][e],t,e):n[t][e].data&&Object.keys(n[t].ext.data).forEach(function(e){r(n[t].ext.data[e],t,e,!1)})})}),Object.keys(o).forEach(function(e){"adserver"!==e?r(o[e],"site",e):"gam"===o[e].name&&r(o[e].adslot,name,e)}),e&&(a.p_gpid=e),a["tg_i.pbadslot"]&&delete a["tg_i.dfp_ad_unit_code"]):(Object.keys(i).length&&_(a.imp[0].ext,i),e&&(a.imp[0].ext.gpid=e),_(a,n))}function O(e){return w(e).reduce(function(e,t){t=parseInt(E[t],10);return t&&e.push(t),e},[])}function C(e,t){var r,i,n,o,t=1<arguments.length&&void 0!==t&&t;if(i=void 0!==m(r=e,"mediaTypes.".concat(S)),n=void 0!==m(r,"mediaTypes.".concat(I)),o="object"!==l(m(r,"params.video")),(i=n&&o?!1:i)&&o&&f(r,"params.video",{}),i)if(-1===["outstream","instream"].indexOf(m(e,"mediaTypes.".concat(S,".context"))))t&&b("Rubicon: mediaTypes.video.context must be outstream or instream");else{if(!(z(e,"video").length<2))return t&&v("Rubicon: making video request for adUnit",e.adUnitCode),"video";t&&b("Rubicon: could not determine the playerSize of the video")}else{if(0!==z(e,"banner").length)return t&&v("Rubicon: making banner request for adUnit",e.adUnitCode),"banner";t&&b("Rubicon: could not determine the sizes for banner request")}}function R(e){var t=!1,r=["asi","sid","hp"];return e.nodes&&!(t=e.nodes.reduce(function(e,t){return e&&r.every(function(e){return t.hasOwnProperty(e)})},!0))&&b("Rubicon: required schain params missing"),t}function B(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var D=!1;t.exports=e("../shim.js").wrap({spec:T,unitIDKey:"zoneId",floorKey:"floor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],11:[function(e,t,r){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(i=r.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function c(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}var n=e("../shim.js").polyfills,u=n.deepAccess,p=n.generateUUID,l=n.inIframe,g=(n.registerBidder,n.config),a=n.BANNER,m=n.VIDEO,f=n.createEidsArray,h="sharethrough",b="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),v={getProtocol:function(){return window.location.protocol}},n={code:h,supportedMediaTypes:[m,a],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===h},buildRequests:function(e,t){var r=g.getConfig("bidderTimeout"),i=t.ortb2||{},a=v.getProtocol().indexOf("http")<0||-1<v.getProtocol().indexOf("https"),n={id:p(),at:1,cur:["USD"],tmax:r,site:c({domain:u(t,"refererInfo.domain",window.location.hostname),page:u(t,"refererInfo.page",window.location.href),ref:u(t,"refererInfo.ref")},i.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width},regs:{coppa:!0===g.getConfig("coppa")?1:0,ext:{}},source:{tid:t.auctionId,ext:{version:"7.31.0",str:"4.3.0",schain:e[0].schain}},bcat:u(t.ortb2,"bcat")||e[0].params.bcat||[],badv:u(t.ortb2,"badv")||e[0].params.badv||[],test:0};return n.user=y(i.user,{}),n.user.ext||(n.user.ext={}),n.user.ext.eids=f(u(e[0],"userId"))||[],t.gdprConsent&&(r=!0===t.gdprConsent.gdprApplies,n.regs.ext.gdpr=r?1:0,r&&(n.user.ext.consent=t.gdprConsent.consentString)),t.uspConsent&&(n.regs.ext.us_privacy=t.uspConsent),e.map(function(e){var t,r,i,n={ext:{}},o=u(e,"ortb2Imp.ext.tid"),o=(o&&(n.ext.tid=o),u(e,"ortb2Imp.ext.gpid",u(e,"ortb2Imp.ext.data.pbadslot"))),o=(o&&(n.ext.gpid=o),u(e,"mediaTypes.video"));return o?(r=640,i=360,o.playerSize&&o.playerSize[0]&&o.playerSize[1]&&(r=(t=d(o.playerSize,2))[0],i=t[1]),n.video={pos:y(o.pos,0),topframe:l()?0:1,skip:y(o.skip,0),linearity:y(o.linearity,1),minduration:y(o.minduration,5),maxduration:y(o.maxduration,60),playbackmethod:o.playbackmethod||[2],api:function(e){e=e.api;return e&&Array.isArray(e)&&0<e.length?e:[2]}(o),mimes:o.mimes||["video/mp4"],protocols:function(e){e=e.protocols;return e&&Array.isArray(e)&&0<e.length?e:[2,3,5,6,7,8]}(o),w:r,h:i,startdelay:y(o.startdelay,0),skipmin:y(o.skipmin,0),skipafter:y(o.skipafter,0),placement:"instream"===o.context?1:+u(o,"placement",4)},o.delivery&&(n.video.delivery=o.delivery),o.companiontype&&(n.video.companiontype=o.companiontype),o.companionad&&(n.video.companionad=o.companionad)):n.banner={pos:u(e,"mediaTypes.banner.pos",0),topframe:l()?0:1,format:e.sizes.map(function(e){return{w:+e[0],h:+e[1]}})},c({id:e.bidId,tagid:String(e.params.pkey),secure:a?1:0,bidfloor:function(e){var t=null;{var r;"function"!=typeof e.getFloor||"object"!==s(r=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map(function(e){return{w:e[0],h:e[1]}})}))||"USD"!==r.currency||isNaN(parseFloat(r.floor))||(t=parseFloat(r.floor))}return null!==t?t:e.params.floor}(e)},n)}).filter(function(e){return!!e}).map(function(e){return{method:"POST",url:b,data:c(c({},n),{},{imp:[e]})}})},interpretResponse:function(e,r){var i=e.body;return i&&i.seatbid&&0!==i.seatbid.length&&i.seatbid[0].bid&&0!==i.seatbid[0].bid.length?i.seatbid[0].bid.map(function(e){var t={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:r.data.imp[0].video?m:a,currency:i.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[]}};return t.mediaType===m&&(t.ttl=3600,t.vastXml=e.adm),t}):[]},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==u(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map(function(e){return{type:"image",url:e}}):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function y(e,t){return null==e?t:e}t.exports=e("../shim.js").wrap({spec:n,unitIDKey:"pkey",floorKey:!1,floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],12:[function(e,t,r){"use strict";var i=e("../shim.js").polyfills,u=i.deepAccess,p=i.deepClone,o=i.logError,n=i.isFn,a=i.isPlainObject,s=i.BANNER,d=i.VIDEO,l=i.config,g=i.createEidsArray,m=(i.registerBidder,{code:"smartadserver",gvlid:45,aliases:["smart"],supportedMediaTypes:[s,d],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){var r;return e&&e.nodes?(r=["asi","sid","hp","rid","name","domain"],"".concat(e.ver,",").concat(e.complete,"!")+e.nodes.map(function(t){return r.map(function(e){return t[e]?encodeURIComponent(t[e]):""}).join(",")}).join("!")):null},adaptBannerSizes:function(e){return e.map(function(e){return{w:e[0],h:e[1]}})},fillPayloadForVideoBidRequest:function(e,t,r){var i=t.playerSize[0];e.isVideo="instream"===t.context,e.mediaType=d,e.videoData={videoProtocol:this.getProtocolForVideoBidRequest(t,r),playerWidth:i[0],playerHeight:i[1],adBreak:this.getStartDelayForVideoBidRequest(t,r)}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(void 0!==t&&t.startDelay)return t.startDelay;if(void 0!==e){if(0==e.startdelay)return 1;if(-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 2},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e)}},buildRequests:function(e,a){var s=l.getConfig("currency.adServerCurrency"),d=u(a,"ortb2.user.data",l.getAnyConfig("ortb2.user.data")),c=u(a,"ortb2.site.content.data",l.getAnyConfig("ortb2.site.content.data"));return e.reduce(function(e,t){var r={siteid:t.params.siteId,pageid:t.params.pageId,formatid:t.params.formatId,currencyCode:s,bidfloor:t.params.bidfloor||m.getBidFloor(t,s),targeting:t.params.target&&""!==t.params.target?t.params.target:void 0,buid:t.params.buId&&""!==t.params.buId?t.params.buId:void 0,appname:t.params.appName&&""!==t.params.appName?t.params.appName:void 0,ckid:t.params.ckId||0,tagId:t.adUnitCode,pageDomain:a&&a.refererInfo&&a.refererInfo.page?a.refererInfo.page:void 0,transactionId:t.transactionId,timeout:l.getConfig("bidderTimeout"),bidId:t.bidId,prebidVersion:"7.31.0",schain:m.serializeSupplyChain(t.schain),sda:d,sdc:c},i=(a&&a.gdprConsent&&(r.addtl_consent=a.gdprConsent.addtlConsent,r.gdpr_consent=a.gdprConsent.consentString,r.gdpr=a.gdprConsent.gdprApplies),t&&t.userId&&(r.eids=g(t.userId)),a&&a.uspConsent&&(r.us_privacy=a.uspConsent),u(t,"mediaTypes.video")),n=u(t,"mediaTypes.banner"),o=i&&("instream"===i.context||"outstream"===i.context);return!o&&n?(r.sizes=m.adaptBannerSizes(n.sizes),e.push(m.createServerRequest(r,t.params.domain))):o&&!n?(m.fillPayloadForVideoBidRequest(r,i,t.params.video),e.push(m.createServerRequest(r,t.params.domain))):o&&n?(o=p(r),m.fillPayloadForVideoBidRequest(o,i,t.params.video),e.push(m.createServerRequest(o,t.params.domain)),r.sizes=m.adaptBannerSizes(n.sizes),e.push(m.createServerRequest(r,t.params.domain))):e.push({}),e},[])},interpretResponse:function(e,t){var r,i,n=[],e=e.body;try{e&&!e.isNoAd&&(e.ad||e.adUrl)&&(i={requestId:(r=JSON.parse(t.data)).bidId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.creativeId,dealId:e.dealId,currency:e.currency,netRevenue:e.isNetCpm,ttl:e.ttl,dspPixels:e.dspPixels,meta:{advertiserDomains:e.adomain||[]}},r.mediaType===d?(i.mediaType=d,i.vastUrl=e.adUrl,i.vastXml=e.ad,i.content=e.ad):(i.adUrl=e.adUrl,i.ad=e.ad),n.push(i))}catch(e){o("Error while parsing smart server response",e)}return n},getBidFloor:function(e,t){return n(e.getFloor)&&(e=e.getFloor({currency:t||"USD",mediaType:"*",size:"*"}),a(e)&&!isNaN(e.floor))?e.floor:0},getUserSyncs:function(e,t){var r=[];return e.iframeEnabled&&0<t.length&&null!=t[0].body.cSyncUrl?r.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&0<t.length&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach(function(e){r.push({type:"image",url:e})}),r}});t.exports=e("../shim.js").wrap({spec:m,unitIDKey:"pageId",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],13:[function(e,t,r){"use strict";function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function g(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}var i=e("../shim.js").polyfills,a=i._each,m=i.getBidIdParameter,f=i.isArray,s=i.getUniqueIdentifierStr,h=i.deepSetValue,b=i.logError,v=i.deepAccess,n=i.isInteger,y=i.logWarn,d=(i.registerBidder,i.ADPOD),c=i.BANNER,u=i.VIDEO,_=i.createEidsArray,w={mimes:function(e){return Array.isArray(e)&&0<e.length&&e.every(function(e){return"string"==typeof e})},minduration:function(e){return n(e)},maxduration:function(e){return n(e)},protocols:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=10})},w:function(e){return n(e)},h:function(e){return n(e)},startdelay:function(e){return n(e)},placement:function(e){return n(e)&&1<=e&&e<=5},linearity:function(e){return-1!==[1,2].indexOf(e)},skip:function(e){return-1!==[0,1].indexOf(e)},skipmin:function(e){return n(e)},skipafter:function(e){return n(e)},sequence:function(e){return n(e)},battr:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=17})},maxextended:function(e){return n(e)},minbitrate:function(e){return n(e)},maxbitrate:function(e){return n(e)},boxingallowed:function(e){return-1!==[0,1].indexOf(e)},playbackmethod:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=6})},playbackend:function(e){return-1!==[1,2,3].indexOf(e)},delivery:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=3})},pos:function(e){return n(e)&&1<=e&&e<=7},api:function(e){return Array.isArray(e)&&e.every(function(e){return 1<=e&&e<=6})}},p={context:function(e){return e!==d},mimes:w.mimes,minduration:w.minduration,maxduration:w.maxduration,protocols:w.protocols},i={code:"sovrn",supportedMediaTypes:[c,u],gvlid:13,isBidRequestValid:function(e){var t,r=null==e||null==(t=e.mediaTypes)?void 0:t.video;return!(!e.params.tagid||isNaN(parseFloat(e.params.tagid))||!isFinite(e.params.tagid)||r&&!Object.keys(p).every(function(e){return p[e](r[e])}))},buildRequests:function(e,t){try{var d,c,u,p,l=[],r=(a(e,function(e){!u&&e.userId&&(u=_(e.userId)).forEach(function(e){e.uids&&e.uids[0]&&"criteo.com"===e.source&&(p=e.uids[0].id)}),e.schain&&(c=c||e.schain),d=d||m("iv",e.params);var t,r,i,n,o,a=e.getFloor&&"function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.banner?"banner":"video",size:"*"}):{},a=(a.floor=a.floor||m("bidfloor",e.params),{adunitcode:e.adUnitCode,id:e.bidId,tagid:String(m("tagid",e.params)),bidfloor:a.floor}),s=(v(e,"mediaTypes.banner")&&(t=v(e,"mediaTypes.banner.sizes")||e.sizes,t=(t=(t=f(t)&&f(t[0])?t:[t]).filter(function(e){return f(e)})).map(function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}),a.banner={format:t,w:1,h:1}),v(e,"mediaTypes.video")&&(a.video=(r={},s=v(t=e,"sizes"),i=v(t,"mediaTypes.video",{}),t=v(t,"params.video",{}),n={},s?(s=Array.isArray(s[0])?s[0]:s,n.w=s[0],n.h=s[1]):Array.isArray(i.playerSize)&&(s=Array.isArray(i.playerSize[0])?i.playerSize[0]:i.playerSize,n.w=s[0],n.h=s[1]),o=g(g(g({},n),i),t),Object.keys(w).forEach(function(e){o.hasOwnProperty(e)&&(w[e](o[e])?r[e]=o[e]:y("The OpenRTB video param ".concat(e," has been skipped due to misformating. Please refer to OpenRTB 2.5 spec.")))}),r)),a.ext=m("ext",e.ortb2Imp)||void 0,m("segments",e.params));s&&(a.ext=a.ext||{},a.ext.deals=s.split(",").map(function(e){return e.trim()})),l.push(a)}),t.ortb2||{}),i=r.site||{},n=(i.page=t.refererInfo.page,i.domain=t.refererInfo.domain,{id:s(),imp:l,site:i,user:r.user||{}}),o=(c&&(n.source={ext:{schain:c}}),t.gdprConsent&&(h(n,"regs.ext.gdpr",+t.gdprConsent.gdprApplies),h(n,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&h(n,"regs.ext.us_privacy",t.uspConsent),u&&(h(n,"user.ext.eids",u),p&&h(n,"user.ext.prebid_criteoid",p)),"https://ap.lijit.com/rtb/bid?src=prebid_prebid_7.31.0");return d&&(o+="&iv=".concat(d)),{method:"POST",url:o,data:JSON.stringify(n),options:{contentType:"text/plain"}}}catch(e){b("Could not build bidrequest, error deatils:",e)}},interpretResponse:function(e){var e=e.body,t=e.id,e=e.seatbid;if(!t||!e||!Array.isArray(e))return[];try{return e.filter(function(e){return e}).map(function(e){return e.bid.map(function(e){var t={requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,mediaType:e.nurl?c:u,ttl:(null==(t=e.ext)?void 0:t.ttl)||90,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}};return e.nurl?t.ad=decodeURIComponent("".concat(e.adm,'<img src="').concat(e.nurl,'">')):t.vastXml=decodeURIComponent(e.adm),t})}).flat()}catch(e){return b("Could not interpret bidresponse, error details:",e),e}},getUserSyncs:function(e,t,r,i){try{var n,o,a=[];return t&&0!==t.length&&(e.iframeEnabled&&(n=t.filter(function(e){return v(e,"body.ext.iid")}).map(function(e){return e.body.ext.iid}),o=[],r&&r.gdprApplies&&"string"==typeof r.consentString&&o.push(["gdpr_consent",r.consentString]),i&&o.push(["us_privacy",i]),n[0]&&(o.push(["informer",n[0]]),a.push({type:"iframe",url:"https://ap.lijit.com/beacon?"+o.map(function(e){return e.join("=")}).join("&")}))),e.pixelEnabled&&t.filter(function(e){return v(e,"body.ext.sync.pixels")}).reduce(function(e,t){return e.concat(t.body.ext.sync.pixels)},[]).map(function(e){return e.url}).forEach(function(e){return a.push({type:"image",url:e})})),a}catch(e){return[]}}};t.exports=e("../shim.js").wrap({spec:i,unitIDKey:"tagid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],14:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function a(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var r;if(e)return"string"==typeof e?i(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var d=e("../shim.js").polyfills,c=d.tryAppendQueryString,u=d.logMessage,p=d.logError,l=d.isEmpty,g=d.isStr,m=d.isPlainObject,f=d.isArray,h=d.logWarn,b=d.BANNER,v=d.VIDEO,y=(d.registerBidder,d.config),_=d.getStorageManager,w="triplelift",x=!0,I=null,S=_({gvlid:28,bidderCode:w}),_={gvlid:28,code:w,supportedMediaTypes:[b,v],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var r,i="https://tlx.3lift.com/header/auction?",e=function(e,t){var r={},i=e[0].schain,t=function(e){var t={},r={},i={},e=e.ortb2||{},n=function(){var e=S.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return p("Triplelift: error parsing JSON: ",e),null}}(),o=d.utils.assign({},e.site),e=d.utils.assign({},e.user);if(n){e.data=e.data||[];try{e.data.push({name:"www.1plusx.com",ext:n})}catch(e){p("Triplelift: error adding 1plusX segments: ",e)}}k(r,o),k(i,e),l(r)||(t.context=r);l(i)||(t.user=i);return t}(t),e=(r.imp=e.map(function(e,t){t={id:t,tagid:e.params.inventoryCode,floor:function(e){var t=null;if("function"==typeof e.getFloor)try{var r=e.getFloor({currency:"USD",mediaType:A(e)?"video":"banner",size:"*"});"object"!==n(r)||"USD"!==r.currency||isNaN(parseFloat(r.floor))||(t=parseFloat(r.floor))}catch(e){p("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}(e)};return A(e)&&(t.video=function(e){e=a(a({},e.params.video),e.mediaTypes.video);try{e.w||(e.w=e.playerSize[0][0]),e.h||(e.h=e.playerSize[0][1])}catch(e){h("Video size not defined",e)}"instream"===e.context&&(e.placement=1);"outstream"===e.context&&(e.placement?-1===[3,4,5].indexOf(e.placement)&&(u("video.placement value of ".concat(e.placement," is invalid for outstream context. Setting placement to 3")),e.placement=3):e.placement=3);return delete e.playerSize,e}(e)),e.mediaTypes.banner&&!E(e)&&(t.banner={format:e.sizes.filter(O).map(function(e){return{w:e[0],h:e[1]}})}),l(e.ortb2Imp)||(t.fpd=function(e){var t={},r={};k(r,e.ext),l(r)||(t.context=r);return t}(e.ortb2Imp)),t}),[].concat(s(function(e){return z(e,"tdid","adserver.org","TDID")}([e[0]])),s(function(e){return z(e,"idl_env","liveramp.com","idl")}([e[0]])),s(function(e){return z(e,"criteoId","criteo.com","criteoId")}([e[0]])),s(function(e){return z(e,"pubcid","pubcid.org","pubcid")}([e[0]])),s(function(e){var r=["adserver.org","liveramp.com","criteo.com","pubcid.org"],i=[];e.userIdAsEids&&e.userIdAsEids.forEach(function(t){try{var e;-1===r.indexOf(t.source)&&(e=t.uids.map(function(e){return{id:e.id,ext:{rtiPartner:t.source}}}),i.push({source:t.source,uids:e}))}catch(e){h("Triplelift: Error attempting to add ".concat(t," to bid request"),e)}});return i}(e[0]))));0<e.length&&(r.user={ext:{eids:e}});e=function(e,t){var r={};l(e)||(r.schain=a({},e));l(t)||(r.fpd=a({},t));return r}(i,t);l(e)||(r.ext=e);return r}(e,t);return i=c(i,"lib","prebid"),i=c(i,"v","7.31.0"),t&&t.refererInfo&&(r=t.refererInfo.page,i=c(i,"referrer",r)),t&&t.timeout&&(i=c(i,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(x=t.gdprConsent.gdprApplies,i=c(i,"gdpr",x.toString())),void 0!==t.gdprConsent.consentString&&(I=t.gdprConsent.consentString,i=c(i,"cmp_cs",I))),t&&t.uspConsent&&(i=c(i,"us_privacy",t.uspConsent)),(i=!0===y.getConfig("coppa")?c(i,"coppa",!0):i).lastIndexOf("&")===i.length-1&&(i=i.substring(0,i.length-1)),u("tlCall request built: "+i),{method:"POST",url:i,data:e,bidderRequest:t}},interpretResponse:function(e,t){var s=t.bidderRequest;return(e.body.bids||[]).map(function(e){var t=s,r={},i=e.width||1,n=e.height||1,o=e.deal_id||"",a=e.crid||"",t=t.bids[e.imp_id];return 0!=e.cpm&&e.ad&&(r={requestId:t.bidId,cpm:e.cpm,width:i,height:n,netRevenue:!0,ad:e.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:e.tl_source,meta:{}},A(t)&&"video"===e.media_type&&(r.vastXml=e.ad,r.mediaType="video",r.ttl=3600),e.advertiser_name&&(r.meta.advertiserName=e.advertiser_name),e.adomain&&e.adomain.length&&(r.meta.advertiserDomains=e.adomain),e.tl_source&&"hdx"==e.tl_source&&(A(t)&&"video"===e.media_type?r.meta.mediaType="video":r.meta.mediaType="banner"),e.tl_source&&"tlx"==e.tl_source&&(r.meta.mediaType="native")),r})},getUserSyncs:function(e,t,r,i){var n,e=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(e)return n="https://eb2.3lift.com/sync?","image"===e&&(n=c(n,"px",1),n=c(n,"src","prebid")),null!==I&&(n=c(n,"gdpr",x),n=c(n,"cmp_cs",I)),[{type:e,url:n=i?c(n,"us_privacy",i):n}]}};function A(e){return T(e)&&(E(e)||T(e=e)&&"outstream"===e.mediaTypes.video.context.toLowerCase())}function E(e){return T(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function T(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function k(t,r){l(r)||Object.keys(r).forEach(function(e){null!=r[e]&&(t[e]=r[e])})}function z(e,t,r,i){return e.map((a=t,function(e){return e&&e.userId&&e.userId[a]})).filter(j(t)).map((n=r,o=i,function(e){return{source:n,uids:[{id:e.id||e,ext:{rtiPartner:o}}]}}));var n,o,a}function j(i){return function(e,t,r){e=!!e&&(g(e)?!!e:m(e)&&!f(e)&&!l(e)&&e.id&&g(e.id)&&!!e.id);return e||void 0===r[0]||h("Triplelift: invalid ".concat(i," userId format")),e}}function O(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.exports=e("../shim.js").wrap({spec:_,unitIDKey:"inventoryCode",floorKey:"floor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],15:[function(e,t,r){"use strict";function o(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function a(i){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,r;t=i,r=n[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))})}return i}var i=e("../shim.js").polyfills,s=(i.registerBidder,i.BANNER),d=i.VIDEO,c=i.deepAccess,n=i.isFn,u=i.isStr,p=i.isNumber,l=i.isArray,g=i.isEmpty,m=i.isPlainObject,f=i.generateUUID,h=i.logInfo,b=i.logWarn,v=i.config,y=i.Renderer,_=i.hasPurpose1Consent,w=300,x="USD",I=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxrtb.com","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"];function S(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function A(e){return l(e)&&2===e.length&&!l(e[0])?[S(e)]:e.map(S)}function E(e){var t;return c(e,"params.pubId")?t=!0:c(e,"params.dcn")&&c(e,"params.pos")&&(t=!1),t}function T(){var e=v.getConfig("yahoossp.mode");return void 0===(e=e?e.toLowerCase():void 0)||e===s?s:e===d?d:"all"===e?"*":void 0}function k(e){var t=T(),t={currency:c(e,"params.bidOverride.cur")||x,mediaType:t,size:"*"};return!!n(e.getFloor)&&e.getFloor(t)}function z(e,t,r,i){var n,o=a({},i);for(n in r)switch(e){case"string":-1!==t.indexOf(n)&&u(r[n])&&(o[n]=r[n]);break;case"number":-1!==t.indexOf(n)&&p(r[n])&&(o[n]=r[n]);break;case"array":-1!==t.indexOf(n)&&l(r[n])&&(o[n]=r[n]);break;case"object":-1!==t.indexOf(n)&&m(r[n])&&(o[n]=r[n]);break;case"objectAllKeys":m(r)&&(o[n]=r[n])}return o}function j(e){return p(e)&&0<e&&e<3600?e:w}function O(e){return u(e)&&0<e.length}function C(e,t){var r;if(e)return r={id:f(),cur:[k(e).currency||c(t,"params.bidOverride.cur")||x],imp:[],site:{page:c(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:c(t,"params.bidOverride.device.ip")||c(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent||"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0}},source:{ext:{hb:1,adapterver:"1.0.2",prebidver:"7.31.0",integration:{name:"prebid.js",ver:"7.31.0"}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:l(c(r=t,"userIdAsEids"))?r.userIdAsEids.filter(function(e){return-1!==I.indexOf(e.source)}):[]}}},!0===E(t)?(r.site.publisher={id:t.params.pubId},(c(t,"params.bidOverride.site.id")||c(t,"params.siteId"))&&(r.site.id=c(t,"params.bidOverride.site.id")||t.params.siteId)):r.site.id=t.params.dcn,e.ortb2&&(r=function(r,e){var e=e.ortb2,t=c(e,"site")||void 0,i=c(t,"content")||void 0,n=c(t,"content.data")||void 0,o=c(e,"app.content")||void 0,a=c(e,"app.content.data")||void 0,e=c(e,"user")||void 0;t&&m(t)&&(r.site=z("string",["name","domain","page","ref","keywords","search"],t,r.site),r.site=z("array",["cat","sectioncat","pagecat"],t,r.site),r.site=z("object",["ext"],t,r.site));i&&m(i)&&(r.site.content=z("string",["id","title","series","season","genre","contentrating","language"],i,r.site.content),r.site.content=z("number",["episode","prodq","context","livestream","len"],i,r.site.content),r.site.content=z("array",["cat"],i,r.site.content),r.site.content=z("object",["ext"],i,r.site.content),n&&l(n)&&n.every(function(e){var t=z("string",["id","name"],e,{});t=z("array",["segment"],e,t),t=z("object",["ext"],e,t),r.site.content.data=[],r.site.content.data.push(t)}));o&&m(o)&&a&&l(a)&&a.every(function(e){var t=z("string",["id","name"],e,{});t=z("array",["segment"],e,t),t=z("object",["ext"],e,t),r.app={content:{data:[]}},r.app.content.data.push(t)});e&&m(e)&&(r.user=z("string",["id","buyeruid","gender","keywords","customdata"],e,r.user),r.user=z("number",["yob"],e,r.user),r.user=z("array",["data"],e,r.user),r.user.ext=z("object",["ext"],e,r.user.ext));return r}(r,t)),e=c(t,"schain.nodes"),l(e)&&0<e.length&&(r.source.ext.schain=t.schain,r.source.ext.schain.nodes[0].rid=r.id),r}function R(e,t){var r=T();if(t&&e){var i,n={id:e.bidId,secure:c(e,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0,bidfloor:k(e).floor||c(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==r&&r!==s&&"*"!==r||(n.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:A(e.sizes)},e.mediaTypes.banner.pos&&(n.banner.pos=e.mediaTypes.banner.pos)),!e.mediaTypes.video||r!==d&&"*"!==r||(r=A(e.mediaTypes.video.playerSize),n.video={mimes:c(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:c(e,"params.bidOverride.imp.video.w")||r[0].w,h:c(e,"params.bidOverride.imp.video.h")||r[0].h,maxbitrate:c(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:c(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:c(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:c(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:c(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:c(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:c(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:c(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,linearity:c(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:c(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:c(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:c(e,"params.bidOverride.imp.video.rewarded")||void 0}),n.ext={dfp_ad_unit_code:e.adUnitCode},c(e,"params.kvp")&&m(e.params.kvp))for(var o in n.ext.kvs={},e.params.kvp)(u(e.params.kvp[o])||p(e.params.kvp[o])||l(e.params.kvp[o])&&((i=e.params.kvp[o]).every(function(e){return u(e)})||i.every(function(e){return p(e)})))&&(n.ext.kvs[o]=e.params.kvp[o]);c(e,"ortb2Imp.ext.data")&&m(e.ortb2Imp.ext.data)&&(n.ext.data=e.ortb2Imp.ext.data),c(e,"ortb2Imp.instl")&&p(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(n.instl=e.ortb2Imp.instl),!1===E(e)?(n.tagid=e.params.pos,n.ext.pos=e.params.pos):c(e,"params.placementId")&&(n.tagid=e.params.placementId),t.imp.push(n)}}function B(e){var t,r=e.payload,i=e.requestOptions,e=e.bidderRequest,n=E(e),o=v.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/bidRequest";return!0===n&&(o=v.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===c(e,"params.testing.e2etest")&&(h("yahoossp adapter e2etest mode is active"),!(i.withCredentials=!1)===n?r.site.id="1234567":(t=T(),r.site.id="8a969516017a7a396ec539d97f540011",r.imp.forEach(function(e){e.ext.e2eTestMode=!0,t===s?e.tagid="8a969978017a7aaabab4ab0bc01a0009":t===d?e.tagid="8a96958a017a7a57ac375d50c0c700cc":(b('yahoossp adapter e2etest mode does not support yahoossp.mode="all". \n Please specify either "banner" or "video"'),b("yahoossp adapter e2etest mode: Please make sure your adUnit matches the yahoossp.mode video or banner"))}))),{url:o,method:"POST",data:r,options:i,bidderRequest:e}}i={code:"yahoossp",gvlid:25,aliases:[],supportedMediaTypes:[s,d],isBidRequestValid:function(e){e=e.params;return!0===c(e,"testing.e2etest")||(!(!m(e)||!(O(e.pubId)||O(e.dcn)&&O(e.pos)))||(b("yahoossp bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1))},buildRequests:function(e,r){var i,t,n,o;if(!g(e)&&!g(r))return(i={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}}).withCredentials=_(r.gdprConsent),e=e,t=T(),n=[],t===s?n=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===s})}):t===d?n=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===d})}):"*"===t&&(n=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===s||e===d})})),t=n,!0===v.getConfig("yahoossp.singleRequestMode")?(o=C(r,t[0]),t.forEach(function(e){R(e,o)}),B({payload:o,requestOptions:i,bidderRequest:r})):t.map(function(e){var t=C(r,e);return R(e,t),B({payload:t,requestOptions:i,bidderRequest:e})});b('yahoossp Adapter: buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){t.data;var i=t.bidderRequest,n=[];return e.body&&Array.isArray(e.body.seatbid)&&e.body.seatbid.forEach(function(e){var t;try{t=e.bid[0]}catch(e){return n}var e=t.ext&&t.ext.encp?t.ext.encp:t.price,e={adId:c(t,"adId")?t.adId:t.impid||t.crid,adUnitCode:i.adUnitCode,requestId:t.impid,cpm:e,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||x,dealId:t.dealid||null,netRevenue:!0,ttl:(e=i,j(v.getConfig("yahoossp.ttl")||c(e,"params.ttl"))),meta:{advertiserDomains:t.adomain}},r=-1!==(r=(r=t).adm).indexOf("o2playerSettings")||-1!==r.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==r.indexOf("AdPlacement")?s:-1!==r.indexOf("VAST")?d:void 0;r===s?(e.mediaType=s,e.ad=t.adm,e.meta.mediaType=s):r===d&&(e.mediaType=d,e.meta.mediaType=d,e.vastXml=t.adm,t.nurl&&(e.vastUrl=t.nurl)),"outstream"!==c(i,"mediaTypes.video.context")||i.renderer||(e.renderer=function(t){var e=y.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:t.adUnitCode});try{e.setRender(function(e){setTimeout(function(){o2PlayerRender(e)},c(t,"params.testing.renderer.setTimeout")||700)})}catch(e){b("yahoossp renderer error: setRender() failed",e)}return e}(i)||void 0),n.push(e)}),n},getUserSyncs:function(e,t,r,i){var n,o,a,s,t=!g(t)&&t[0].body;return t&&t.ext&&t.ext.pixels?(n=e,e=t.ext.pixels,o=/\w*(?=\s)/,a=/src=("|')(.*?)\1/,s=[],(e=e&&e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi))&&e.forEach(function(e){var t=e.match(o)[0],e=e.match(a)[2];t&&e&&(t="img"===t.toLowerCase()?"image":"iframe",!n.iframeEnabled&&"iframe"==t||!n.pixelEnabled&&"image"==t||s.push({type:t,url:e}))}),s):[]}};t.exports=e("../shim.js").wrap({spec:i,unitIDKey:"placementId",floorKey:!1,floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":37}],16:[function(e,t,r){var o=e("./utils.js");t.exports=o.wrapAsync(function(r,i){var n,e=!1,t=r.method||(r.data?"POST":"GET");window.XMLHttpRequest?(n=new window.XMLHttpRequest).onreadystatechange=o.wrapAsync(function(){if(4===n.readyState){var e=n.status;if(200<=e&&e<300||304===e){if(r.rawProcessor)try{r.rawProcessor(n)}catch(e){o.err("AjaxRawProcFail",e)}if(r.parseResponseJson)try{var t=JSON.parse(n.responseText||"null");i(null,t,n)}catch(e){i({err:e,type:"parse"},"",n)}else i(null,n.responseText,n)}else i(0===e?{err:"",type:"timeout"}:{err:n.statusText,type:"status="+e},"",n)}}):(e=!0,(n=new window.XDomainRequest).onload=o.wrapAsync(function(){if(r.rawProcessor)try{r.rawProcessor(n)}catch(e){o.err("AjaxRawProcFail",e)}if(r.parseResponseJson)try{var e=JSON.parse(n.responseText||"null");i(null,e,n)}catch(e){i({err:e,type:"parse"},"",n)}else i(null,n.responseText,n)}),n.onerror=o.wrapAsync(function(e){i({err:e,type:"error"},"",n)}),n.ontimeout=o.wrapAsync(function(e){i({err:e,type:"timeout"},"",n)}),n.onprogress=function(){}),n.open(t,r.url),0!==r.max_ms&&(n.timeout=r.max_ms||3e3,o.logl("at","Ajax >",r.url,n.timeout)),e||(r.withCredentials&&(n.withCredentials=!0),o.each(r.headers,function(e,t){n.setRequestHeader(t,e)}),r.preflight&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type",r.contentType||"text/plain")),n.send("POST"===t&&r.data)})},{"./utils.js":39}],17:[function(e,r,d){function i(){for(var e="",t=0;t<10;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e}function s(e,t,r,i,n){x[e]||(x[e]=[]),x[e].push(n),I[e]=i,S[e]||(S[e]=setTimeout(function(){o(e,t)},r))}function o(e,t){var r,i;clearTimeout(S[e]),S[e]=!1,x[e]&&x[e].length&&(r=I[e],i=e===b?"1//"+x[e].length+r:"",i+=x[e].join(r),x[e]=[],A(e,t,i))}function n(e,t){return E(e)+"`"+E(t)}function a(e){var t=[];return f.each(e,function(e){e=e.split("x");2==e.length&&t.push(n(e[0],e[1]))}),t.join(".")}function l(e,i){var n="";return e.rawbid&&e.rawbid.meta&&(n=[],f.each(e.rawbid.meta,function(e,t){var r=O[String(t).toLowerCase()];r&&(f.isarr(e)||(e=[e]),f.each(e,function(e){n.push(r+i.id(e))}))}),n=n.join(".")),n}function c(e,t){var r,i,n,o,a,s,d,c,u=e._origin?t.id(e._origin.config.unit.unique_id):"",p=(u?(p=(f.dts()-e.ts)/1e3,p=0|Math.max(0,e.extras.ttl-p),u+="@"+f.b62(p)):u=f.b62(0|e.ms),[u]);return(e._bid_cpm||e.extras.dealid)&&(u=t.id(e.width+"x"+e.height),r=f.b62(e.extras.ttl),i=e.extras.cur?t.id(e.extras.cur):"",n=e.extras.nr?1:0,o=v[e.extras.mediaType]||0,a=e.extras.crid!==e.config.id?t.id(e.extras.crid):"",s=e.extras.dealid?t.id(e.extras.dealid):"",d=e.cpm,c=l(e,t),p=p.concat([u,r,i,n,o,a,s,d,c]),e._bid_cpm!=e.cpm&&(p.push(e._bid_cpm),p.push(e._min_cpm),e.blocked&&p.push(t.id(e.blocked)))),p.join(",")}function u(){this.reset()}function p(){var e,r,i;clearTimeout(g),g=!1,m?g=setTimeout(p,100):(e=B,B={},m=R,R=new u,r=[],i=0,f.each(e,function(e,t){t=t+":"+e.join(":");i+=t.length,r.push(t),3e3<i+m.length&&(A(13,3,r.join("&b=")+"&bi="+m.data.join(",")),r=[],i=0)}),i&&A(13,3,r.join("&b=")+"&bi="+m.data.join(",")),m=!1)}var g,m,f=e("./utils.js"),h=e("./config.js"),b=3,v={banner:1,native:2,video:3},y=i(),_="aX0",w=(d.id=[2,_,y].join(","),""),x=(h.afterConsent(function(e,t,r){try{w=(window.__tcfapi?"2":window.__cmp?"1":"0")+(window.__uspapi?"1":"0")+r,e&&(w+=".g"+(e.gdprApplies?"Y":"N")+(e.consentString||"")),t&&(w+=".u"+(t.version||0)+(t.uspString||""))}catch(e){f.err("ClogErr",e)}e&&e.gdprApplies||(_=(_=String((document.cookie.match(/_adb=([^;]+)/)||[""]).pop()))||"a2"+(new Date).getTime().toString(36)+i(),f.cw("_adb",_,365),d.id=[2,_,y].join(","))}),{}),I={},S={},A=(d.flushNow=function(){for(var e in x)o(e)},function(e,t,r){if(document.body){var i=d.id,n=x[b]&&x[b].length?(n=x[b].join("&e="),x[b]=[],n):"",o=f.vp(),a=f.url(),o=E(o.w)+"."+E(o.h)+"."+E(o.y)+"."+E(document.body.clientHeight)+"."+(a.is_top?1:0)+"."+(document.hidden?1:0),s="https://adspsp.com/pt/"+h.getId()+"/"+e+"/"+t+"/?a="+i+"&aa="+w+"&b="+r+"&e="+n+"&c="+encodeURIComponent(a.href)+"&d="+encodeURIComponent(a.referrer)+"&f="+f.pgts().join(".")+"&g="+f.perfts()+"&u=f59389ea:ldoy0c2a:39j&v="+o,i=T();for(i&&(s+="&m="+i),s=h.deca(s),f.each(k,function(e,t){f.isarr(e)||(e=[e]),f.each(e,function(e){s+="&"+t+"="+encodeURIComponent(e)})});z.length;)delete k[z.pop()];f.each(j,function(e,t){s+="&"+t+"="+encodeURIComponent(e)}),j={},s+=P(),f.mock()?f.logl("mock","bypass px",s):f.pixel(s,!0)}else setTimeout(function(){A(e,t,r)},50)}),E=function(e){return(parseInt(e,10)||0).toString(36)},t=[],T=(d.mod=function(e){-1===t.indexOf(e)&&t.push(e)},function(){return t.length?t.join(""):""}),k={},z=(d.meta=f.thread(function(e,t){k[e]=t}),[]),j=(d.metaqx=f.thread(function(e,t){-1==z.indexOf(e)&&z.push(e),k[e]?f.isarr(k[e])||(k[e]=[k[e]]):k[e]=[],k[e].push(t)}),{}),O=(d.ctr=f.thread(function(e,t){(t=void 0===t?1:t)&&(j[e]=(j[e]||0)+t)}),d.auctionConfigured=f.thread(function(e){var i=[],r=(e.eachUnit(function(e){var r=[],t=a(e.all_sizes);e.eachBidReqConf(function(e){var t=e.bidder_id+"@"+(t=e.bidder_unit_id,String(t).replace(/[^\d\w-]/,"")),e=a(e.all_sizes);r.push(t+"^"+e)}),i.push(e.id+"^"+t+":"+r.join(","))}),e.instancectr+"//"+i.length+"-"+i.join("_"));e.eachUnit(function(e){var t=C("auctionConfigured",e);r+="&bu="+[e.unique_id,encodeURIComponent(t.dom_id),encodeURIComponent(t.gpt_path)].join(",")}),A(1,2,r)}),{advertisername:"0",advertiserdomains:"1",adomain:"1",advertiserid:"2",buyerid:"3",networkid:"4",brandid:"5",brandname:"6",dspid:"7",primarycatid:"8"}),C=function(t,e){var r="",i="";try{r=e.get("dom_id").replace(/[:,]+/g,""),i=e.get("gpt_slot").getAdUnitPath().replace(/[:,]+/g,"")}catch(e){f.log(t,"failed to encode ids",e)}return{dom_id:r,gpt_path:i}},R=(u.prototype.reset=function(){this.ids={},this.data=[],this.length=0},u.prototype.id=function(e){var t;return e=String(e).replace(/,/,"_"),this.ids[e]||(t=encodeURIComponent(e),this.length+=t.length,this.ids[e]=f.b62(this.data.push(t)-1)),this.ids[e]},d.auctionCompleted=f.thread(function(t){var a=new u,r=[],i=0;t.eachUnit(function(n){var e=C("bidRendered",n),e=[a.id(t.instancectr),a.id(t.id),a.id(n.id),a.id(n.unique_id),a.id(e.dom_id),a.id(e.gpt_path)].join(","),o=[];n.eachBidReqConf(!1,function(e){var i=a.id(e.bidder_id)+","+a.id(e.bidder_unit_id);e.responses.length?f.each(e.responses,function(e){var t=n.getWinner()===e?1:"",r=i,e=c(e,a);e&&(r+=","+t+","+e),o.push(r)}):o.push(i)}),encoded_unit=e+":"+o.join(":"),i+=encoded_unit.length,r.push(encoded_unit),3e3<i+a.length&&(A(11,3,r.join("&b=")+"&bi="+a.data.join(",")),a.reset(),r=[],i=0)}),i&&A(11,3,r.join("&b=")+"&bi="+a.data.join(","))}),d.bidRendered=f.thread(function(e,t,r){var i=C("bidRendered",e.config.unit),n=[e.config.unit.auction.instancectr,e.config.unit.id],t=(n.push(e.config.bidder_id),n.push(e.config.bidder_unit_id),n.push(e.cpm),n.push(e.width),n.push(e.height),n.push(e.config.unit.unique_id),n.push(t),n.push(encodeURIComponent(i.dom_id)),n.push(encodeURIComponent(i.gpt_path)),new u),i=l(e,t),t=t.data,i=(i&&(e.extras.anfo=i,e.extras.anfd=t),JSON.stringify(e.extras));"{}"!=i&&n.push(encodeURIComponent(i));t=(r?5:1)+":"+n.join(",");h.libSettings().record_bidids&&(t+="&b=4:"+[e.config.unit.unique_id,e.config.unit.id,e.id].join(",")),s(12,2,100,"&b=",t)}),d.enhRendered=f.thread(function(e,t,r){e=[e,t,E(r.advertiserId),E(r.campaignId),E(r.creativeId),E(r.versionId)];s(12,1,100,"&b=","3:"+e.join(","))}),d.gptRendered=f.thread(function(e,t,r){var i=C("gptRendered",t);s(12,2,100,"&b=","2:"+[e.instancectr,t.id,E(r.advertiserId),E(r.campaignId),E(r.creativeId),r.isEmpty||"",E(r.lineItemId),r.size?n(r.size[0],r.size[1]):"",E(r.sourceAgnosticCreativeId),E(r.sourceAgnosticLineItemId),t.unique_id,encodeURIComponent(i.dom_id),encodeURIComponent(i.gpt_path)].join(","))}),d.gptViewed=f.thread(function(e,t,r){var i=C("gptViewed",t);s(15,2,100,"&b=","1:"+[e.instancectr,t.id,t.unique_id,encodeURIComponent(i.dom_id),encodeURIComponent(i.gpt_path)].join(","))}),new u),B={},D=(d.lateBid=f.thread(function(e){var t=C("lateBid",e.config.unit),t=[R.id(e.config.unit.auction.instancectr),R.id(e.config.unit.auction.id),R.id(e.config.unit.id),R.id(e.config.unit.unique_id),R.id(t.dom_id),R.id(t.gpt_path)].join(","),e=[R.id(e.config.bidder_id),R.id(e.config.bidder_unit_id),"",c(e,R)].join(",");B[t]||(B[t]=[]),B[t].push(e),g=g||setTimeout(p,500)}),f.onerr(function(){try{var t="";f.each(arguments,function(e){null!=e&&("object"==typeof e?e=e.stack?(e.message||"")+" "+e.stack:JSON.stringify(e):"string"!=typeof e&&"number"!=typeof e&&(e=e.toString?e.toString():String(e)),t+=" "+e)}),t=t.substr(0,300)+(300<t.length?"...":""),t="500.1:"+f.perfts()+":"+t,s(b,1,1e3,"&e=",t)}catch(e){f.isdebug()&&console.error("AdBridg error report failed: ",e)}}),d.rec=f.thread(function(e){s(17,1,500,"&b=",e)}),f.onrec(d.rec),{}),P=(d.sqz=f.thread(function(e,t,r,i,n){var o,a=t+"."+i;D[a]||(D[a]={qk:t,qd:i,s:!1,d:[]},t&&(D[a].s=new u)),!1===t?D[a].d.push(n):(f.isarr(r)||(r=[r]),o=[],f.each(r,function(e){o.push(D[a].s.id(e))}),o=o.join(","),D[a].d.push(o+":"+n)),s(18,1,e,"","")}),d.sq2=f.thread(function(e,t,r,i){var n=t+"."+r,t=(D[n]||(D[n]={qk:t,qd:r,s:new u,d:[]}),i(D[n].s));f.isarr(t)||(t=[t]),f.each(t,function(e){D[n].d.push(e)}),s(18,1,e,"","")}),function(){var e=D,r=(D={},x[18]=[],"");return f.each(e,function(t,e){t.qk&&(r+="&"+t.qk+"="+t.s.data.join(",")),f.each(t.d,function(e){r+="&"+t.qd+"="+e})}),r});d.init=f.thread(function(){s(19,1,100,"","")})},{"./config.js":19,"./utils.js":39}],18:[function(e,t,r){var b=e("./utils"),v=(e("./unit"),e("./analytics")),y=e("./modules"),_=e("./config"),i=0;t.exports=function(){this.instancectr=++i,this.id=b.genID("A"),this.uuid=b.genUUID(),this.ts=0,this.jsts=0,this.jstsend,this.max_ms,_.afterConsent(function(e,t){n=e,o=t}),this.ajax_ms=_.libSettings().ajax_ms,"function"==typeof this.ajax_ms&&(this.ajax_ms=this.ajax_ms());var n,o,d,a=this,s={},c=[],u=[],p=[],l=!1,g=[],m=!1,f=[],t=(this.addUnit=function(e){return u.push(e),p.push(e.alias),e.auction=a,e.eachBidder(function(e,t){!t.uspSupport&&o&&"Y"===o.uspString[2]||s[e]||(s[e]=t,.5<Math.random()?c.push(e):c.unshift(e))}),a.max_ms=a.max_ms?Math.min(a.max_ms,e.max_ms):e.max_ms,(!a.ajax_ms||a.ajax_ms<a.max_ms)&&(a.ajax_ms=a.max_ms+200),a},this.ctUnits=function(){return u.length},this.hasUnit=function(){return 0<u.length},this.eachUnit=function(e){b.each(u,e)},this.findUnit=function(e){for(var t=0;t<u.length;++t)if(e(u[t]))return u[t];return!1},this.eachBidRequest=function(e,r){"function"==typeof e&&(r=e,e=!1),this.eachUnit(function(t){t.eachBidReqConf(e,function(e){r(t,e)})})},this.getUnitByBidReqId=function(t){var r=!1;return a.eachUnit(function(e){e.getBidReqConf(t)&&(r=e)}),r},this.getBidRequest=function(t){var r=!1;return a.eachUnit(function(e){r=r||e.getBidReqConf(t)}),r},this.getBid=function(e){for(var t=0;t<u.length;++t){var r=u[t].getBid(e);if(r)return r}return!1},this.markBidEmpty=function(e){var t=a.getUnitByBidReqId(e);t?t.addEmptyBid(e):b.err("Cannot mark bid empty: unknown id",e)},this.markBidderEmpty=function(t){a.eachUnit(function(e){e.markEmpty(t)})},this.isDone=function(){return l},this.lock=function(e){-1==g.indexOf(e)&&(b.log("Auction ",a.id," locked: ",e),g.push(e))},this.unlock=b.wrapAsync(function(e){var t=g.indexOf(e);-1==t?b.log("Auction ",a.id," lock not found: ",e):(g.splice(t,1),b.log("Auction ",a.id," unlocked: ",e,g),!g.length&&m&&m())}),this.onHalt=function(e){f.push(e)},this.execute=function(e){a.ts=b.dts(),a.jsts=(new Date).getTime();var t=_.libSettings().fbo,r=("function"==typeof t&&(c=t(s)),d="started",y.trigger("auction.before_bids",a),b.log("Auction",a.id,"starting with",u.length,"units:",p,"/ bidders:",c,"/ timeout:",a.max_ms),d="inProgress",v.auctionConfigured(a),y.trigger("auction.start",a),b.wrapAsync(function(){l||(l=!0,y.trigger("auction.bidding_done",a),a.eachUnit(function(e){e.halt()}),d="completed",a.jstsend=(new Date).getTime(),v.auctionCompleted(a),y.trigger("auction.complete",a),b.each(f,function(e){b.thread(e)()}),e(a))})),i=b.wrapAsync(function(){g.length?(b.log("Auction ",a.id,"waiting on locks",g),m=r):r()}),n=0;a.eachUnit(function(e){e.onReady(b.wrapAsync(function(){l||++n>=u.length&&(b.log("Auction ",a.id," received bids for ",n," / ",u.length," units. Duration: ",b.dts()-a.ts,"ms"),i())}))}),b.each(c,function(e){var t=s[e];b.thread(function(){t.execute(a)})()}),setTimeout(function(){l||(b.log("Auction ",a.id," timing out with ",n," / ",u.length," units completed. Duration: ",b.dts()-a.ts,"ms"),i())},a.max_ms)},[]),h={};this.getBdrReqId=function(e){return t[e]||(t[e]=b.genID("R")),t[e]},this.toPrebidBidderReq=function(e){var r,t,i;return h[e]||(s[e],r=[],this.eachBidRequest(e,function(e,t){r.push(t.toPrebid())}),b.url(),b.url().href,(t=b.urlref()).ref=t.ref||null,i=_.ortb2(e),h[e]={auctionId:this.uuid,auctionStart:this.jsts,bidderCode:e,bidderRequestId:this.getBdrReqId(e),bids:r,gdprConsent:n,uspConsent:(o||{}).uspString,timeout:this.max_ms,ortb2:i,refererInfo:t}),h[e]},this.toPrebidBidderReqs=function(){var r=[];return b.each(s,function(e,t){r.push(this.toPrebidBidderReq(t))}.bind(this)),r},this.toPrebid=function(){var e=this.toPrebidBidderReqs(),r=[],i=[],n=[],o=[],a=[],s=[];return this.eachUnit(function(e){var t=e.toPrebidAdUnit(),t=(r.push(t),i.push(t.code),e.toPrebidResults());n=n.concat(t.noBids),o=o.concat(t.bidsReceived),a=a.concat(t.winningBids),s=s.concat(t.prebidWinningBids)}),s.length||(s=void 0),{auctionId:this.uuid,timestamp:this.jsts,auctionEnd:this.jstsend,auctionStatus:d,adUnits:r,adUnitCodes:i,labels:void 0,bidderRequests:e,noBids:n,bidsReceived:o,bidsRejected:[],winningBids:a,timeout:this.max_ms,prebidWinningBids:s}}}},{"./analytics":17,"./config":19,"./modules":23,"./unit":38,"./utils":39}],19:[function(g,e,p){function m(e,t,r){var i=t.mapping_rules;if(!i)return I.log("NO MAPPING RULES: ",t),0;var n,o=e.get("gpt_slot"),a=o.getAdUnitPath(),s=e.get("gpt_sizes"),d=e.get("dom_id"),c=e.get("dom_ad_class");for(n in i){if(!i.hasOwnProperty(n))return;var u=i[n],p=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if("vp.max_width"==n&&u<p)return;if("vp.min_width"==n&&p<u)return;if("lib"==n.substr(0,3)){p=r[n.substr(4)];if(("function"==typeof p&&p(o,a,s,d))!=u)return}if("gpt.adunit"==n&&u!=a)return;if("gpt.adunit_regex"==n&&!new RegExp(u,"i").test(a))return;if("gpt.domid"==n&&u!=d)return;if("gpt.domid_regex"==n&&!new RegExp(u,"i").test(d))return;if("gpt.has_size"==n&&!s.match(u))return;if("gpt.no_size"==n&&s.match(u))return;if("adb.ad_class"==n&&u!=c)return;if("adb.ad_class_regex"==n&&!new RegExp(u,"i").test(c))return}return I.log("Unit mapped: ",d,"->",t.alias),1}function f(e,t){return{id:t[0],alias:t[1],size:t[2],other_sizes:t[3]||[],min_cpm:t[4],max_ms:t[5],settings:t[6]||{},rule_order:t[7],mapping_rules:t[8],bid_req_confs:t[9]}}function t(r,i,n){p.afterConsent(function(e){if(e&&e.gdprApplies&&!e.consentString)return I.log("GDPR skip register",r,e);var t;b[r]?I.err("Duplicate bidder alias "+r):(t={bidder_id:n[0],settings:n[1]||{},mutate:n[2]||!1},b[r]=new i(r,t.bidder_id,t.settings,e,o),b[r].alias=r,b[r].id=t.bidder_id,b[r].settings=t.settings,b[r].mutate=t.mutate||!1,v[String(t.bidder_id)]=r)})}var l,I=g("./utils"),h=(g("./ajax"),{c:5781260,s:{bid_strategy:".05:.05-7.5,.5:8-20,1:21-40,2:42-50",block_invisible:function(e,t,r){return!(!I.url().domain.match("genealogy")||!(AdBridg.global("adb_vs")&&I.vp().w<=800||I.vp().w<=767))||!!r.match(/anc.*display_none/)},lazy:function(e,t,r){return!(t&&t.getAdUnitPath&&t.getAdUnitPath()||"").match("fg_728x90_search")&&400},initfn:function(){I.qs("adb_vs")&&AdBridg.global("adb_vs",1),window.aax=window.aax||{},window.aax.filterImpressions=function(){return!0},I.url().href.match("search")&&(I.log("Suppressing rate limiting errors for search 728x90"),I.wraperr(function(e){return!(e[2]&&e[2].message&&e[2].message.match("slot.defineSizeMapping"))&&e}));!I.url().domain.match("findagrave")||I.cr("email")||I.url().page.match("create|upload-spreadsheet|edit|memorial/merge|photo-request|transcribe|user/account|memorial/transfer-management|user/profile")||(I.log("FG adhesion conditions met"),AdBridg.global("enableAdhesion",!0),e="fgAdhesion");var e,t=AdBridg.global("adb_vs")&&I.vp().w<=800||I.vp().w<=768,r=(I.log("size is_mobile",t),I.url().domain.match("rootsweb"));AdBridg.cmd.push({action:"spa_pv_initialize",config:{sizePathNameLeaderboard:t?"320x50":"728x90",fameSpelling:t?"fame":"fam",hpPathBottom:t?"_bottom":"",rwgen_bottomSlotPath:r?"tgn.rootsweb.com/RW_728x90_btf":"tgn.genealogy.com/728x90_bottom",rwgen_bottomRightSlotPath:r?"tgn.rootsweb.com/RW_300x250":"tgn.genealogy.com/300x250_ROS",rwgen_rightSlotPath:r?"tgn.rootsweb.com/RW_160x600":"tgn.genealogy.com/160x600_ROS",rwgen_topSlotPath:r?"tgn.rootsweb.com/RW_728x90":"tgn.genealogy.com/728x90_ROS",adhesionGAMPath:e||""}})},dynamic_configuration:function(e,t,r){return I.qs("adb_run_insticator")&&(I.log("No auctions running for insticator test page"),r.get("gpt_slot").setTargeting("adb_imp",["inst"]),e.bid_req_confs=[]),e},gamconfig_viewport:function(e){return AdBridg.global("adb_vs")&&I.each(e.size_map,function(e){var t=e.viewport;!I.isarr(t)||2!=t.length||0==t[0]&&0==t[1]||(e.viewport=t=[800,0])}),e},gpt_exclusions:{Exclude_Any_AdBridg_Bid:.01,Exclude_HighValue_AdBridg_Bids:.5,Exclude_HighValue_Amazon_Bids:function(e){var t=(e.getTargeting("amznbid")||[""])[0];if(t&&"2"!==t){if(t=" "+parseInt(t,36)/8192+" ",!AdBridg.global("ancamhv")){for(var r="01234563272163812942286334a266635a361239a63337233633211262286345327663635a126694333aa23368361234b1261c46de36364a2228fg3337hi34566ie35a123jh1263ik233214527ed6lh66335472ie36364561hi31112fg61233lh32hm65a3nd4a2622me9433633612381263723363276633612622863332766363612612336327663812622863312666363612o63337233638126228633327663636126663337233636361238126126663636123863337233663361238126p233632766",i="wb,oM,8g,gw,48,co,x2,Fi,Ny,sU,kE,Jq,Ba,mI,ak,es,iA,24,6c,Lu,z6,uY,De,qQ,144,VO".split(","),n=" ",o=0,a=0;a<r.length;++a){var s=I.fb62(r[a]);n+=(o+=I.fb62(i[s]))+" "}AdBridg.global("ancamhv",n)}var d=!!AdBridg.global("ancamhv").match(t);return I.log("Ancestry amazon hv",t,d),d&&((t=e.getTargeting("adb_imp")).push("el_amzn_hv"),e.setTargeting("adb_imp",t)),!!d}}},dt:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"m":/tablet|ipad/i.test(e)?"t":"d"},x1m:function(e,t,r){return"d"!=t.dt()&&(e.api="onemobile",e.dcn="2c9d2b4f016363008abc08dc05de0176",e.bidder_unit_id=r),e},cmd_override:function(e){if("function"==typeof e)try{if(e.toString().match("beginAuction"))return I.log("AncGamConfigConversion - disable beginAuction"),!1}catch(e){I.err("AncPubOverrideFail",e)}return e},before_gpt:function(){I.log("Requiring GPT Sandbox SafeFrames"),googletag.pubads().setSafeFrameConfig({sandbox:!0}),(I.url().domain.match("findagrave")&&AdBridg.global("adb_vs")&&I.vp().w<=800||I.vp().w<=728)&&googletag.pubads().setCentering(!0)},track_imps:"1:1-12",max_imp_ctr:4,cmp:function(e,t){I.url().domain.match("findagrave|newspapers")&&t("iab"),t("geoblock")},ccpa:"geoblock,USCA",ccpa_signatory:"Y",pmmutatefn:function(e,t){return t.a=e.config.id,t.b=e.config.bidder_name,t.c=e.cpm,t.w=e.width,t.h=e.height,t.cfd="cdn.confiant-integrations.net",t.cfid="MDm0g4ZhT4ICKskqdVRvwPd9wTw",t},pubrenderfn:function(e,t,r,i,n,o,a){var s,d,c,u,p,l,g,m,f,h,b,v,y,_,w;return!a&&(s=e,d={size:o.width+"x"+o.height,bidder:o.config.bidder_name,ad:o.creative||o.creative_url,cpm:o.cpm,adId:o.config.id},a="cdn.confiant-integrations.net",e="MDm0g4ZhT4ICKskqdVRvwPd9wTw",o=function(e,t,r,i,n,o){I.err("Confiant block",e,t,r,i,n,o)},h=d.bidder,b=d.size,v=s.parentWindow||s.defaultView,y=v.JSON,_=v.btoa,w=v.encodeURIComponent,!(!y||!_)&&(c="script",u="src",p="replace",l="error",g="write",a="https://"+a+"/?wrapper="+w(e)+"&tpid=",h={wh:b=x(e+"/"+(h={k:{hb_bidder:[h],hb_size:[b]}}).k.hb_bidder[0]+":"+h.k.hb_size[0]),wd:y.parse(y.stringify(h)),wr:0},m=b,y=x(y.stringify(h)),f=function(){s[g](d.ad)},m=a+w(m)+"&d="+y,y="err__"+ +new Date,v[y]=f,s[g]("<"+c+" on"+l+'="void('+y+'())" '+u+'="'+m+'" type="text/java'+c+'" ></'+c+">"),f={prebid:{adId:d.adId,cpm:d.cpm}},y={d:h,t:d.ad,cb:o,id:f},v[e]={},v[e][b]=y,s.close(),!0));function x(e){return(_(e)||"")[p]("/","_")[p]("+","-")}}},u:{7:[7,"FindAGrave New 300x250","300x250",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/fg_300x250_right"},[[2,"2586360",{siteId:"110548"},0],[3,"4716049",{size:"300x250"},0],[4,"538911241",0,0],[5,"11028238",0,0],[9,"378816",{},0],[10,"198554",{size:"300x250"},0],[16,"107598",0,0],[18,"fg_300x250_right",0,0],[33,"QxHxWnv9vBQuB9rxJTIhuUY3",0,0],[115,"findagrave_hb_300x250",{pos:"findagrave_hb_300x250",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"421151152",0,0],[154,"dB6_QCbQir7lnyaKjGFx_2",0,0],[175,"1693920",{siteId:556660,formatId:117621},0],[187,"8a969589017e7e5548265a441e5e00e9",{pos:"8a969589017e7e5548265a441e5e00e9",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],14:[14,"Newspapers 300x250 3rdParty","300x250",[],.04,3e3,0,0,{"gpt.adunit_regex":"Newspapers/300x250_3rdparty"},[[2,"2586420",{siteId:"128982"},0],[3,"2040020",{size:"300x250"},0],[4,"538911246",0,0],[5,"11822498",0,0],[9,"432525",{},0],[10,"242540",{size:"300x250"},0],[16,"108637",0,0],[18,"NP_ROS_HDX",0,0],[33,"yKSLd1HtssjOyY2zn9e9GpdP",0,0],[116,"768944187",0,0],[154,"aN5lB6fWyr7ioJrkHcnnVW",0,0],[175,"1693933",{siteId:556662,formatId:117621},0],[187,"8a969095017e7e55422f5a46b1a000e2",{pos:"8a969095017e7e55422f5a46b1a000e2",dcn:"8a9699770174742a6e5f2bf8a49600b9"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],15:[15,"Newspapers 728x90 3rdParty","728x90",[],.04,3e3,0,0,{"gpt.adunit_regex":"Newspapers/728x90_3rdparty"},[[2,"2586422",{siteId:"128982"},0],[3,"2040021",{size:"728x90"},0],[4,"538911247",0,0],[5,"11822499",0,0],[9,"432526",{},0],[10,"242539",{size:"728x90"},0],[16,"108637",0,0],[18,"NP_728x90_Desktop",0,0],[33,"gV4AAwATvixMQhpoxKqkiCi2",0,0],[116,"417999794",0,0],[154,"aN5lB6fWyr7ioJrkHcnnVW",0,0],[175,"1693934",{siteId:556662,formatId:117629},0],[187,"8a969095017e7e55422f5a46fc9e00e3",{pos:"8a969095017e7e55422f5a46fc9e00e3",dcn:"8a9699770174742a6e5f2bf8a49600b9"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],16:[16,"Rootsweb 300x250","300x250",[],.1,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/(|mailinglists/|World_Connect/)RW(|WC)_(|ML_)300x250.*"},[[2,"2586380",{siteId:"128980"},0],[3,"2040022",{size:"300x250"},0],[4,"538911248",0,0],[5,"11822500",0,0],[9,"623382",{},0],[10,"203710",{size:"300x250"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"9U8C5JLdCijhe6ouzrfdeqqG",0,0],[116,"264352041",0,0],[154,"df55dUbQir7lnyaKjGFx_2",0,0],[175,"1693937",{siteId:556663,formatId:117621},0],[187,"8a9694a6018383a89128a9b255c90016",{pos:"8a9694a6018383a89128a9b255c90016",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],17:[17,"Rootsweb 160x600","160x600",[],.1,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/(|mailinglists/)RW_(|ML_)160x600.*"},[[2,"2586378",{siteId:"128980"},0],[3,"4716055",{size:"160x600"},0],[4,"538911249",0,0],[5,"11822501",0,0],[9,"623522",{},0],[10,"203711",{size:"160x600"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"438658ULo5iKUhVemzsV0iO2",0,0],[116,"710189225",0,0],[154,"dkltKgbQir7lnyaKjGFx_2",0,0],[175,"1693936",{siteId:556663,formatId:117620},0],[187,"8a96998b017e7e553d025a47fd7400e6",{pos:"8a96998b017e7e553d025a47fd7400e6",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],18:[18,"Rootsweb 728x90","728x90",[],.1,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/(|WikiPages/)RW_(|Wiki_|Sites_)728x90$"},[[2,"1957912",{siteId:"128980",position:"atf"},0],[3,"2040024",{size:"728x90"},0],[4,"543880349",0,0],[5,"20956780",0,0],[9,"623383",{},0],[10,"203712",{size:"728x90"},0],[16,"108636",0,0],[18,"rootsweb_docking_728x90",0,0],[33,"PC5iTvRusKIwvSk1lMoaVi2I",0,0],[116,"212208145",0,0],[154,"doDfPobQir7lnyaKjGFx_2",0,0],[175,"1693939",{siteId:556663,formatId:117629},0],[187,"8a969095017e7e55422f5a4861f200e4",{pos:"8a969095017e7e55422f5a4861f200e4",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],19:[19,"Rootsweb Adhesion","728x90",["320x50"],.1,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/RW_728x90_btf"},[[2,"1957888",{siteId:"128980",position:"atf"},0],[3,"3452422",{size:"320x50"},0],[3,"3452422",{size:"728x90"},0],[4,"543537162",0,0],[4,"543537163",0,0],[5,"20491671",0,0],[9,"829344",{},0],[9,"829349",{},0],[10,"588745",{size:"320x50"},0],[10,"588745",{size:"728x90"},0],[16,"108636",0,0],[18,"rootsweb_adhesion_728x90",0,0],[33,"mhMNNNQsfobwXpHjQBKO2Zr8",0,0],[33,"u22WCJCnE4alaAYaTNDFe9Cx",0,0],[116,"817150925",0,0],[154,"dtylsEbQir7lnyaKjGFx_2",0,0],[175,"1693940",{siteId:556663,formatId:117632},0],[187,"8a969095017e7e55422f5a48fb6500e5",{pos:"8a969095017e7e55422f5a48fb6500e5",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],21:[21,"FindAGrave New 300x250","300x250",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_300x250_(hp|mem*|cem|fame)"},[[2,"2586360",{siteId:"110548",position:"atf"},0],[3,"4716049",{size:"300x250"},0],[4,"538911241",0,0],[5,"11028238",{test:!0},0],[9,"378816",{},0],[10,"198554",{size:"300x250"},0],[16,"107598",0,0],[18,"fg_300x250_right",0,0],[33,"QxHxWnv9vBQuB9rxJTIhuUY3",0,0],[115,"findagrave_hb_300x250",{pos:"findagrave_hb_300x250",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"566336173",0,0],[154,"dB6_QCbQir7lnyaKjGFx_2",0,0],[175,"1693921",{siteId:556660,formatId:117627},0],[187,"8a969589017e7e5548265a441e5e00e9",{pos:"8a969589017e7e5548265a441e5e00e9",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],22:[22,"FindAGrave New 160x600","160x600",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_160x600_(fame|mem)"},[[2,"2586362",{siteId:"110548"},0],[3,"4716047",{size:"160x600"},0],[4,"538911243",0,0],[5,"11028226",0,0],[9,"378811",{},0],[10,"198553",{size:"160x600"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"qYQsO81EJnXdQMfCtsJpLseC",0,0],[116,"362743734",0,0],[154,"dF-vWqbQir7lnyaKjGFx_2",0,0],[175,"1693919",{siteId:556660,formatId:117620},0],[187,"8a96998b017e7e553d025a4ca80c00e8",{pos:"8a96998b017e7e553d025a4ca80c00e8",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],23:[23,"FindAGrave New 728x90 ATF","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_728x90(_hp|_[a-z]*top|_[a-z]*_top)"},[[2,"2586364",{siteId:"110548",position:"atf"},0],[3,"4716043",{size:"728x90"},0],[4,"538911244",0,0],[5,"11028261",0,0],[9,"378818",{},0],[10,"198551",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_728x90_top",0,0],[33,"zL66o7S8lhe0zKdJSPq2NQhY",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"373484656",0,0],[154,"dKnXcWbQir7lnyaKjGFx_2",0,0],[175,"1693924",{siteId:556660,formatId:117624},0],[187,"8a969589017e7e5548265a4cf40e00ec",{pos:"8a969589017e7e5548265a4cf40e00ec",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],24:[24,"FindAGrave New 728x90 BTF","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_728x90(_[a-z]*bottom|_[a-z]*_bottom)","gpt.no_size":"970x250"},[[2,"2586366",{siteId:"110548",position:"atf"},0],[3,"4716040",{size:"728x90"},0],[4,"538911245",0,0],[5,"11028268s",{test:!0},0],[9,"325556",{},0],[10,"198552",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_728x90_bottom",0,0],[33,"1gPC4L7l6ysebYtfnZS19M6G",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"171548684",0,0],[154,"dOjTTQbQir7lnyaKjGFx_2",0,0],[175,"1693925",{siteId:556660,formatId:117628},0],[187,"8a96998b017e7e553d025a4d53b700e9",{pos:"8a96998b017e7e553d025a4d53b700e9",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],25:[25,"Gene_ROS ATF 728x90","728x90",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/728x90_ROS"},[[2,"2586412",{siteId:"158664",position:"atf"},0],[3,"2040027",{size:"728x90"},0],[4,"539429795",0,0],[5,"12405490",0,0],[9,"623387",{},0],[10,"226492",{size:"728x90"},0],[16,"108605",0,0],[18,"Gene_ROS_HDX",0,0],[33,"HNcUYfcLLcyVsjLKZmKM36kI",0,0],[116,"239342527",0,0],[154,"d8twTubQir7lnyaKjGFx_2",0,0],[175,"1693931",{siteId:556661,formatId:117624},0],[187,"8a96998b017e7e553d025a5019d300ea",{pos:"8a96998b017e7e553d025a5019d300ea",dcn:"8a9699770174742a6e5f2bf603f300b3"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],26:[26,"Gene_ROS 300x250","300x250",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/300x250_ROS"},[[2,"2586414",{siteId:"158664",position:"atf"},0],[3,"2040028",{size:"300x250"},0],[4,"539429794",0,0],[5,"12405479",0,0],[9,"623386",{},0],[10,"226491",{size:"300x250"},0],[16,"108605",0,0],[18,"Gene_ROS_Deskop_300x250",0,0],[33,"mBgoHErwDoyVk4vwkjuyuRTd",0,0],[116,"552718304",0,0],[154,"aat3KybQmr7lnyaKjGFx_2",0,0],[175,"1693930",{siteId:556661,formatId:117621},0],[187,"8a969134018383a88c53a992a2db000c",{pos:"8a969134018383a88c53a992a2db000c",dcn:"8a9699770174742a6e5f2bf603f300b3"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],27:[27,"Gene_ROS 160x600","160x600",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/160x600_ROS"},[[2,"2586416",{siteId:"158664"},0],[3,"2040029",{size:"160x600"},0],[4,"539429793",0,0],[5,"12405483",0,0],[9,"623385",{},0],[10,"226490",{size:"160x600"},0],[16,"108605",0,0],[18,"Gene_ROS_HDX",0,0],[33,"5asQ4ceTk7sNAkJJrDN6Iv1r",0,0],[116,"576553679",0,0],[154,"aeIrxabQmr7lnyaKjGFx_2",0,0],[175,"1693929",{siteId:556661,formatId:117620},0],[187,"8a969589017e7e5548265a50adbb00f1",{pos:"8a969589017e7e5548265a50adbb00f1",dcn:"8a9699770174742a6e5f2bf603f300b3"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],28:[28,"Gene_ROS BTF 728x90","728x90",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/728x90_bottom"},[[2,"2586418",{siteId:"158664"},0],[3,"2040030",{size:"728x90"},0],[4,"539429796",0,0],[5,"12405492",0,0],[9,"623388",{},0],[10,"226493",{size:"728x90"},0],[16,"108605",0,0],[18,"Gene_ROS_BTF_728x90",0,0],[33,"NDIErvsdTtUfeOUGpR8Jmc7Z",0,0],[116,"174166046",0,0],[154,"akICcwbQmr7lnyaKjGFx_2",0,0],[175,"1693932",{siteId:556661,formatId:117628},0],[187,"8a9694a6018383a89128a92ba36f0004",{pos:"8a9694a6018383a89128a92ba36f0004",dcn:"8a9699770174742a6e5f2bf603f300b3"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],29:[29,"FindAGrave New 320x50","320x50",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_320x50_*"},[[2,"2586368",{siteId:"110548"},0],[3,"4716035",{size:"320x50"},0],[4,"539753634",0,0],[5,"12762494",0,0],[9,"547108",{},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"3edJy1pHdtLE0wcGtBeiCGtx",0,0],[115,"findagrave_hb_320x50",{pos:"findagrave_hb_320x50",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"676294403",0,0],[154,"dSuZUIbQir7lnyaKjGFx_2",0,0],[175,"1693923",{siteId:556660,formatId:117623},0],[187,"8a969589017e7e5548265a4edd2000ef",{pos:"8a969589017e7e5548265a4edd2000ef",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],30:[30,"FindAGrave New Search 728x90","728x90",[],.2,3e3,{require_bid:!0},0,{"gpt.adunit_regex":"FindAGraveNEW/fg_728x90_search","vp.min_width":768},[[2,"2586370",{siteId:"110548"},0],[3,"4716036",{size:"728x90"},0],[4,"539780867",0,0],[5,"12795850",0,0],[9,"549884",{},0],[16,"107598",0,0],[18,"fg_search_desktop_728x90",0,0],[33,"2gxM8lyoHkVzcMpx7VgkCO6T",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"568345417",0,0],[154,"dWlRNGbQir7lnyaKjGFx_2",0,0],[175,"1693928",{siteId:556660,formatId:117629},0],[187,"8a969589017e7e5548265a4dd42700ed",{pos:"8a969589017e7e5548265a4dd42700ed",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],31:[31,"FindAGrave New Search 320x50","320x50",[],.2,3e3,{require_bid:!0},0,{"gpt.adunit_regex":"FindAGraveNEW/fg_(728x90|320x50)_search","vp.max_width":767},[[2,"2586372",{siteId:"110548"},0],[3,"4716035",{size:"320x50"},0],[4,"539780881",0,0],[5,"12795851",0,0],[9,"549885",{},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"ZjhvoQOrKn5G3QC7kLtlB14I",0,0],[115,"findagrave_hb_320x50_search",{pos:"findagrave_hb_320x50_search",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"931185384",0,0],[154,"dZki9YbQir7lnyaKjGFx_2",0,0],[175,"1693927",{siteId:556660,formatId:117623},0],[187,"8a969589017e7e5548265a4f34e300f0",{pos:"8a969589017e7e5548265a4f34e300f0",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],32:[32,"FindAGrave New 300x600","300x600",["300x250","160x600"],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_300x600_(fame|mem|cem)"},[[2,"2586358",{siteId:"110548"},0],[3,"4716028",{size:"160x600"},0],[3,"4716028",{size:"300x250"},0],[3,"4716028",{size:"300x600"},0],[4,"539792738",0,0],[5,"12803530",0,0],[9,"550113",{},0],[10,"249382",{size:"160x600"},0],[10,"249382",{size:"300x250"},0],[10,"249382",{size:"300x600"},0],[16,"117128",0,0],[18,"fg_HDX_ROS",0,0],[33,"3Q7fpVTig8DIIFozmjdHbn3j",0,0],[33,"9Hh61YCiCxVK4KK9weTjQW0n",0,0],[33,"CEDSkT45YDGTRkjJGjmdISKh",0,0],[115,"findagrave_hb_300x600",{pos:"findagrave_hb_300x600",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"589080703",0,0],[154,"d3zKgWbQir7lnyaKjGFx_2",0,0],[175,"1693922",{siteId:556660,formatId:117630},0],[187,"8a969589017e7e5548265a4e358500ee",{pos:"8a969589017e7e5548265a4e358500ee",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],33:[33,"Rootsweb 300x600","300x600",[],.1,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/World_Connect/rwwc_300x600.*"},[[2,"2586376",{siteId:"128980"},0],[3,"2040026",{size:"300x600"},0],[4,"540681522",0,0],[5,"20031573",0,0],[9,"761065",{},0],[10,"408514",{size:"300x600"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"NJ0jaPv7et3S0FPplzc0Uao3",0,0],[116,"988356205",0,0],[154,"bgk8UKbQir7j4GaKlKyvbs",0,0],[175,"1693938",{siteId:556663,formatId:117622},0],[187,"8a96998b017e7e553d025a4974a300e7",{pos:"8a96998b017e7e553d025a4974a300e7",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],34:[34,"Rootsweb Sticky Sidebar","300x600",["300x250","160x600"],.1,3e3,0,0,{"gpt.adunit_regex":"rootsweb","adb.ad_class":"sticky_sidebar"},[[2,"2586374",{siteId:"128980",position:"atf"},0],[3,"4716026",{size:"160x600"},0],[3,"4716026",{size:"300x250"},0],[3,"4716026",{size:"300x600"},0],[4,"538911248",0,0],[4,"538911249",0,0],[4,"540681522",0,0],[5,"20031590",0,0],[9,"623382",{},0],[10,"562847",{size:"160x600"},0],[10,"562847",{size:"300x250"},0],[10,"562847",{size:"300x600"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"3riGCLfRYmfgbq7y61HX9Sse",0,0],[33,"fLdV9mwHCCJ8IRgZVcOXNCx4",0,0],[33,"gAgrOQ9MlHDHyIyySEA90zFq",0,0],[116,"523538018",0,0],[154,"dawBI-bQir7lnyaKjGFx_2",0,0],[175,"1693943",{siteId:556663,formatId:117630},0],[187,"8a969095017e7e55422f5a49ffb500e6",{pos:"8a969095017e7e55422f5a49ffb500e6",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],38:[38,"Roostweb Bottom LB","728x90",["970x90","970x250"],.1,3e3,0,0,{"gpt.domid_regex":"lb_bottom"},[[2,"2423736",{siteId:"128980"},0],[3,"4482670",{size:"728x90"},0],[3,"4482670",{size:"970x250"},0],[3,"4482670",{size:"970x90"},0],[4,"557341722",0,0],[5,"25526554",0,0],[9,"1037038",{},0],[9,"1100577",0,0],[10,"826821",{size:"728x90"},0],[10,"826821",{size:"970x250"},0],[10,"826821",{size:"970x90"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"gV1hJy4Werae4QvNkHUmuO2X",0,0],[33,"RhZqNOi02F9dUlLznvTPpgjR",0,0],[33,"THY3RlcfymgADxkZmSGxCVVH",0,0],[116,"528937131",0,0],[154,"aWaEMG4PSr7ikurkHcnnVW",0,0],[175,"1693935",{siteId:556663,formatId:117631},0],[187,"8a969dbe018080d6db65d8b324db0062",{pos:"8a969dbe018080d6db65d8b324db0062",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],39:[39,"Rootsweb MR Left","300x250",[],.1,2e3,0,0,{"gpt.domid_regex":"mrec_left_bottom"},[[2,"2423738",{siteId:"128980"},0],[3,"4482671",{size:"300x250"},0],[4,"557341723",0,0],[5,"25526556",0,0],[9,"1037039",{},0],[9,"1100578",0,0],[10,"826822",{size:"300x250"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"GyTO5eSuzDi92VvyCqkO2Bls",0,0],[116,"866249476",0,0],[154,"a4z2Vy4PSr7ikurkHcnnVW",0,0],[175,"1693941",{siteId:556663,formatId:117621},0],[187,"8a969ce4018383a88820a9bb2b93000f",{pos:"8a969ce4018383a88820a9bb2b93000f",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],40:[40,"Rootsweb MR Right","300x250",[],.1,2e3,0,0,{"gpt.domid_regex":"mrec_right_bottom"},[[2,"2423740",{siteId:"128980"},0],[3,"4482672",{size:"300x250"},0],[4,"557341724",0,0],[5,"25526559",0,0],[9,"1037040",{},0],[9,"1100579",0,0],[10,"826823",{size:"300x250"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"sXYSeJhbkTTw1s6J8R0UElaJ",0,0],[116,"997740532",0,0],[154,"a-CSnG4PSr7ikurkHcnnVW",0,0],[175,"1693942",{siteId:556663,formatId:117621},0],[187,"8a969ce4018383a88820a9bc3c560010",{pos:"8a969ce4018383a88820a9bc3c560010",dcn:"8a9699770174742a6e5f2bfa2e3300bd"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],41:[41,"FindAGrave New Large BTF","728x90",["970x90","970x250"],.2,3e3,0,0,{"gpt.domid":"global-ldr-footerspot","gpt.has_size":"970x250"},[[2,"2586356",{siteId:"110548"},0],[3,"4716024",{size:"728x90"},0],[3,"4716024",{size:"970x250"},0],[3,"4716024",{size:"970x90"},0],[4,"558217972",0,0],[5,"27715293",0,0],[9,"1100580",0,0],[10,"889653",{size:"728x90"},0],[10,"889653",{size:"970x250"},0],[10,"889653",{size:"970x90"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"Rdko6FYR1iIY6mPa5o3ek4gK",0,0],[116,"547445598",0,0],[154,"a3XVUCuhar7zXfrkHcnnVW",0,0],[175,"1693926",{siteId:556660,formatId:117631},0],[187,"8a969ce4018383a88820a98fe419000c",{pos:"8a969ce4018383a88820a98fe419000c",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],42:[42,"FindAGrave New DT Footer ","728x90",[],.2,3e3,0,0,{"gpt.domid":"fgAdhesion","gpt.has_size":"728x90"},[[2,"2722184",{siteId:"110548"},0],[3,"4847600",{size:"728x90"},0],[4,"558592315",0,0],[5,"28511129",0,0],[9,"1100581",0,0],[10,"925943",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"LHlfMC6GCJZaTF98USEv2jnM",0,0],[116,"569317867",0,0],[175,"1728106",{siteId:556660,formatId:117629},0],[187,"8a9698b9018484e89c89edcfbfe1011c",{pos:"8a9698b9018484e89c89edcfbfe1011c",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],43:[43,"FindAGrave New Mob Footer ","320x50",[],.2,3e3,0,0,{"gpt.domid":"fgAdhesion","gpt.has_size":"320x50"},[[2,"2722186",{siteId:"110548"},0],[3,"4847601",{size:"320x50"},0],[4,"558592316",0,0],[5,"28511132",0,0],[9,"1100582",0,0],[10,"925944",{size:"320x50"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"grT7GDpNR3DgGQusvLhs0rsq",0,0],[116,"723729387",0,0],[175,"1728105",{siteId:556660,formatId:117623},0],[187,"8a9690c2018484e8a23fedd350dd0127",{pos:"8a9690c2018484e8a23fedd350dd0127",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],44:[44,"Archives DT LB BTF","728x90",["970x90"],.04,2e3,0,0,{"gpt.adunit_regex":"archives"},[[2,"2722140",{siteId:"463166"},0],[3,"4869078",{size:"728x90"},0],[3,"4869078",{size:"970x90"},0],[4,"558605332",0,0],[5,"28706869",0,0],[9,"1100597",0,0],[10,"928842",{size:"728x90"},0],[10,"928842",{size:"970x90"},0],[33,"jEpNvhjoXPr4ZVDWGlqmC911",0,0],[116,"734705428",0,0],[175,"1712971",{siteId:556660,formatId:119019},0],[187,"8a969ce401858511f4a1315a358d0266",{pos:"8a969ce401858511f4a1315a358d0266",dcn:"8a969ce401858511f4a131595e3b0264"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],45:[45,"Archives DT MR","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"archives"},[[2,"2722142",{siteId:"463166"},0],[3,"4869079",{size:"300x250"},0],[4,"558605333",0,0],[5,"28706870",0,0],[9,"1100598",0,0],[10,"928843",{size:"300x250"},0],[33,"qT5oOBdiCLwdDWLr1pvRhFa9brc 21",0,0],[116,"723719402",0,0],[175,"1712971",{siteId:556660,formatId:117621},0],[187,"8a96919301858511f911315afa790280",{pos:"8a96919301858511f911315afa790280",dcn:"8a969ce401858511f4a131595e3b0264"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],46:[46,"Archives DT TR","300x250",["300x600"],.04,2e3,0,0,{"gpt.adunit_regex":"archives"},[[2,"2722144",{siteId:"463166"},0],[3,"4869080",{size:"300x250"},0],[3,"4869080",{size:"300x600"},0],[4,"558605334",0,0],[5,"28706871",0,0],[9,"1100599",0,0],[10,"928844",{size:"300x250"},0],[10,"928844",{size:"300x600"},0],[33,"9SCrc4v9NEK0c9jrr28qpHUA",0,0],[116,"912811782",0,0],[175,"1712971",{siteId:556660,formatId:119020},0],[187,"8a96919301858511f911315b6b840281",{pos:"8a96919301858511f911315b6b840281",dcn:"8a969ce401858511f4a131595e3b0264"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],47:[47,"Archives Mob MR","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"archives"},[[2,"2722146",{siteId:"463166"},0],[3,"4869081",{size:"300x250"},0],[4,"558605335",0,0],[5,"28706872",0,0],[9,"1100600",0,0],[10,"928845",{size:"300x250"},0],[33,"7Rf7Mtm58omF9Qj8kjLnxdWL",0,0],[116,"770248611",0,0],[175,"1712971",{siteId:556660,formatId:117623},0],[187,"8a96919301858511f911315d445c0284",{pos:"8a96919301858511f911315d445c0284",dcn:"8a96919301858511f911315cdf8f0282"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],48:[48,"Archives Mob LB BTF","320x50",["300x50"],.04,2e3,0,0,{"gpt.adunit_regex":"archives"},[[2,"2722148",{siteId:"463166"},0],[3,"4869082",{size:"300x50"},0],[3,"4869082",{size:"320x50"},0],[4,"558605336",0,0],[5,"28706879",0,0],[9,"1100601",0,0],[10,"928846",{size:"300x50"},0],[10,"928846",{size:"320x50"},0],[33,"xAJrTEgAhm5UQhrT3pThV1EK",0,0],[116,"818375982",0,0],[175,"1712971",{siteId:556660,formatId:119021},0],[187,"8a96945001858511fded315de77e021d",{pos:"8a96945001858511fded315de77e021d",dcn:"8a96919301858511f911315cdf8f0282"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],49:[49,"WR DT LB Large","728x90",["970x90"],.04,2e3,0,0,{"gpt.adunit_regex":"weremember","adb.ad_class_regex":"wr-org-ldr","vp.min_width":768,"gpt.has_size":"970x90"},[[2,"2722152",{siteId:"463170"},0],[3,"4869083",{size:"728x90"},0],[3,"4869083",{size:"970x90"},0],[4,"558605337",0,0],[5,"28706856",0,0],[9,"1100602",0,0],[10,"928847",{size:"728x90"},0],[10,"928847",{size:"970x90"},0],[33,"cxqgFNoJegJYcXM2pwamQfAM",0,0],[116,"117828249",0,0],[175,"1712970",{siteId:556660,formatId:119019},0],[187,"8a96919301858511f911315f31eb0285",{pos:"8a96919301858511f911315f31eb0285",dcn:"8a96945001858511fded315ed27e021e"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],50:[50,"WR DT LB Small","728x90",[],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"ldr","vp.min_width":768},[[2,"2722154",{siteId:"463170"},0],[3,"4869084",{size:"728x90"},0],[4,"558605338",0,0],[5,"28706857",0,0],[9,"1100603",0,0],[10,"928848",{size:"728x90"},0],[33,"8eJkdSf7ggdLjsWD5hIOydH0",0,0],[116,"824862236",0,0],[175,"1712970",{siteId:556660,formatId:117629},0],[187,"8a96919301858511f911315fc6790286",{pos:"8a96919301858511f911315fc6790286",dcn:"8a96945001858511fded315ed27e021e"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],51:[51,"WR Mob LB","320x50",["300x50"],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"ldr","vp.max_width":768},[[2,"2722156",{siteId:"463170"},0],[3,"4869085",{size:"300x50"},0],[3,"4869085",{size:"320x50"},0],[4,"558605339",0,0],[5,"28706858",0,0],[9,"1100604",0,0],[10,"928849",{size:"300x50"},0],[10,"928849",{size:"320x50"},0],[33,"AnRKFGmkupL11JEaFlvE7QqU",0,0],[116,"650457407",0,0],[175,"1712970",{siteId:556660,formatId:119021},0],[187,"8a96919301858511f9113162255f0289",{pos:"8a96919301858511f9113162255f0289",dcn:"8a96919301858511f9113161ccc00287"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],52:[52,"WR DT LB Large Sticky","728x90",["970x90"],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"sticky","vp.min_width":768},[[2,"2722158",{siteId:"463170"},0],[3,"4869086",{size:"728x90"},0],[3,"4869086",{size:"970x90"},0],[4,"558605340",0,0],[5,"28706859",0,0],[9,"1100605",0,0],[10,"928850",{size:"728x90"},0],[10,"928850",{size:"970x90"},0],[33,"eH41xz6gvjLMTJ4ohzSQjCdR",0,0],[116,"642787932",0,0],[175,"1712970",{siteId:556660,formatId:119019},0],[187,"8a96945001858511fded316064cc0220",{pos:"8a96945001858511fded316064cc0220",dcn:"8a96945001858511fded315ed27e021e"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],53:[53,"WR MR","300x250",[],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"mrec"},[[2,"2722160",{siteId:"463170"},0],[3,"4869087",{size:"300x250"},0],[4,"558605341",0,0],[5,"28706860",0,0],[9,"1100606",0,0],[10,"928851",{size:"300x250"},0],[33,"xUvGiVTtECfl11fy2LFkbGHt",0,0],[116,"802531253",0,0],[175,"1712970",{siteId:556660,formatId:117621},0],[187,"8a96919301858511f91131629d6f028a",{pos:"8a96919301858511f91131629d6f028a",dcn:"8a96919301858511f9113161ccc00287"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],54:[54,"WR DT Tall","300x250",["300x600"],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"large"},[[2,"2722162",{siteId:"463170"},0],[3,"4869088",{size:"300x250"},0],[3,"4869088",{size:"300x600"},0],[4,"558605342",0,0],[5,"28706861",0,0],[9,"1100607",0,0],[10,"928852",{size:"300x250"},0],[10,"928852",{size:"300x600"},0],[33,"3xyRsoTRJhXhUIP4vE4PVksi",0,0],[116,"998277256",0,0],[175,"1712970",{siteId:556660,formatId:119020},0],[187,"8a969ce401858511f4a13160d55b0267",{pos:"8a969ce401858511f4a13160d55b0267",dcn:"8a96945001858511fded315ed27e021e"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],55:[55,"WR Mob Small","468x60",["320x50","300x50"],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"small","vp.max_width":767},[[2,"2722164",{siteId:"463170"},0],[3,"4869089",{size:"320x50"},0],[3,"4869089",{size:"468x60"},0],[4,"558605343",0,0],[5,"28706862",0,0],[9,"1100608",0,0],[10,"928853",{size:"320x50"},0],[10,"928853",{size:"468x60"},0],[33,"7uDaeAc06NkQmqqoDJqEmtUP",0,0],[116,"211462603",0,0],[175,"1712970",{siteId:556660,formatId:119022},0],[187,"8a96945001858511fded31613e300221",{pos:"8a96945001858511fded31613e300221",dcn:"8a96945001858511fded315ed27e021e"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]],56:[56,"WR DT Small","468x60",["728x90"],.04,2e3,0,0,{"gpt.adunit_regex":"WeRemember","adb.ad_class_regex":"small","vp.min_width":768},[[2,"2750654",{siteId:"463170"},0],[3,"4923843",{size:"468x60"},0],[3,"4923843",{size:"728x90"},0],[4,"558890870",0,0],[5,"28706857",0,0],[9,"1100603",0,0],[10,"942433",{size:"468x60"},0],[10,"942433",{size:"728x90"},0],[33,"8eJkdSf7ggdLjsWD5hIOydH0",0,0],[116,"824862236",0,0],[175,"1712970",{siteId:556660,formatId:117629},0],[187,"8a96947d01868613334a18c742f20069",{pos:"8a96947d01868613334a18c742f20069",dcn:"8a96945001858511fded315ed27e021e"},0],[191,"01FYA4FWEXSFV507J8NDEDX2KT",0,0]]]}}),b={},v={},r={},i=(window.AdBridg=window.AdBridg||{cmd:[]},window.AdBridg.global=function(e,t){if(void 0===t)return I.logl("g","Global read: ",e,r[e]),r[e];r[e]=t,I.logl("g","Global set: ",e,t)},window.AdBridg.globals={version:"v7.31.0"},h.s.preconfigure_init&&I.wrapAsync(h.s.preconfigure_init)(h.s),p.getId=function(){return h.c},p.libSettings=function(t){if(t){var e,r;try{r="function"==typeof h.s[t]?(e=Array.prototype.slice.apply(arguments,[1]),h.s[t].apply(null,e)):h.s[t]}catch(e){I.err("ConfigKeyFail",t,e)}return r}return h.s},p.kvp=function(e){var t=h.s.gpt_kvp_overrides;return t&&t[e]?t[e]:e},p.proc=function(e){h.s.pub=h.s.pub||{},I.each(e,function(e,t){h.s.pub[t]=e}),I.log("Publisher config update: ",JSON.stringify(h.s.pub)),g("./modules.js").trigger("pub.config",h.s.pub)},p.deca=function(e){if(h.s.alter_adb_pixel)try{e=h.s.alter_adb_pixel(e)}catch(e){I.err("Alter adb fail",e)}return e},p.configureUnit=function(e,t){var r,i=!1,n=[];for(r in h.u)if(h.u.hasOwnProperty(r)){var o=f(0,h.u[r]);if(g("./modules.js").trigger("unit.dynamic",o,h.s,e),h.s.dynamic_configuration)try{var a=h.s.dynamic_configuration(o,h.s,e);if(!(o="object"!=typeof a&&!1!==a?o:a))continue}catch(e){I.err("Failed dynamic configuration",e)}if(t){if(t!==o.id)continue;i=o;break}if(o.rule_order)n[o.rule_order]=o;else if(m(e,o,h.s)){i=o;break}}if(!i&&n.length)for(var s=0;s<n.length;++s)if(n[s]&&m(e,n[s],h.s)){i=n[s];break}if(i){e.configure(i);var d=e,c=i;if(c.bid_req_confs&&c.bid_req_confs.length)for(var u=0;u<c.bid_req_confs.length;++u){var p=c.bid_req_confs[u],p={bidder_id:p[0],bidder_unit_id:p[1],settings:p[2]||{},mutate:p[3]||!1},l=v[String(p.bidder_id)];I.qsab(l,p.bidder_id)&&(d.addBidder(l,b[l]),d.addBidReqConf(l,p,h.s))}}},p.units=function(r){I.each(h.u,function(e,t){r(f(0,e))})},h.s.usp);(i="function"==typeof i?i():i)&&I.cfusp(i.image,i.iframe,i.delay),p.afterConsent=g("./consent.js")(h);p.ortb2=function(t){var e,r=I.urlref(),i=I.vp(),n=r.domain.replace(/^www\./i,""),o={};try{var a=document.querySelector("meta[name='keywords']"),s=(a&&a.content&&a.content.replace&&(e=a.content.replace(/\s/g,"")),o={site:{page:r.page,ref:r.ref,domain:n,keywords:e,publisher:{domain:n}},device:{w:i.w,h:i.h,dnt:I.dnt()?1:0,ua:window.navigator.userAgent,language:window.navigator.language.split("-").shift()}},function(){function e(e,t){e={brand:e};return"string"==typeof t&&t&&(e.version=t.split(".")),e}try{var t=window.navigator.userAgentData;if(!t)return null;var r={source:1};function i(e){"string"==typeof t[e]&&(r[e]=t[e])}t.platform&&(r.platform=e(t.platform,t.platformVersion));var n=t.fullVersionList||t.brands;if(n){r.browsers=[];for(var o=0;o<n.length;++o){var a=n[o];r.browsers.push(e(a.brand,a.version))}}return t.hasOwnProperty("mobile")&&(r.mobile=t.mobile?1:0),i("model"),i("bitness"),i("architecture"),Object.freeze(r)}catch(e){}return null}()),d=(s&&(o.device.sua=s),{}),c=!1,u=(window.navigator.globalPrivacyControl&&(d.ext={gpc:1},c=!0),p.libSettings("coppa"));"boolean"==typeof u&&(d.coppa=u?1:0,c=!0),c&&(o.regs=d)}catch(e){l||(I.err("Ortb2GenFail",e),l=!0)}a=p.libSettings("bidder_ortb2",t)||{};if("string"==typeof a)try{a=JSON.parse(a)}catch(e){I.err("BrcOrtb2JsonFail",t)}return Object.assign(o,a),o};var o=g("./modules.js"),i=(o.setup(p),g("./adapters/insticator.js")),n=g("./adapters/yahoossp.js"),a=g("./adapters/smartadserver.js"),s=g("./adapters/33across.js"),d=g("./adapters/medianet.js"),c=g("./adapters/aol.js"),u=g("./adapters/sharethrough.js"),y=g("./adapters/triplelift.js"),_=g("./adapters/conversant.js"),w=g("./adapters/index.js"),x=g("./adapters/sovrn.js"),S=g("./adapters/appnexusast.js"),A=g("./adapters/openx.js"),E=g("./adapters/pubmatic.js");t("rubicon",g("./adapters/rubicon.js"),[2,{adjust:.8,accountId:14544},0]),t("pubmatic",E,[3,{publisherId:"158092"},0]),t("openx",A,[4,{delDomain:"ancestry-d.openx.net"},0]),t("appnexus",S,[5,0,0]),t("sovrn",x,[9,0,0]),t("index",w,[10,0,0]),t("conversant",_,[16,0,0]),t("triplelift",y,[18,0,0]),t("sharethrough",u,[33,0,0]),t("onemobile",c,[115,0,0]),t("medianet",d,[116,{cid:"8CU12G3DV"},0]),t("33across",s,[154,{productId:"siab"},0]),t("smartadserver",a,[175,{networkId:"4479"},0]),t("yahoo",n,[187,0,0]),t("insticator",i,[191,0,0]),p.afterConsent(function(e){g("./modules.js").trigger("consent.check_complete",e)})},{"./adapters/33across.js":1,"./adapters/aol.js":2,"./adapters/appnexusast.js":3,"./adapters/conversant.js":4,"./adapters/index.js":5,"./adapters/insticator.js":6,"./adapters/medianet.js":7,"./adapters/openx.js":8,"./adapters/pubmatic.js":9,"./adapters/rubicon.js":10,"./adapters/sharethrough.js":11,"./adapters/smartadserver.js":12,"./adapters/sovrn.js":13,"./adapters/triplelift.js":14,"./adapters/yahoossp.js":15,"./ajax":16,"./consent.js":20,"./modules.js":23,"./utils":39}],20:[function(i,e,P){function t(){if(y&&_)for(;x.length;){var e=x.shift();I(e)}}function n(){E||(E=!0,l.log("Consent: removing action configurations."),d.u=[],m("N"))}function o(){googletag&&googletag.cmd&&!T&&(T=!0,l.log("Consent: set GPT setRequestNonPersonalizedAds(1)."),m("L"),googletag.cmd.push(function(){googletag.pubads().setRequestNonPersonalizedAds(1)}))}function a(){googletag&&googletag.cmd&&!k&&(k=!0,l.log('Consent: set GPT setPrivacySettings({ "restrictDataProcessing": true }).'),m(b),googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})}))}var d,r,s,c,u,p,l=i("./utils.js"),g=(e.exports=l.wrapAsync(function(e){return d=e,function(e){N(e)}}),""),m=function(e,t){g+=e,t&&(g+=t)},f={iab:"A",conversant:"B"},h={geoblock:"C",geoblockbids:"D",geocmp:"E"},b="M",v="AT,BE,BG,CR,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LI,LU,MT,NL,PL,PT,RO,SK,SI,SP,SE,GB,NO,IS,LI,GI,AX,GF,GP,MQ,YT,RE,MF,FK,CH,AD,MC,SM,VA,",y=!1,_=!1,w=!1,x=[],N=(l.qs("adb_skip_consent")&&(l.log("Consent: skipped by qs"),_=y=!0),l.wrapAsync(function(e){"function"!=typeof e?l.err("Consent: invalid cb",e):(e=l.wrapAsync(e),y&&_?I(e):(x.push(e),w||(w=!0,U(),q())))})),I=function(e){e(r,s,g)},S=l.wrapAsync(function(e){l.log("Consent: done gathering GDPR consent",e),r=e,y=!0,m("u"),t()}),A=l.wrapAsync(function(e){l.log("Consent: done gathering USP consent",e),s=e,_=!0,m("h"),t()}),E=!1,T=!1,k=!1,U=function(){var e=d.s.cmp;"function"==typeof e?(m("t"),e(d.s,l.wrapAsync(function(e){z(e)}))):z(e)},z=l.wrapAsync(function(r){r?"pubblock"===r?(l.log("Consent: gdpr: pubblock"),m("F"),n(),o(),S({gdprApplies:!0,consentString:""})):"iab"===r||"conversant"===r?(m(f[r]),O(r)):"geoblock"===r||"geoblockbids"===r||"geocmp"===r?(m(h[r]),D(function(e){var t;-1===v.indexOf(e.slice(0,2))?(l.log("Consent: gdpr: not in EU:",e),m("y"),S({gdprApplies:!1,consentString:""})):"geocmp"===r?(t=d.s.cmp_for_geo,l.log("Consent: gdpr: in EU, checking cmp:",t),m("x"),setTimeout(function(){z(t)},0)):"geoblock"===r?(m("v"),l.rec("GDPRBlockAll"),l.log("Consent: gdpr: in EU, disabling ads")):(m("w"),l.log("Consent: gdpr: geoblockbids - preventing auctions and continuing to GAM"),n(),o(),S({gdprApplies:!0,consentString:""}))})):(m("z"),l.err("Consent: unrecognized cmp value",r),S()):(m("G"),S())}),j=0,O=l.wrapAsync(function(){var e,t,r,a,s;if("function"!=typeof window.__cmp&&"function"!=typeof window.__tcfapi)return e=d.s.cmp_check_interval,t=d.s.cmp_check_max,e&&j<t?(0===j&&(m("p"),l.log("Consent: gdpr: cmp not found yet - checking every ",e,"ms; max ",t,"intervals")),j+=1,void setTimeout(O,e)):(r=d.s.cmp_fallback)?(l.log("Consent: gdpr: fallback to",r),m("o"),void setTimeout(function(){z(r)},0)):(m("n"),void l.log("Consent: gdpr: CMP object not found, preventing further execution."));window.__tcfapi?(l.log("Consent: gdpr: calling TCFv2"),m("U"),a=!1,(s=function(){window.__tcfapi("getTCData",2,l.wrapAsync(function(e,t){var r,i,n,o;if(e){if(m("s"),o=e.eventStatus,r=e.tcString,(n=(i=e).gdprApplies)&&(!r||"cmpuishown"===o))return a||(a=!0,l.log("Consent: gdpr: TCFv2 not ready yet. Waiting...")),void setTimeout(s,200)}else m("r");S({consentString:r,vendorData:i,gdprApplies:n})}))})()):(l.log("Consent: gdpr: calling CMP"),m("q"),window.__cmp("getVendorConsents",null,l.wrapAsync(function(e){var t,r,i;l.log("Consent: gdpr: CMP result",e),e?(t=e.metadata||e.consentData,r=e.vendorConsents,i=e.gdprApplies,m("s")):m("r"),S({consentString:t,vendorData:r,gdprApplies:i})})))}),q=function(){var t,e=d.s.ccpa;"optout"===e?(l.log("Consent: ccpa: opting out all users, restricting gpt processing"),m("l"),a(),A({version:1,uspString:C()})):0===(e||"").indexOf("geoblock,")?(t=e.split(",").slice(1),D(function(e){-1!==t.indexOf(e)?(l.log("Consent: ccpa: opting out ",t," users, restricting gpt processing"),m("O"),a(),A({version:1,uspString:C()})):(l.log("Consent: ccpa: region OK",e),m("T"),A({version:1,uspString:"1---"}))})):(!e&&window.__uspapi&&(e="iab",m("k")),(e?"iab"===e?(m("j"),B):(l.log("Consent: ccpa: unknown strategy, continuing as normal; strategy=",e),m("i"),A):(l.log("Consent: ccpa: no strategy defined, continuing as normal"),m("m"),A))())},C=function(){var e=d.s.ccpa_signatory||"N";return"1"+(d.s.ccpa_button||"N")+"Y"+e},R=0,B=l.wrapAsync(function(){var r=d.s.usp_check_interval||500,i=d.s.usp_check_max||30;if(!window.__uspapi)return r&&R<i?(0===R&&(l.log("Consent: usp: __uspapi not found yet - checking every ",r,"ms; max ",i,"intervals"),m("b")),R+=1,void setTimeout(B,r)):(l.log("Consent: usp: __uspapi not found, preventing further execution."),void m("a"));0===R&&m("c"),window.__uspapi("getUSPData",1,l.wrapAsync(function(e,t){if(l.log("Consent: usp: result",e,t),!(t||e&&e.uspString))return r&&R<i?(0===R&&(l.log("Consent: usp: result empty, re-checking in ",r,"ms"),m("e")),R+=1,void setTimeout(B,r)):(l.log("Consent: usp: __uspapi returned invalid, defaulting to Opt Out"),m("f"),a(),void A({version:1,uspString:C()}));e&&e.uspString?(m("g"),"Y"===e.uspString.substr(2,1)&&a()):m("d"),A(e)}))}),D=(p=[],function(e){var t,r;"function"!=typeof e?l.err("Consent: bad region cb",e):(e=l.wrapAsync(e),c||(t=l.cr("adbrgn"))&&(l.log("Consent: region cookie found",t),m("S"),c=t),c?e(c):(p.push(e),u||(l.log("Consent: geo region requested"),u=!0,r=function(){for(;p.length;)p.shift()(c)},i("./ajax.js")({url:"https://geo.adspsp.com",withCredentials:!1,parseResponseJson:!1},l.wrapAsync(function(e,t){if(e)return l.err("geo/region",e),d.s.cmp_allow_geofail?(c="????",l.log("Consent: error getting region, continuing"),m("P"),void r()):(l.log("Consent: region check failed; preventing further action"),void m("Q"));c=t,l.log("Consent: region check result",c),l.cw("adbrgn",c),l.log("Consent: cached region",c),m("R"),r()})))))})},{"./ajax.js":16,"./utils.js":39}],21:[function(e,N,U){if(window.AdBridg=window.AdBridg||{cmd:[]},window.googletag=window.googletag||{cmd:[]},window.pbjs=window.pbjs||{que:[]},AdBridg.gpt=window.googletag,!(AdBridg.exists||window.googletag&&googletag.cmd&&googletag.cmd===AdBridg.cmd)){AdBridg.exists=!0;var f=e("../utils.js"),p=e("../unit.js"),l=e("../auction.js"),h=e("../config.js"),b=e("../analytics.js"),v=e("../modules.js"),q=e("../mockprebid.js");if(!f.qs("adb_off"))if(e=f.vp(),/headless/i.test(navigator.userAgent)||0===e.w||0===e.h)f.log("headless browser detected; shutting down"),f.rec("headless");else{s={enableSingleRequest:P,disableInitialLoad:P,addEventListener:(a={add:function(e,t){a[e]=(a[e]||[]).concat(t)},remove:function(e,t){a[e]=(a[e]||[]).filter(function(e){return e!==t})},trigger:function(){var t=[].slice.apply(arguments),e=t.shift();(a[e]||[]).forEach(function(e){e.apply(0,t)})}}).add,removeEventListener:a.remove,safeFrameConfig:!1,setSafeFrameConfig:function(e){s.safeFrameConfig=e},targeting:{},setTargeting:function(e,t){s.targeting[e]=t},refresh:function(e){e.forEach(function(e){var r=document.createElement("iframe"),t=document.getElementById(e.getSlotElementId()),i=!s.safeFrameConfig||e.getTargeting("unsafe")[0],n=(r.height=e.sizes[0][1],r.width=e.sizes[0][0],r.border="0px",r.hspace="0",r.vspace="0",r.marginWidth="0",r.marginHeight="0",r.style.border="0",r.scrolling="no",{slot:e,advertiserId:0,campaignId:0,creativeId:0,isEmpty:!(r.frameBorder="0"),lineItemId:0,size:null,sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0}),o=e.getTargeting(h.kvp("adb_adid"))[0];i?r.src="about:blank":(s.safeFrameConfig&&s.safeFrameConfig.sandbox&&(r.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),r.src="https://prod.adspsp.com/iframe.html"),t.innerHTML="",t.appendChild(r),o?(r.contentDocument.open(),r.contentDocument.write(i?'<script>try { top.AdBridg.render(document, "'+o+'") } catch(e) {}<\/script>':'<html><head><script type="text/javascript" src="https://prod.adspsp.com/adbpmc2.js"><\/script><script type="text/javascript">AdBridgServe("'+location.href+'", "'+o+'");<\/script></head><body></body></html>'),a.trigger("slotRenderEnded",n)):"function"==typeof(t=h.libSettings().getHouseAd)?t(e,function(e,t){r.contentDocument.open(),r.contentDocument.write(e),n.isEmpty=!1,a.trigger("slotRenderEnded",f.assign(n,t))}):(f.log(e.getAdUnitPath(),"nothing to render"),n.isEmpty=!0,a.trigger("slotRenderEnded",n))})}},AdBridg.gptStub={cmd:{push:function(e){e()}},pubads:function(){return s},defineSlot:function(e,t,r){var i={sizes:t,targeting:{},addService:P,getSlotElementId:function(){return r},getAdUnitPath:function(){return e},setTargeting:function(e,t){i.targeting[e]=t},getTargeting:function(e){return[].concat(i.targeting[e],s.targeting[e]).filter(Boolean)},getTargetingMap:P};return i},enableServices:P,display:P},("function"==typeof h.libSettings().nogpt&&h.libSettings().nogpt()||f.qs("adb_nogpt"))&&(f.log("Disabling GPT"),AdBridg.gpt=AdBridg.gptStub);function g(e){return function(){var d=f.mock();J||(J=!0,v.on("icu.iab",X)),f.each(e,function(e){var t,r,i,n,o,a,s=e.getSlotElementId(),s=document.getElementById(s);s&&(s.innerHTML="",r=t=!1,n=i=0,f.each(e.getSizes(),function(e){"fluid"===e?t=!0:(0===n||"small"===d&&n>e.height||"large"===d&&n<e.height||"native"===d&&Math.random()<.5)&&(i=e.width,n=e.height)}),t&&!n?(r=!0,i="100%",n=f.random(90,600)+"px"):(i+="px",n+="px"),o="border: 0pt none; display: inline-block; width: "+i+"; height: "+n+"; background: #dbbdf1;",(a=document.createElement("div")).setAttribute("style",o),a.innerText=i+" x "+n+" // "+e.getAdUnitPath(),s.appendChild(a),t&&"native"===d&&setTimeout(function(){i="100%",n=f.random(90,600)+"px",a.style.width=i,a.style.height=n,a.innerText=i+" x "+n+" (native resize) // "+e.getAdUnitPath()},f.random(100,500)),me({mocked:!0,slot:e,isEmpty:!1,size:r?"fluid":[i,n],serviceName:"publisher_ads",advertiserId:1,campaignId:1,comoanyIds:null,creativeId:1,creativeTemplateId:null,isBackfill:!1,labelIds:null,lineItemId:1,slotContentChanged:!0,sourceAgnosticCreativeId:1,sourceAgnosticLineItemId:1}))})}}function m(i,n,d){return f.wrapAsync(function(s){D("ra",function(){var t,e,o=[],a={},r=(s.eachUnit(function(t){var e=t.toPrebidAdUnitCode();if(a[e]={},s===c){if(!t.get("gpt_slot")||t.get("preload_used"))return;t.set("preload_used",1)}try{var r=h.libSettings().post_auc_ufilter;if(r){var i=r(t,d);if(i)return void f.log("Ignoring",t.alias,t.get("dom_id"),i)}}catch(e){f.err("Err auc unit filter ",t.alias,t.get("dom_id"),e)}try{var n=t.getWinner();t.settings.require_bid&&!n?(f.log("Discarding unit ",t.alias,t.get("dom_id")," -- requires bid but had none."),f.thread(function(){AdBridg.destroySlots([t.get("gpt_slot")])})()):(n&&(n.config.unit.setImpData("adb_mtype",n.extras.mediaType),t.gptTargetSet(n)),a[e]=function(e){var t,r={},i=h.libSettings().bid_strategy,n=e.getWinner(),o=e.get("gpt_slot"),a=(te(o),v.trigger("gpt.set_targeting",e,o),e.get("adb_imp_data"));if(a&&(t=o.getTargeting("adb_imp")||[],f.isarr(t)||(t=[t]),f.each(a,function(e){e&&-1===t.indexOf(e)&&t.push(e)}),t.length&&o.setTargeting(h.kvp("adb_imp"),t)),h.libSettings().track_alias&&o.setTargeting(h.kvp("adb_cfg"),e.alias),n){AdBridg.gpt!==window.googletag&&(o.setTargeting("unit",e),(h.libSettings().unsafeBidders||"").split(",").filter(function(e){return e===n.config.bidder_name}).length&&o.setTargeting("unsafe",!0));var a=(ee[n.id]=n).config.dfp_bidder_name||n.config.bidder_name,s=n.cpm,d=h.libSettings().cur,c=(d&&(d.exclude&&-1<d.exclude.indexOf(n.config.bidder_id)?f.log("Currency conversion skipped: ",n.config.bidder_name):(f.log("Currency conversion: USD = ",s,"; Rate = ",d.rate,"; DFP = ",d.rate*s),s*=d.rate)),f.toRange(s,i)),u=c.kv,d=(v.trigger("gpt.modify_hbc",e,o,{bid:n,range:c,mod:function(e){return s=e,c=f.toRange(s,i),u=c.kv,c}}),f.qs("adb_force_bidder")?(a="force",u=""):f.qs("adb_force_sf_bidder")&&(a="forcesf",u=""),f.qs("adb_force_pbuc")&&(a="force_pbuc",u="",f.log("Forcing PBUC")),h.libSettings().vs_threshold);if("function"==typeof d)try{var p=d(s);p&&o.setTargeting(h.kvp("adb_vs"),p)}catch(e){f.err("HVfail",e)}var d=h.kvp("adb_bdr"),p=h.kvp("adb_hbc"),l=h.kvp("adb_adid");r[d]=[a],r[p]=[u],r[l]=[n.id],o.setTargeting(d,r[d]),o.setTargeting(p,r[p]),o.setTargeting(l,r[l]),h.libSettings().track_mtype&&n.extras&&n.extras.mediaType&&o.setTargeting(h.kvp("adb_mtype"),[n.extras.mediaType]),f.log("Set GPT targeting for ",o.getAdUnitPath()," / ",o.getSlotElementId(),": ",a,u),ie(o,s)}else o.setTargeting(h.kvp("adb_bdr"),["none"]),ie(o,-1),v.trigger("gpt.no_hbc",e,o,function(e){return f.toRange(e,i)},function(e,t){re(e),ie(e,t)});return r}(t),o.push(t.get("gpt_slot")))}catch(e){f.err("Err setting unit ",t.alias,t.get("dom_id"),e)}}),v.trigger("gpt.set_pb_targeting",a),E.concat(o));if(E=[],y(r),"function"==typeof i&&i(s),z&&!(r=oe("AC",r)).length)return f.err("All units cancelled",s.id);(z||d)&&(B(),t=[],f.each(r,function(e){t.push(e.getAdUnitPath()+"#"+e.getSlotElementId())}),f.log(k,"GPT Batch: ",r.length,t),(e=h.libSettings("gpt_refresh_options",n))&&(n=e),v.trigger("gpt.before_request",r,n,d),f.mock()?(e=Math.floor(1900*Math.random())+100,f.logl("mock","bypass gpt",e,d),setTimeout(g(r),e)):AdBridg.gpt.pubads().refresh(r,n),v.trigger("gpt.request_adbridg",s,d))})})}function F(){var e,t;Z&&(e=A.length,(A=oe("PT",A)).length?(f.isdebug()&&(t=[],f.each(A,function(e){t.push(e.getAdUnitPath()+" / "+e.getSlotElementId())}),f.log("Non-bid request with",A.length," units: ",t)),D("rp",function(){var e,t,r=A;A=[],r.length&&(B(),y(r),f.log(k,"GPT PT Batch: ",r.length),e=h.libSettings("gpt_refresh_options")||{},v.trigger("gpt.before_request",r,e),f.mock()?(t=Math.floor(1900*Math.random())+100,f.logl("mock","bypass gpt-pt",t),setTimeout(g(r),t)):AdBridg.gpt.pubads().refresh(r,e),v.trigger("gpt.request_passthrough",r))})):e&&f.err("PT units cancelled"))}function y(e){f.each(e,function(e){var t=e.getSlotElementId(),r=(j[t]||0)+1,t=(j[t]=r,h.libSettings().track_imps);if(t)try{"string"!=typeof t&&(t="1:1-11");for(var i=Math.floor(f.toRange(r,t).kv.split("-")[0]),n=e.getTargeting("adb_imp"),o=n.length-1;0<=o;--o)String(n[o]).match(/^\d+$/)&&n.splice(o,1);n.push(i),e.setTargeting(h.kvp("adb_imp"),n)}catch(e){f.err("Counter failed: ",e)}})}function M(e){return n[e.getSlotElementId()]}function _(e){f.log("Locked slot: ",e.getSlotElementId()),n[e.getSlotElementId()]=!0}function W(e,i,n){var o=[],o=Number(e[0])===e[0]?[e]:[].concat(e),a=[];if(f.each(o,function(e,t){var r;"string"==typeof e[t]?(0!==(r=e[t].split("x"))[0]&&0!==r[1]||f.err("0 size in",i,n,e[t]),e[t].match(/^\d+x\d+$/)||a.push(t)):(0!==e[0]&&0!==e[1]||f.err("0 size in",i,n,e.join?e.join("x"):e),o[t]=e.join("x"))}),a.length)for(var t=a.length-1;0<=t;--t)o.splice(t,1);return o}function L(e,t,r){return e?(e=e.replace(/\$\{AUCTION_PRICE\}/g,t),r&&r.clickThrough?e.replace(/\$\{CLICKTHROUGH\}/g,r.clickThrough):e):""}function G(e){for(var t,r,i=T.length-1;0<=i&&!(t=(r=T[i]).findUnit(e));--i);return!!(t=!t&&c?(r=c).findUnit(e):t)&&{auction:r,unit:t}}function t(){AdBridg.cmd.unshift(function(){window.AdBridg.lock("window.focus"),_e<=99&&(_e+=1),b.meta("wb",_e)})}function V(){AdBridg.cmd.push(function(){window.AdBridg.unlock("window.focus",!0),b.meta("wb",0)})}var a,s,K,J=!1,X=function(e,t){for(var r=AdBridg.gpt.pubads().getSlots(),i=0;i<r.length;++i){var n=r[i];if(n.getSlotElementId()===t.d)return f.log("MOCK VIEWED SLOT!",t.d),void he({mocked:!0,slot:n})}},Y=!1,H=[],c=!1,Q=[],$=!1,w=[],d=[],x={},I={},u={},S={},Z=!1,A=[],E=[],ee={},T=[],k="Workflow |",z=!0,e=h.libSettings().sra_if,te=((e&&!e()||h.libSettings().no_sra)&&(z=!1),function(e){var t,r,i=h.libSettings().gpt_clear_kvps,n=[],o=e.getTargetingMap(),a=!1;for(r in o)o.hasOwnProperty(r)&&("adb_"===r.substr(0,4)||i&&0<=i.indexOf(r)?a=!0:n.push([r,o[r]]));if(a)for(e.clearTargeting(),t=0;t<n.length;++t)e.setTargeting(n[t][0],n[t][1]);re(e)}),re=f.wrapAsync(function(e){var t=h.libSettings().gpt_exclusions;if(t){for(var r=!1,i=e.getCategoryExclusions(),n=i.length-1;0<=n;--n){var o=i[n];t.hasOwnProperty(o)&&(i.splice(n,1),r=!0)}if(r)for(e.clearCategoryExclusions(),n=0;n<i.length;++n)e.setCategoryExclusion(i[n])}}),ie=f.wrapAsync(function(e,t){var r=h.libSettings().gpt_exclusions;if(r){var i,n=[];for(i in r){var o=r[i];("function"==typeof o&&o(e,t)||o<=t)&&(e.setCategoryExclusion(i),n.push(i))}n.length&&f.log("Set GPT category exclusions for ",e.getAdUnitPath()," / ",e.getSlotElementId(),": ",n)}}),ne={},j={},n={},oe=(AdBridg.has_gpt_lock=M,f.wrapAsync(function(n,e,o){var a=h.libSettings().max_imp_ctr,s=("function"==typeof a&&(a=a()),[]);return f.each(e,function(e){var t=e&&e.getSlotElementId?e:e.get("gpt_slot");if(t){var r=t.getSlotElementId();if(!u[r]){if(O("F"+n,r))return f.log("Slot excluded; element hidden",r);if(o){if(M(t))return f.log("Cannot refresh locked dom_id: ",t.getSlotElementId());if(a){var i=j[r]||0;if(a<=i)return ne[r]?f.log("Slot excluded; too many imps: ",t,i+" > "+a):f.err("Slot imp max: ",t.getAdUnitPath(),r,a)}}i=[];if(v.trigger("gpt.filter_slot",n,t,o,i),i.length)return f.log("Module blocking",n,t,i);s.push(e)}}}),s})),O=function(e,t,r){var i=f.dom_invisible(t);if(i){r=r||0;var n=h.libSettings().block_invisible;if(n="function"==typeof n?n(e,t,i):n)return f.logl("dei","DEI.R",e,t,i,r),i;f.logl("dei","DEI.A",e,t,i,r)}return!1},ae=(window.AdBridg.defineSlot=f.wrapAsync(function(e,t,r){var i=O("DS",r);if(i)return f.log("Slot definition blocked: ",r,i),!1;i=h.libSettings().block_slot;if("function"==typeof i)try{if(i(e,r))return void f.err("Blocking slot:  ",e," with dom_id: ",r)}catch(e){f.err("DefineOverride",e)}i=h.libSettings().override_define;if("function"==typeof i)try{var n=i(e,t,r);if(!1===n)return f.log("Param override prevented defineSlot",e," dom_id=",r),!1;"object"==typeof n&&(n.dfp_ad_unit_path&&(e=n.dfp_ad_unit_path),n.dfp_sizes&&(t=n.dfp_sizes),n.dom_id&&(r=n.dom_id))}catch(e){f.err("DefineOverride",e)}t&&(!f.isarr(t)||t.length)||(b.ctr("dsea"),t=[1,1]);var o,a,s,i=AdBridg.gpt.defineSlot(e,t,r);return i&&(i.addService(AdBridg.gpt.pubads()),_(i),o=(n=W(t,e,r)).join(","),(a=new p({dom_id:r,gpt_slot:i,gpt_sizes:o,imp_ctr:(j[r]||0)+1})).restrictSizesTo(n),x[r]=o,n=400,"object"==typeof(s="function"==typeof(s=h.libSettings().lazy)?s(a,i,r,h.libSettings()):s)?(s.distance&&(n=s.distance),s.duration&&s.duration):"number"==typeof s&&(n=s),s&&(f.log("Requiring lazy: ",r,"distance=",n),a.set("lock.lazy",1),s=h.libSettings().lazy_measurement_filter,f.dom(r,n,0,function(){f.logl("wf",k,"unit triggered lazy load",a.alias,a.get("dom_id")),a.set("lock.lazy",!1),z?AdBridg.serve():AdBridg.display(r)},s,h.libSettings().lazy_compatible_collapse)),w.push(a),f.log(k,"Defined slot: ",e,r,o),v.trigger("gpt.define",a,i,e,t,r),h.libSettings().allow_serve_from_display&&S[r]&&(f.logl("wf",k,"triggering serve from define after display",r),AdBridg.serve()),z||(n="function"==typeof(n=h.libSettings().nonsra_poll)?n():n)&&(f.log("Nonsra poll for DOM ids"),se(r))),i}),window.AdBridg.defineOutOfPageSlot=f.wrapAsync(function(e,t){var r,i=AdBridg.gpt.defineOutOfPageSlot(e,t);return i&&(i.addService(AdBridg.gpt.pubads()),_(i),r=new p({dom_id:t,gpt_slot:i,gpt_sizes:""}),w.push(r),f.log(k,"Defined OOP slot: ",e,t),v.trigger("gpt.define",r,i,e,!1,t),h.libSettings().allow_serve_from_display&&S[t]&&(f.logl("wf",k,"triggering serve from defineOOP after display",t),AdBridg.serve())),i}),{}),se=function(t){ae[t]=ae[t]||{ct:0,tx:-1};var r=ae[t];clearTimeout(r.tx),10===r.ct?f.log("Nonsra display poll is giving up on",t):(r.ct+=1,r.tx=setTimeout(f.wrapAsync(function(){var e;S[t]||(e=!!document.getElementById(t),f.log("Nonsra display poll #"+r.ct+": ",t,"; display received =",!!S[t],"; dom exists =",e),e?(f.log("Nonsra issuing display from poll",t),AdBridg.display(t)):se(t))}),1e3))},de=(window.AdBridg.display=f.wrapAsync(function(e,t,r){if(r?(AdBridg.defineSlot(e,t,r),AdBridg.serve()):r=e,S[r]=!0,f.logl("wf",k,"display received",r),h.libSettings().allow_serve_from_display&&w.length&&(f.logl("wf",k,"triggering serve from display",r),AdBridg.serve()),Z=!0,!z){w.length&&(d=d.concat(w),w=[]);for(var i=d.length-1;0<=i;--i){var n,o=d[i].get("dom_id");S[o]&&((n=d.splice(i,1)[0]).get("gpt_sizes")?w.push(n):f.logl("Ignoring display for unit with no sizes",o))}return w.length?(f.logl("wf",k,"nonsra issuing serve",w.length),void pe(function(i,n){D("dn",function(){i?i.eachUnit(function(e){f.logl("wf",k,"display resolved",e.get("dom_id"),"auction=",i),AdBridg.gpt.display(e.get("dom_id")),v.trigger("gpt.request_nosra",e.get("dom_id"))}):(f.logl("wf",k,"display resolved",n," as passthrough"),AdBridg.gpt.display(n),v.trigger("gpt.request_nosra",n));var e=d.length;if(e){f.logl("wf",k,"nonsra units queued: ",e);for(var t=e-1;0<=t;--t){var r=d[t].get("dom_id");if(S[r]){setTimeout(function(){AdBridg.display(r)},0);break}}}})})):void f.logl("wf",k,"nonsra display waiting on definition/serve")}D("ds",function(){B(),f.logl("wf",k,"display resolved",r),AdBridg.gpt.display(r)}),F()}),window.AdBridg.refresh=f.wrapAsync(function(e,t,r){var i,n,o,a,s,d,c=AdBridg.gpt.pubads().getSlots();if(e){for(i=e.length-1;0<=i;i--)-1===c.indexOf(e[i])&&(f.err("RFCancelInvalidSlot",e[i].getSlotElementId()),e.splice(i,1));if(!e.length)return}else e=c;if(h.libSettings().allow_serve_from_refresh&&w.length){for(i=e.length-1;0<=i;i--)for(var u=w.length-1;0<=u;u--)e[i]===w[u].get("gpt_slot")&&e.splice(i,1);if(AdBridg.serve(),!e.length)return}v.trigger("gpt.filter_refresh",e,t),e.length&&(n=e.length,e=oe("RF",e,!0),f.logl("wf",k,"refresh: ",n,"slots requested; ",n-e.length,"filtered out;",e.length,"remaining."),e.length?(o=new l,!(a=!0)!==r&&"no_auction"!==h.libSettings().refresh||(a=!1),s=[],d=[],f.each(e,function(e){try{te(e)}catch(e){return f.err("Failed to clear slot: ",e)}var t,r=e.getSlotElementId(),i=(_(e),x[r]||""),n=(I[r]&&(n=(t=I[r].adb||I[r].gpt)&&"0x0"!==t&&t.match(/^\d{2,}x\d{2,}\d/),f.logl("sz","Refresh size restriction for",r,"=",t,"; is_valid=",n),n&&(i=t)),new p({dom_id:r,gpt_slot:e,gpt_sizes:i,is_refresh:!0,imp_ctr:(j[r]||0)+1}));a&&(h.configureUnit(n),f.logl("sz","Refresh restricting sizes to ",i),n.restrictSizesTo(i.split(","))),n.hasBidReqConf()?o.addUnit(n):(d.push(e.getAdUnitPath()+" / "+e.getSlotElementId()),s.push(e))}),s.length&&(f.log("Refreshing",s.length,"non-bid units: ",d),D("rn",function(){B(),y(s),f.log(k,"GPT RF Batch: ",s.length);var e=h.libSettings("gpt_refresh_options",t);e&&(t=e),v.trigger("gpt.before_request",s,t,!0),f.mock()?(e=Math.floor(1900*Math.random())+100,f.logl("mock","bypass gpt-pt-rf",e),setTimeout(g(s),e)):AdBridg.gpt.pubads().refresh(s,t),v.trigger("gpt.request_passthrough",s,!0)})),o.hasUnit()&&(T.push(o),o.execute(m(null,t,!0)))):n&&f.err("RF units cancelled"))}),{}),e=f.wrapAsync(function(e){var t=String(e.message||e.data);if("string"==typeof e.data)try{var r=JSON.parse(e.data);if("Prebid Request"===r.message)return void AdBridg.render({safeframe:!0,source:e.source,origin:e.origin,pbuc:!0},r.adId)}catch(e){}var r=t.substr(0,9),t=t.substr(10);return"adbsrverr"===r?f.err("Safeframe error: ",t):"adbsrvlog"===r?f.log("Safeframe: ",t):"adbvidend"===r?v.trigger("bid.outstream_end",t):"adbductag"!==r?"adbconfbl"===r?v.trigger("adb.confiant_block_sf",t):"adbsrvreq"===r?de.hasOwnProperty(t)?f.err("SafeframeDupe:",t):void AdBridg.render({safeframe:!0,source:e.source},t):void 0:(t=JSON.stringify((r=ge(r=t),t={},r&&(r=r.pbjsBid.adserverTargeting,t.targetingMap=r,t.hbPb=r.hb_pb,t.size=r.hb_size),t)),void e.source.postMessage("adbductape:"+t,e.origin))}),C=(window.addEventListener?window.addEventListener("message",e,!1):document.attachEvent&&window.attachEvent("onmessage",e),window.AdBridg.render=f.wrapAsync(function(t,r,e){var i=ee[r],n=!1;if(i||(n=!0,i=ge(r))){n?f.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," [override] creative from ",i.config.bidder_name," BR ",i.config.id):(o=i._origin?"(pooled bid from "+i._origin.config.unit.unique_id+")":"",f.log("Unit ",i.config.unit.alias," rendering ",i.width+"x"+i.height," creative from ",i.config.bidder_name,o," BR ",i.config.id));var o=i.config.unit.get("dom_id"),a=f.dom_invisible(o),a=(O("AR",o,i.config.bidder_id),a&&f.log("AdBridg render detected invisible container at time of render:",o,a),{config:i.config.unit.alias,bidder:i.config.bidder_name,size:i.width+"x"+i.height,extras:i.extras,dom_id:o}),s=(n&&(a.override=1),JSON.stringify(a)),d=(i.creative=L(i.creative,i.cpm,e),i.creative_url=L(i.creative_url,i.cpm,e),i.config.unit.bidRendered(i,a),0),e=e&&e.pbuc;if(t.pbuc)i.creative&&(i.creative="\x3c!-- AdBridg Delivery PBUC (SF): "+s+" --\x3e"+i.creative),t.source.postMessage(JSON.stringify({message:"Prebid Response",ad:i.creative,adUrl:i.creative_url,adId:r,width:i.width,height:i.height}),t.origin),d=1,v.trigger("pbevt.render_success",null,i,r);else if(t.safeframe&&t.source&&t.source.postMessage){var c=h.libSettings().pmmutatefn;if(!i.creative)return v.trigger("pbevt.render_fail",r,"noAd"),f.err("AD1245F Safeframe render fail: no creative");var u={ad:"\x3c!-- AdBridg Delivery (SF): "+s+" --\x3e"+i.creative},p=JSON.stringify(u);"function"==typeof c?u=c(i,u):v.trigger("adb.confiant_pmmutate",i,u);d=JSON.stringify(u)!==p?2:3;t.source.postMessage("adbsrvad:"+JSON.stringify(u),"*"),v.trigger("pbevt.render_success",null,i,r)}else if(i.creative){var c=h.libSettings().pubrenderfn,p="pubrenderfn",u={},l=(v.trigger("adb.get_ff_renderer",u),Object.keys(u)),l=(l.length&&(c?f.log("Module renderers ignored; dbmock pubrenderfn set"):(p=l[0],1<l.length&&f.err("More than one module provided renderer; using",p,"of",JSON.stringify(l)),c=u[p])),!1);"function"==typeof c&&(t.write("\x3c!-- AdBridg Delivery (ER="+p+"): "+s+" --\x3e"),c(t,i.creative,i.config.bidder_name,i.width,i.height,i,e)?(l=!0,f.log("Creative rendered externally"),d=e?"B":4):f.log("External render skipped")),l||(t.write("\x3c!-- AdBridg Delivery: "+s+" --\x3e"),t.write(i.creative),t.close(),d=e?8:5),v.trigger("pbevt.render_success",t,i,r)}else if(i.creative_url)try{var g=f.iiframe();g.width=i.width,g.height=i.height,g.style.display="inline",g.style.overflow="hidden",g.src=i.creative_url,t.body.appendChild(document.createComment("AdBridg Delivery: "+s)),t.body.appendChild(g),d=e?9:6,v.trigger("pbevt.render_success",t,i,r)}catch(e){return v.trigger("pbevt.render_fail",r,"exception",e.message),f.err("AD1245F Delivery failure from ",i.config.bidder_name," / ",i.config.bidder_unit_id,e)}else{if("function"!=typeof i.render)return v.trigger("pbevt.render_fail",r,"noAd"),f.err("AD1245F No creative from ",i.config.bidder_name," / ",i.config.bidder_unit_id);i.rawbid.adUnitCode=document.getElementById(o).children[0].id,document.getElementById(i.rawbid.adUnitCode).innerHTML="";try{i.render(),f.rec("winner.render:"+i.id),v.trigger("pbevt.render_success",null,i,r)}catch(e){return v.trigger("pbevt.render_fail",r,"exception",e.message),f.err("AD1245F Renderer",e)}d=e?"A":7}b.bidRendered(i,d,n);u=i.resize_pad_top||!1,p=document.getElementById(o);if(p.style.textAlign="center",(l=(c=p).getElementsByClassName("adbridg-dyn-pad")).length&&f.each(l,function(e){e.parent.removeChild(e)}),u&&((l=f.prepend(c,"span")).className="adbridg-dyn-pad",l.innerHTML="&nbsp;",l.style="display:block;width:1px;height:"+u+"px;overflow:hidden;",(l=document.createElement("span")).className="adbridg-dyn-pad",l.innerHTML="&nbsp;",l.style="display:block;width:1px;height:"+u+"px;overflow:hidden;",c.appendChild(l)),t.safeframe)try{var m=p.getElementsByTagName("iframe");f.each(m,function(e){e.contentWindow===t.source&&(f.logl("RS","RS SF element: ",e.id,i.width,i.height),f.resize_element(e,i.width,i.height),String(e.parentNode.id).match(/google_ads_iframe.*container/)&&(f.logl("RS","RS SF parent: ",e.parentNode.id,i.width,i.height),f.resize_element(e.parentNode,i.width,i.height)))})}catch(e){f.err("Frame resize fail: ",e)}else t.defaultView&&t.defaultView.frameElement&&(t.defaultView.frameElement.width=i.width,t.defaultView.frameElement.height=i.height),f.logl("RS","RS iframe: ",i.width,i.height),f.resize_iframe(window,t,i.width,i.height);h.libSettings().refresh_keep_size&&(I[o]||(I[o]={gpt:"",adb:""}),I[o].adb=a.size,f.log("SIZE REFRESH KEEPING ADB: ",o,I[o]));s=h.libSettings().post_render;"function"==typeof s&&s(i)}else v.trigger("pbevt.render_fail",r,"missingDocOrAdid","Error trying to write ad Id :"+r+" to the page. Missing document or adId"),f.err("AD1245F Render failed for ID ",r)}),window.AdBridg.getSizes=f.wrapAsync(function(e){var t=[];return f.each(e,function(e){t.push([e.viewport,e.sizes])}),Se(t)}),[]),R=(R=f.qs("adb_restrict_size"))&&R.split(","),ce=(window.AdBridg.sizeMapping=f.wrapAsync(function(){var e,n=[],o=AdBridg.gpt.sizeMapping(),a={addSize:f.wrapAsync(function(e,t){if(R){for(var r=t.length-1;0<=r;--r){var i=t[r].join("x");0<=R.indexOf(i)&&(f.log("adb_restrict_size - Size ignored",i),t.splice(r,1))}if(!t.length)return a}return o.addSize(e,t),n.push([e,t]),a}),build:f.wrapAsync(function(){return e=o.build(),C.push({gpt_map:e,sizes:n}),e})};return a}),window.AdBridg.useSizeMapping=f.wrapAsync(function(e,t,r){var i,n=!1,o=e.getSlotElementId(),a=e.getAdUnitPath();for(e.defineSizeMapping(t),i=C.length-1;0<=i;--i)if(C[i].gpt_map===t){n=C[i].sizes;break}if(n){var s=Se(n),s=W(s,a,o),d=s.join(","),c=(x[o]=d,r||!1);if(!c)for(i=w.length-1;0<=i;--i)if(w[i].get("gpt_slot")===e){c=w[i];break}if(!c)return f.err("No unit for size map: ",a,o);c.set("gpt_sizes",d),c.restrictSizesTo(s),x[o]?f.log("Applied size mapping to ",o," / ",a,": ",d):(u[o]=1,f.log("Excluding unit ",o," / ",a," because it has no valid sizes"))}else f.err("Size mapping not found: ",a,o)}),window.AdBridg.resetInternals=function(){},!(window.AdBridg.destroySlots=function(e){e=e||AdBridg.gpt.pubads().getSlots();var r=[];return f.each(e,function(e){var t;e&&(t=e.getSlotElementId(),delete j[t],delete x[t],delete I[t],delete u[t],delete n[t],delete S[t],f.undom(t),v.trigger("gpt.destroy",e,t),r.push(t))}),f.log("Destroyed slots: ",r),AdBridg.gpt.destroySlots(e)})),B=function(){var e;ce||(ce=!0,"function"==typeof(e=h.libSettings().before_gpt)&&f.wrapAsync(e)(),v.trigger("gpt.before_enable_services"),AdBridg.gpt.enableServices(),v.trigger("gpt.after_enable_services"))},ue=!1,pe=f.wrapAsync(function(e){f.logl("wf",k,"serve called with",w.length,"pending units");for(var t=!1,r=(B(),!1),i=0;w.length>i;){var n=w.shift(),o=n.get("lock.lazy"),a=n.get("lock.batch");if(o||a)f.logl("wf",k,"serve skipped ("+(o?"lazy":"batch")+")",n.alias,n.get("dom_id")),i+=1,w.push(n);else{a=n.get("dom_id");if(!u[a]&&O("AS",a))f.err("Slot rejected before auction, element hidden:",a);else if(h.configureUnit(n),n.hasBidReqConf()){if(c){var s=Q.indexOf(n.id);if(0<=s){var d=!1;if(c.eachUnit(function(e){var t,r,i;e.id===n.id&&(d=!0,Q.splice(s,1),f.log("Proxy into preload ",n.alias),t=n.get("gpt_slot"),r=n.get("dom_id"),i=x[r]||n.get("gpt_sizes")||"",e.set({dom_id:r,gpt_slot:t,gpt_sizes:i}),e.restrictSizesTo(i.split(",")),v.trigger("unit.pre_attach",e))}),d){r=!0;continue}}}(t=t||new l).addUnit(n)}else z?A.push(n.get("gpt_slot")):(y([n.get("gpt_slot")]),f.thread(e)(!1,n.get("dom_id")))}}(t||c)&&h.libSettings().gpt_keep_oop&&A.length&&(f.log("Batching passthrough units with auction units"),E=E.concat(A),A=[]),t&&(T.push(t),t.execute(m(e)),t=!1),r&&!ue&&(ue=!0,Ie(m())),F()}),le=!1,ge=(window.AdBridg.serve=function(e){if(clearTimeout(le),z){f.logl("wf",k,"queuing serve");var t=h.libSettings().batch_delay;if(0===(t="function"==typeof t?t(w):t))return f.log("Starting auctions ASAP."),pe(e);t=t||100,le=setTimeout(function(){pe(e)},t)}else for(var r=w.length-1;0<=r;--r){var i=w[r].get("dom_id");if(S[i]){setTimeout(function(){AdBridg.display(i)},0);break}}},function(e){for(var t=T.length-1;0<=t;--t){var r=T[t].getBid(e);if(r)return r}return!1}),me=f.wrapAsync(function(t){var e=t.slot.getSlotElementId();!t.isEmpty&&O("RE",e)&&f.log("Slot rendered from GPT, but element hidden by CSS:",e);try{r=t.slot,f.log("Unlocked slot: ",r.getSlotElementId()),n[r.getSlotElementId()]=!1,te(r)}catch(e){f.err("Unlock failed")}var r=j[e],i={};if(v.trigger("gpt.render_raw",t,r,i),!i.stop){i=G(function(e){return e.get("gpt_slot")===t.slot});if(h.libSettings().refresh_keep_size&&t.size&&2===t.size.length&&(I[e]||(I[e]={gpt:"",adb:""}),I[e].gpt=t.size.join("x")),i){if(!i.auction)return f.err("AUQ",t.slot.getAdUnitPath(),t.slot.getSlotElementId());AdBridg.gpt===window.googletag?b.gptRendered(i.auction,i.unit,t):b.enhRendered(i.auction.instancectr,i.unit.id,t),v.trigger("gpt.render",i.unit,t,r),f.qdusp()}else v.trigger("gpt.render_pt",!1,t,r)}}),fe=f.wrapAsync(function(e){v.trigger("gpt.loaded_raw",e)}),he=f.wrapAsync(function(t){v.trigger("gpt.viewed_raw",t);var e=G(function(e){return e.get("gpt_slot")===t.slot});if(e){b.gptViewed(e.auction,e.unit);try{var r=h.libSettings().post_view;"function"==typeof r&&r(t,e.unit)}catch(e){f.err("PostView fail",e)}v.trigger("gpt.viewed",t.slot,e.unit);r=t.slot.getSlotElementId();O("VE",r)&&f.log("Slot viewed from GPT, but element hidden by CSS:",r)}}),o=[],be={},ve=!1,r=(window.AdBridg.lock=function(e){if(be[e])return be[e]=null,f.log("-== GPT lock already cleared: ",e);f.log("-== GPT locked by: ",e),o.push(e)},window.AdBridg.unlock=function(e,t){for(var r=!1,i=0;i<o.length;++i)if(o[i]===e){f.log("-== GPT lock cleared: ",e),o.splice(i,1),r=!0;break}r||t||(be[e]=!0,f.log("-== GPT unrecognized lock cleared: ",e)),ye()},[]),D=function(e,t){r.push({n:e,f:f.wrapAsync(t)}),ye()},ye=function(){if(!o.length&&!ve){for(ve=!0;r.length;)r.shift().f();setTimeout(function(){ve=!1,r.length&&ye()},0)}},_e=0;try{window.document.addEventListener("visibilitychange",function(e){(document.hidden?t:V)()})}catch(e){f.log("-== GPT lock : Page API not supported, using fallback"),window.addEventListener?(window.addEventListener("blur",t),window.addEventListener("focus",V)):window.attachEvent&&(window.attachEvent("onblur",t),window.attachEvent("onfocus",V))}f.isdebug()&&(AdBridg.auctions=T,AdBridg.utils=f);function we(){return T}var xe=f.wrapAsync(function(){clearTimeout(K);var e={delay:!1};if(v.trigger("adb.init_check",e),"number"==typeof e.delay)K=setTimeout(xe,e.delay);else{v.trigger("adb.init"),AdBridg.gpt.pubads().addEventListener("slotRenderEnded",me),AdBridg.gpt.pubads().addEventListener("slotOnload",fe),AdBridg.gpt.pubads().addEventListener("impressionViewable",he),Y=!0;e=h.libSettings().initfn;for(e&&AdBridg.cmd.push(e);H.length;){var t=H.shift();AdBridg.cmd.push(t)}}}),Ie=(window.AdBridg.lazy=function(e,t,r,i){"function"==typeof r&&(i=r,r=0),f.dom(e,t,r,i)},f.log("First execution."),h.afterConsent(function(e){if(!e||!e.gdprApplies||e.consentString){e=h.libSettings().preload&&h.libSettings().preload()||[];if(e.length){function t(r){function i(e){function t(e){2===e.length&&1<e[0]&&1<e[1]?r.push(e):f.err("Invalid preload size: ",e)}var r=[];return f.isarr(e)&&(f.isarr(e[0])?f.each(e,t):t(e)),r}var n=i(r.size||[]);return function(){var t,e=AdBridg.defineSlot(r.gpt_path,n,r.dom_id);f.isarr(r.size_map)&&(t=AdBridg.sizeMapping(),f.each(r.size_map,function(e){t.addSize(e.viewport,i(e.sizes))}),t=t.build(),e.defineSizeMapping(t),AdBridg.useSizeMapping(e,t)),AdBridg.serve()}}for(var r=AdBridg.cmd.length;0<=r;r--){var i=AdBridg.cmd[r];i&&i.gpt_path&&AdBridg.cmd.splice(r,1,t(i))}e&&e.length&&(c=new l,f.each(e,function(e){if(e=parseInt(e),f.log("Preloading",e),e){var t=new p;if(h.configureUnit(t,e),!t.hasBidReqConf())return f.err("Preload bad id",e);Q.push(e),c.addUnit(t)}}),c.hasUnit()&&(f.log("Preload kickoff",c),c.execute(f.wrapAsync(function(e){f.log("Preload complete"),$&&$(e)}))))}}}),function(e){c.isDone()?e(c):$=e});h.afterConsent(function(){AdBridg.gpt.cmd.push(function(){f.log("Initializing. SRA is",(z?"enabled":"disabled")+"."),z&&(AdBridg.gpt.pubads().enableSingleRequest(),AdBridg.gpt.pubads().disableInitialLoad()),xe()})});f.wrapAsync(function(){for(b.init(),AdBridg.cmd.push=AdBridg.cmd.unshift=function(t){if(f.qs("adb_critfail"))throw new Error("Simulating critical failure");if("function"==typeof h.libSettings().cmd_override)try{var e=h.libSettings().cmd_override(t);if(!e)return void f.log("AdBridg command cancelled",t);t=e}catch(e){f.err("CmdOverrideFail",e)}var r,i;if("object"==typeof t&&((t=f.copy(t)).targeting&&(r=t.targeting,delete t.targeting,f.log("Publisher targeting set queued:",r),i=f.genID("gpt_targeting_"),AdBridg.lock(i),v.trigger("pub.set_targeting",r),AdBridg.gpt.cmd.push(function(){f.each(r,function(e,t){AdBridg.gpt.pubads().setTargeting(t,e)}),f.log("Publisher targeting set complete:",r),AdBridg.unlock(i)})),t.config&&(h.proc(t.config),delete t.config),!t.gpt_path&&t.events&&(f.each(t.events,function(e,t){v.on(t,e)}),delete t.events),t.action&&(f.log("Publisher event triggered: ","pub."+t.action),v.trigger("pub."+t.action),delete t.action),!Object.getOwnPropertyNames(t).length))return;if(Y){if("object"==typeof t&&(t.gpt_path||t.length))try{f.log("Initialization command object processing:",t);function n(n){AdBridg.gpt.cmd.push(function(){var r,e;if(n.oop)r=AdBridg.defineOutOfPageSlot(n.gpt_path,n.dom_id);else if((r=AdBridg.defineSlot(n.gpt_path,n.size||[1,1],n.dom_id))&&n.size_map){for(var t=AdBridg.sizeMapping(),i=0;i<n.size_map.length;i++)t=t.addSize(n.size_map[i].viewport,n.size_map[i].sizes);t=t.build(),r.defineSizeMapping(t),AdBridg.useSizeMapping(r,t)}r&&n.targeting&&f.each(n.targeting,function(e,t){r.setTargeting(t,e)}),r&&n.events&&(n.events["gpt.defined"]&&n.events["gpt.defined"](r),(e=function(t,e){n.events[t]&&AdBridg.gpt.pubads().addEventListener(e,function(e){e.slot===r&&n.events[t](r,e)})})("gpt.rendered","slotRenderEnded"),e("gpt.viewed","impressionViewable"),e("gpt.visibilityChanged","slotVisibilityChanged")),r&&AdBridg.display(n.dom_id)})}if(t.length)for(var o=0;o<t.length;++o)n(t[o]);else n(t);t=function(){AdBridg.serve()}}catch(e){f.err("CmdObj fail",e)}"function"==typeof t&&setTimeout(function(){try{t.call()}catch(e){f.err("AdBridg.cmd had error: ",String(t).substr(0,30),e)}},0)}else H.push(t)};AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}q(we)})()}}function P(){}function Se(e){var t=f.vp(),r=t.w,n=t.h,o=!1,a=[];for(i=e.length-1;0<=i;--i){var s=e[i][0];if(r>=s[0]&&n>=s[1]){if(o){if(o[0]>s[0])continue;if(o[0]===s[0]&&o[1]>s[1])continue}o=s,a=e[i][1]}}return a}},{"../analytics.js":17,"../auction.js":18,"../config.js":19,"../mockprebid.js":22,"../modules.js":23,"../unit.js":38,"../utils.js":39}],22:[function(e,t,r){function c(){var t,e,r=arguments[0];return!n[r]||(t=Array.prototype.slice.apply(arguments,[1]),e=u.copy(t),u.each(n[r],function(e){u.wrapAsync(e).apply(null,t)}),u.deepEq(e,t,[/\.doc$/]))}var u=e("./utils"),i=e("./modules"),n=(e("./config.js"),{}),o=[],p=[],l=[];u.isdebug()&&(window.pbjs._adb_attached_adapters=p,window.pbjs._adb_enabled_adapters=l),t.exports=function(d){window.pbjs.renderAd=function(e,t,r){u.log("PBJS renderAd override",e,t,r),(r=r||{}).pbuc=!0,window.AdBridg.render(e,t,r)},window.pbjs.getBidResponses=function(){for(var e=d(),t={},r={},i=e.length-1;0<=i;--i)for(var n=e[i].toPrebid(),o=0;o<n.bidsReceived.length;++o){var a=n.bidsReceived[o],s=a.adUnitCode;r[s]||(r[s]=n.auctionId),r[s]===n.auctionId&&(t[s]||(t[s]=[]),t[s].push(a))}return t},window.pbjs.getAllWinningBids=function(){var t=[];return u.each(d(),function(e){t=t.concat(e.toPrebid().winningBids)}),t},window.pbjs.getAllPrebidWinningBids=function(){var t=[];return u.each(d(),function(e){t=t.concat(e.toPrebid().prebidWinningBids)}),t},window.pbjs.getAdserverTargeting=function(){var r={};return u.each(d(),function(e){u.each(e.toPrebid().prebidWinningBids,function(t){r[t.adUnitCode]={},u.assign(r[t.adUnitCode],t.adserverTargeting),u.each(Object.keys(t.adserverTargeting),function(e){r[t.adUnitCode][e+"_"+t.bidder]=t.adserverTargeting[e]})})}),r},window.pbjs.getBidResponsesForAdUnitCode=function(t){var r=[];return u.each(d(),function(e){u.each(e.toPrebid().bidsReceived,function(e){e.adUnitCode===t&&r.push(e)})}),r},window.pbjs.getHighestCpmBids=function(){var t=[];return u.each(d(),function(e){e=e.toPrebid().bidsReceived.reduce(function(e,t){return e.cpm===t.cpm?e.timeToRespond<t.timeToRespond?e:t:e.cpm<t.cpm?t:e});t.push(e)}),t},window.pbjs.findBidByAdId=function(e){for(var t=null,r=0;r<d().length;r+=1){for(var i=d()[r].toPrebid().bidsReceived,n=0;n<i.length;n+=1){var o=i[n];if(o.adId===e){t=o;break}}if(t)break}return t},window.pbjs.registerAnalyticsAdapter=function(e){e.code=e.code||"UnknownAdapter"+p.length,p.push(e),u.log("PBJS registerAnalyticsAdapter",e)},window.pbjs.enableAnalytics=function(e){u.each(e,function(t){var e=p.find(function(e){return t.provider&&t.provider===e.code});e?(u.log("PBJS enableAnalytics on adapter",e.code),l.push(e),e.adapter.enableAnalytics(e)):u.err("PBJS cannot enable analytics",t)})},window.pbjs.onEvent=function(e,t){n[e]=n[e]||[],n[e].push(t)},window.pbjs.getNoBids=function(){return u.log("PBJS nonop getNoBids",arguments),[]},window.pbjs.requestBids=function(){u.log("PBJS nonop requestBids",arguments)};try{"pbjs"===u.isdebug()&&Proxy&&(window.pbjs=new Proxy(window.pbjs,{get:function(e,t,r){return e[t]||(u.logl("pbjs","PBJS Proxy miss: ",{target:e,name:t,receiver:r}),function(){u.logl("pbjs","PBJS proxy miss",t,arguments)})}}))}catch(e){}i.on("pbevt.sub",function(e,t,r){window.pbjs.onEvent(t,r)}),i.on("auction.before_bids",function(e,t){var r=!1,t=(t.eachUnit(e=>{e=e.toPrebidAdUnitCode();-1===o.indexOf(e)&&(r=!0,o.push(e))}),r&&c("addAdUnits"),c("requestBids"),t.toPrebid());c("beforeRequestBids",t.adUnits).length}),i.on("auction.start",function(e,t){t=t.toPrebid();c("auctionInit",t).length}),i.on("bidder.before_request",function(e,t,r){c("beforeBidderHttp",r,t._orig)});var a=encodeURIComponent,s={};for(i.on("bidder.requested",function(e,n,o){var t=c("bidRequested",n);t.length&&u.each(t,function(e){var t,r,i;"number"==typeof e.o2&&(t=e.p.replace(/\.params.*$/,".bidId"),r=u.deepAccess(n,t),i=o.getBidRequest(r),r&&i?(e=[i.unit.auction.instancectr,i.unit.id,a(i.unit.unique_id),a(i.min_cpm),a(e.o2)].join(","),s[e]||(s[e]=[]),s[e].push(i.bidder_id),i.unit.setImpData("ad939","rfpset")):u.err("PbBrcLkupFail",t,r))})}),i.on("bid.ready",function(e,t){t.pbjsBid&&!t._origin&&c("bidAdjustment",t.pbjsBid).length}),i.on("bid.response",function(e,t){t.pbjsBid&&!t._origin&&c("bidResponse",t.pbjsBid).length}),i.on("bidder.done",function(e,t,r,i){i.eachBidRequest(r,function(e,t){t.responses.length?u.each(t.responses,function(e){e.pbjsNoBid&&c("noBid",e.pbjsNoBid).length}):c("noBid",t.toPrebid(!0))}),c("bidderDone",t).length}),i.on("auction.complete",function(e,t){var r=s,i=(s={},u.each(r,function(e,t){u.rec("ad939,"+t+":"+e.join(","))}),[]);t.eachBidRequest(null,function(e,t){t.responses.length||(t=t.toPrebid(),i.push(t))}),c("auctionEnd",t.toPrebid()).length,i.length&&c("bidTimeout",i).length}),i.on("gpt.set_pb_targeting",function(e,t){const i=u.copy(t);u.each(i,function(e,r){u.each(e,function(e,t){u.isarr(e)&&(i[r][t]=e.join(","))})}),c("setTargeting",i)}),i.on("bid.render",function(e,t){c("bidWon",u.assign({},t.pbjsBid,{status:"rendered",params:[t.config.toPrebid().params]})).length}),i.on("pbevt.render_success",function(e,t,r,i){r=Object.assign({},r.pbjsBid,{status:"rendered",params:[r.config.toPrebid().params]});c("adRenderSucceeded",{doc:t,bid:r,id:i})}),i.on("pbevt.render_fail",function(e,t,r,i){c("adRenderFailed",{message:i,reason:r,id:t}),c("auctionDebug",{type:"ERROR",arguments:[i]})}),i.on("pbevt.log_warn",function(e,t){c("auctionDebug",{type:"WARNING",arguments:t})}),i.on("pbevt.log_error",function(e,t){c("auctionDebug",{type:"ERROR",arguments:t})}),i.on("pbevt.ajax_error",function(e,t,r){c("bidderError",{error:t,bidderRequest:r})}),window.pbjs.que.push=AdBridg.cmd.push;window.pbjs.que.length;){var e=window.pbjs.que.shift();AdBridg.cmd.push(e)}}},{"./config.js":19,"./modules":23,"./utils":39}],23:[function(e,t,r){function i(e){n.push(e)}var u=e("./utils.js"),n=[],o=["gpt.after_enable_services","consent.check_complete"],a={},s={},d={on:function(e,t){u.isarr(e)||(e=e.split(",")),u.each(e,function(e){a[e]?t(e):(s[e]||(s[e]=[]),s[e].push(t))})},trigger:null},c=(d.trigger=r.trigger=u.wrapAsync(function(e){var t=arguments,r=(s[e]||[]).concat(s["*"]||[]);u.each(r,u.wrapAsync(function(e){e.apply(null,t)})),-1<o.indexOf(e)&&(a[e]=1)}),!1);u.onerr(u.wrapAsync(function(){c?(console&&console.log("AdBridg nested module errors"),u.pixel("https://adspsp.com/$CUSTOMER_PUBLIC_ID$/500/2/1/?e=errnest")):(c=!0,r.trigger("error",arguments),c=!1)})),r.on=u.wrapAsync(function(e,t){d.on(e,t)}),r.setup=function(e){0};try{i(new(e("./modules/id5id.js"))({partner:1145},d)),i(new(e("./modules/gamkvp.js"))({},d)),i(new(e("./modules/icu.js"))({sample:.02,tick_ms:30,watch_gpt:!0,modify_dom_id:function(e){return e.replace(/^(fg_ldr_search).*$/,"$1")}},d)),i(new(e("./modules/dockable.js"))({detect_partial:!0,render_check:function(e,t){t=t.slot.getSlotElementId(),t=document.getElementById(t);return 18===e.id&&(120<u.where(t).c.h?(u.log("Docking leaderboard skip: ad too big"),!1):(u.log("Docking leaderboard activated"),!0))},setup:function(e,t,r,i,n){u.log("dock el_where: ",t,t.c.h),document.getElementById(e)&&(n.sz||(n.sz=document.createElement("div"),n.sz.id="adb_lb1__sizer",n.sz.setAttribute("class","ad-leaderboard-header"),n.sz.style="width: "+t.c.w+"px;height: "+t.c.h+"px;opacity: 0;display: none;"),n.close||(n.close=document.createElement("div"),n.close.style=["display: none","line-height: 19px","z-index: 101","cursor: pointer","background: rgba(44,62,80,.6)","color: rgb(255, 255, 255)","text-align: center","position: absolute","width: 20px","height: 20px","right: 0px","font-weight: bolder","font-family: monospace"].join(";"),n.close.id="converted_adhesion_close_btn",n.close.innerText="x",n.close.addEventListener("click",i)))},get_max_height:function(e,t,r){return 120},get_expiry_ms:function(){return 1e4},dock:function(e,t,r){e=document.getElementById(e);e&&(e.style.position="fixed",e.style.zIndex="100",e.style.backgroundColor="#00000080",e.style.top="0px",e.style.left=t.c.l+"px",r.close.style.display="block",r.sz.style.display="block",r.sz.parentNode||(e.nextElementSibling?e.parentNode.insertBefore(r.sz,e.nextElementSibling):e.parentNode.appendChild(r.sz)),r.close.parentNode||(e.children.length?e.insertBefore(r.close,e.children[0]):e.appendChild(r.close)))},undock:function(e,t,r){e=document.getElementById(e);e&&(e.setAttribute("style","text-align: center; width: "+t.c.w+"px; height: "+t.c.h+"px"),e.setAttribute("class","ad-leaderboard-header"),r.close.style.display="none",r.sz.style.display="none")},destroy:function(e,t,r){r.close.parentNode&&r.close.parentNode.removeChild(r.close),r.sz.parentNode&&r.sz.parentNode.removeChild(r.sz)}},d)),i(new(e("./modules/emit.js"))({"gpt.render":function(e,t,r){function i(e){return JSON.stringify(e,2)}var n=t.get("dom_id"),o=r.slot,a=t.alias,s=r.slot.getAdUnitPath(),d=r.advertiserId+"."+r.creativeId+"."+r.sourceAgnosticCreativeId,c=(u.log("Reload setup check in render event:",i({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),!1);t.ancReload=function(e){c||(c=!0,u.log("Reload scheduled from ",e,":",i({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),"AdBridg"==e&&u.err("Reload track no GPT view",i({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4,creative:d})),setTimeout(function(){u.log("Reload queuing lazy load check:",i({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),u.dom(n,200,0,function(){u.log("Reload executing:",i({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),AdBridg.refresh([o])})},3e4))},u.dom(n,.5,1e3,function(){c||(u.log("Reload AdBridg view event; triggering 3sec extra: ",i({auction:a,dom_id:n,ad_unit_path:s})),setTimeout(function(){t.ancReload&&t.ancReload("AdBridg")},3e3))}),18===t.id&&u.log("OLD DOCKABLE REMOVED")},"gpt.viewed":function(e,t,r){r.ancReload&&r.ancReload("GPT"),t.getSlotElementId().match("sticky_sidebar")&&u.dombuilder_injectNextSlot&&u.dombuilder_injectNextSlot(t)}},d)),i(new(e("./modules/dombuilder.js"))({elements:[{active:{url:"wc\\.rootsweb\\.com(\\/?)(\\?[^\\/]+)?$"},type:"sticky_sidebar_old",position:"right",viewport:{min:1650},dock_threshold:{bottom:97},style:{top:"600px","z-index":5,right:"20px"},max_ads:6,attributes:{"adbridg-ad-class":"sticky_sidebar"},slot:{style:{top:"100px","padding-bottom":"40px"}}},{type:"adhesion",active:function(){return!(!u.url().domain.match("rootsweb")||AdBridg.global("adb_vs"))},viewport:{min:768},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},id:"bottomSlot-container",style:{bottom:"0px"},slot:{id:"bottomSlotAdhesion",attributes:{class:"ad-wrapper"},style:{height:"90px",width:"728px",margin:"auto","text-align":"center",position:"relative"}}},{type:"adhesion",active:function(){return!(!u.url().domain.match("rootsweb")||AdBridg.global("adb_vs"))},viewport:{max:767},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},id:"bottomSlot-container",style:{bottom:"0px"},slot:{id:"bottomSlotAdhesion",style:{height:"50px",width:"320px",margin:"auto","text-align":"center",position:"relative"}}},{type:"adhesion",active:function(){return!(!AdBridg.global("enableAdhesion")||AdBridg.global("adb_vs"))},viewport:{min:768},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},css_templates:[{active:!0,container:{width:"auto",bottom:"0px",left:"50%",transform:"translateX(-50%)"}}],id:"bottomSlot-container",slot:{id:"fgAdhesion",attributes:{class:"ad-wrapper"},style:{height:"90px",width:"728px",margin:"auto","text-align":"center",position:"relative"}}},{type:"adhesion",active:function(){return!(!AdBridg.global("enableAdhesion")||AdBridg.global("adb_vs"))},viewport:{max:767},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},css_templates:[{active:!0}],id:"bottomSlot-container",slot:{id:"fgAdhesion",attributes:{class:"ad-wrapper"},style:{height:"50px",width:"320px",margin:"auto","text-align":"center",position:"relative"}}}]},d)),i(new(e("./modules/amazon.js"))({no_ca:!0,use_pubcid:!0,init:{pubID:"3348",adServer:"googletag",bidTimeout:3e3,deals:!0}},d)),i(new(e("./modules/rhunt.js"))({},d)),i(new(e("./modules/confiantpb.js"))({loadCondition:function(){return-1!==window.location.hostname.indexOf("findagrave")},key:"MDm0g4ZhT4ICKskqdVRvwPd9wTw"},d)),i(new(e("./modules/pubcid.js"))({},d)),i(new(e("./modules/gamconfig.js"))({active:1,autostart:0,centering:1,collapseEmptyDivs:1,safeFrames:1,slots:[{dom_id:"div-bt_mrec",gpt_path:"/4802/Newspapers/300x250_3rdparty",size:[[300,250]]},{dom_id:"div-bt_leaderboard",gpt_path:"/4802/Newspapers/728x90_3rdparty",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[750,0]}]},{dom_id:"global-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/fg_{{lib.pub.sizePathNameLeaderboard}}_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"global-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/fg_{{lib.pub.sizePathNameLeaderboard}}_bottom",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[[728,90],[970,90],[970,250]],viewport:[768,0]}]},{dom_id:"mem-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/Memorials/fg_{{lib.pub.sizePathNameLeaderboard}}_mem_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"mem-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/Memorials/fg_{{lib.pub.sizePathNameLeaderboard}}_mem_bottom",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"mem-mrc-topr",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_mem",size:[[300,250]]},{dom_id:"mem-mrc-sidespot",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_mem",size:[[300,250]]},{dom_id:"home-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/fg_{{lib.pub.sizePathNameLeaderboard}}_hp{{lib.pub.hpPathBottom}}",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"home-mrc-side",gpt_path:"/4802/FindAGraveNEW/fg_300x250_hp",size:[[300,250]]},{dom_id:"cem-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/Cemetery/fg_{{lib.pub.sizePathNameLeaderboard}}_cem_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"cem-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/Cemetery/fg_{{lib.pub.sizePathNameLeaderboard}}_cem_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"cem-mrc-topr",gpt_path:"/4802/FindAGraveNEW/Cemetery/fg_300x250_cem",size:[[300,250]]},{dom_id:"cem-mrc-side",gpt_path:"/4802/FindAGraveNEW/Cemetery/fg_300x600_cem",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[[300,600],[300,250],[160,600]],viewport:[768,0]}]},{dom_id:"memsrch-mrc-topr",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_memsrch",size:[[300,250]]},{dom_id:"memsrch-mrc-side",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x600_memsrch",size_map:[{sizes:"",viewport:[0,0]},{sizes:[[300,600],[300,250],[160,600]],viewport:[768,0]}]},{dom_id:"famous-mrc-side",gpt_path:"/4802/FindAGraveNEW/Famous/fg_300x250_fame",size:[[300,250]]},{dom_id:"famous-lmrc-side",gpt_path:"/4802/FindAGraveNEW/Famous/fg_300x600_fame",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[[300,600],[300,250],[160,600]],viewport:[768,0]}]},{dom_id:"famous-sky-side",gpt_path:"/4802/FindAGraveNEW/Famous/fg_160x600_fame",size:[[160,600]]},{dom_id:"famous-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/Famous/fg_{{lib.pub.sizePathNameLeaderboard}}_{{lib.pub.fameSpelling}}top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"famous-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/Famous/fg_{{lib.pub.sizePathNameLeaderboard}}_famebottom",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"mem-mrc-topspot",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_mem",size:[[300,250]]},{dom_id:"mem-mrc-sidespot2",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_160x600_mem",size:[[160,600]]},{dom_id:"mem-mrc-botspot",gpt_path:"/4802/FindAGraveNEW/fg_1x1",size:[[1,1]]},{dom_id:"rwwc-mrec-right3",gpt_path:"/4802/tgn.rootsweb.com/World_Connect/rwwc_300x250_right3",size:[[300,250]]},{dom_id:"rwwc-half-right2",gpt_path:"/4802/tgn.rootsweb.com/World_Connect/rwwc_300x600_right2",size:[[300,600]]},{dom_id:"rwwc-mrec-right1",gpt_path:"/4802/tgn.rootsweb.com/World_Connect/rwwc_300x250_right1",size:[[300,250]]},{dom_id:"rwwiki-ldr-bottom",gpt_path:"/4802/tgn.rootsweb.com/WikiPages/RW_Wiki_728x90_bottom",size:[[728,90]]},{dom_id:"rwwiki-ldr-top",gpt_path:"/4802/tgn.rootsweb.com/WikiPages/RW_Wiki_728x90_top",size:[[728,90]]},{dom_id:"rwsites-ldr-bottom",gpt_path:"/4802/tgn.rootsweb.com/websites/RW_Sites_728x90_bottom",size:[[728,90]]},{dom_id:"rwsites-ldr-top",gpt_path:"/4802/tgn.rootsweb.com/websites/RW_Sites_728x90_top",size:[[728,90]]},{dom_id:"rwmail-mrec-mid",gpt_path:"/4802/tgn.rootsweb.com/mailinglists/RW_ML_300x250",size:[[300,250]]},{dom_id:"rwmail-sky-left",gpt_path:"/4802/tgn.rootsweb.com/mailinglists/RW_ML_160x600",size:[[160,600]]},{dom_id:"rw-leftSlot",gpt_path:"/4802/tgn.rootsweb.com/RW_160x600_left",size:[[160,600]]},{dom_id:"bottomSlotAdhesion",gpt_path_builder:"/4802/{{lib.pub.rwgen_bottomSlotPath}}",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_id:"bottomRightSlot",gpt_path_builder:"/4802/{{lib.pub.rwgen_bottomRightSlotPath}}",size:[[300,250]]},{dom_id:"rightSlot",gpt_path_builder:"/4802/{{lib.pub.rwgen_rightSlotPath}}",size:[[160,600]]},{dom_id:"topSlot",gpt_path_builder:"/4802/{{lib.pub.rwgen_topSlotPath}}",size:[[728,90]]},{dom_ad_class:"sticky_sidebar",gpt_path:"/4802/tgn.rootsweb.com/Sticky_Sidebar_Adbridg",size:[[300,250],[300,600],[160,600]]},{dom_id:"mem-exclusive",gpt_path:"/4802/FindAGraveNEW/Memorials/FlowersTab_Exclusive",size:[[300,250]]},{dom_id:"fgAdhesion",gpt_path_builder:"/4802/FindAGraveNEW/{{lib.pub.adhesionGAMPath}}",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_id:"global-mrc-sidespot",gpt_path:"/4802/FindAGraveNEW/fg_300x250_right",size:[[300,250]]},{dom_id:"lb_bottom",gpt_path:"/4802/tgn.rootsweb.com/lb_bottom",size:[[970,250],[728,90],[970,90]]},{dom_id:"mrec_right_bottom",gpt_path:"/4802/tgn.rootsweb.com/mrec_right_bottom",size:[[300,250]]},{dom_id:"mrec_left_bottom",gpt_path:"/4802/tgn.rootsweb.com/mrec_left_bottom",size:[[300,250]]},{dom_ad_class:"wr-search-sticky",gpt_path:"/4802/WeRemember/Search/wr_970x90sticky_search",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[[728,90],[970,90]],viewport:[768,0]}]},{dom_ad_class:"wr-search-small",gpt_path:"/4802/WeRemember/Search/wr_468x60mid_search",size:[[468,60],[320,50],[300,50]]},{dom_ad_class:"wr-search-mrc",gpt_path:"/4802/WeRemember/Search/wr_300x250right_search",size:[[300,250]]},{dom_ad_class:"wr-search-large",gpt_path:"/4802/WeRemember/Search/wr_300x600right2_search",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[[300,600],[300,250]],viewport:[768,0]}]},{dom_ad_class:"wr-org-sticky",gpt_path:"/4802/WeRemember/OrgPage/wr_970x90sticky_org",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[[728,90],[970,90]],viewport:[768,0]}]},{dom_ad_class:"wr-org-small",gpt_path:"/4802/WeRemember/OrgPage/wr_468x60mid_org",size_map:[{sizes:[[468,60],[320,50],[300,50],""],viewport:[0,0]},{sizes:[[728,90],[468,60]],viewport:[768,0]}]},{dom_ad_class:"wr-org-ldr",gpt_path:"/4802/WeRemember/OrgPage/wr_970x90mid_org",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[[728,90],[970,90]],viewport:[768,0]}]},{dom_ad_class:"wr-mem-ldr",gpt_path:"4802/WeRemember/Memorials/wr_728x90gridbottom_mem",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_ad_class:"wr-mem-ldr-bottom",gpt_path:"4802/WeRemember/Memorials/wr_728x90bottom_mem",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_ad_class:"wr-hp-ldr",gpt_path:"/4802/WeRemember/Homepage/wr_728x90mid_hp",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_ad_class:"wr-hp-ldr-bottom",gpt_path:"/4802/WeRemember/Homepage/wr_728x90bottom_hp",size_map:[{sizes:[[320,50],[300,50]],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]}]},d))}catch(e){u.err("Module failed",e)}},{"./modules/amazon.js":24,"./modules/confiantpb.js":25,"./modules/dockable.js":26,"./modules/dombuilder.js":27,"./modules/emit.js":28,"./modules/gamconfig.js":29,"./modules/gamkvp.js":30,"./modules/icu.js":31,"./modules/id5id.js":32,"./modules/pubcid.js":33,"./modules/rhunt.js":34,"./utils.js":39}],24:[function(y,e,t){var _=y("../utils.js"),o=y("../modules"),s=y("../config.js"),i=(e.exports=function(p,l){function g(e){var r=[],i=p.allowed_sizes;return _.each(e,function(e,t){if(i&&-1==i.indexOf(e))return _.log("Amazon unsupported size: ",e);e=e.split("x");e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10),r.push(e)}),r}var n,e,t,r,m,f,h={},b={},a={},v=!1;p.active&&!p.active()?_.log("Amazon: inactive"):(n=!_.qs("adb_enable_amzn")&&p.test,"function"==typeof n&&(n=n()),e=p.load_apstag,"function"==typeof e&&(e=e()),t=!1,m=r=!1,"function"==typeof s.libSettings().nogpt&&s.libSettings().nogpt()||_.qs("adb_nogpt")?(_.log("nogpt Disabling Amazon"),n=r=!(e=!1)):(f=function(){var i;return t?n:(i="function"==typeof(i=p.init)?i(s.libSettings()):i)?(t=!0,n?(_.log("Amazon disabled. Use ?adb_enable_amzn=1 to activate."),n):window.apstag?void(i.skip_init||s.afterConsent(function(e,t){var r;e&&e.gdprApplies&&(i.params=i.params||{},i.params.gdpr=e.vendorData.tcfPolicyVersion?e.consentString:"",p.no_eu)?(n=!0,_.log("Amazon disabled for EU",e.consentString)):(r=(e=t&&t.uspString)&&"1---"===t.uspString,!e||r&&p.skip_ccpa_default||(i.params=i.params||{},i.params.us_privacy=t.uspString,"Y"!==t.uspString.substr(2,1)||(v=!0,!p.no_ca))?(apstag.init(i),o.trigger("amzn.init",apstag,i),_.log("Amazon initialized:",i)):(n=!0,_.log("Amazon disabled for CA",t.uspString)))})):(e||r||(_.err("Amazon library not found."),r=!0),n=!0)):(_.log("Amazon init bypassed."),!1)},n||!e||i()||(n=t=!0),l.on("unit.config",function(e,t){var r,i,n,o,a,s,d,c,u;if(!f())return r=t.get("dom_id"),i=t.get("gpt_slot"),r&&i?(n=i.getAdUnitPath()+"",(o=p.get_slot_name?p.get_slot_name(n,r,i,t):p.use_gpid?t.toPrebidOrtb2Imp().ext.gpid.replace(/\#/g,"_"):(n.match(/([^\/]+)$/)||[""])[0])?(t={slotID:r,slotName:o,sizes:b[r]||g(t.all_sizes)},p.use_pubcid&&window.PublisherCommonId&&window.PublisherCommonId.getId&&(u=window.PublisherCommonId.getId(),t.slotParams={"pubcid.org":[u]}),h[r]=t,_.log("Amazon slot configured",t,!!b[r]),void(p.pub_audiences&&!m&&(m=!0,u=p.pub_audiences,a=!1,d="n",c=function(e){s=e,_.thread(function(){y("../analytics.js").meta("iA",s)})()},l.on("gamkvp.getids",function(e,t){a&&(a=!0,t.push("iA"+d),_.log("Amazon Pub Audience gamkvp.getids",d))}),u.active&&!u.active()?(_.log("Amazon PA: inactive"),d="n",c("N")):(_.log("Amazon PA: active"),(t=u.record())?(u={hashedRecords:[{type:t.type,record:t.value}],optOut:v},apstag.rpa(u,_.wrapAsync(function(){c(v?"X":"Y"),d="y",_.log("Amazon PA: completed")}))):(_.log("Amazon PA: no email record"),d="n",c("Z")))))):_.err("Amazon noname: ",o,r,n)):_.log("Amazon skip",r,i)}),l.on("unit.restrict_sizes",function(e,t,r){f()||(t=t.get("dom_id"),r=g(r),b[t]=r,(t=h[t])&&(_.log("Amazon slot resize",t,r),t.sizes=r))}),l.on("gpt.destroy",function(e,t,r){f()||(_.log("Amazon slot remove",r),delete h[r],delete b[r])}),l.on("unit.pre_attach",function(e,t){if(!f()){var r=t.get("dom_id"),i=h[r];if(!i)return _.log("Amazon preload mismatch",r);var n=t.auction,o="amazon."+t.id;n.lock(o),apstag.fetchBids({slots:[i],timeout:n.max_ms},_.wrapAsync(function(){_.log("Amazon preload response",n.id,arguments);try{apstag.setDisplayBids()}catch(e){_.err("Amazon setBids",e)}n.unlock(o)}))}}),l.on("auction.start",function(e,t){var r,i,n,o;f()||(r=[],t.eachUnit(function(e){var e=e.get("dom_id"),t=h[e];t?(r.push(t),h[e]=null):_.log("Amazon no config",e)}),r.length&&(i={slots:r,timeout:t.max_ms},_.log("Amazon request",t.id,i),n="amazon."+t.id,a[n]=!0,t.lock(n),o=setTimeout(_.wrapAsync(function(){a[n]&&(a[n]=!1,t.unlock(n),_.err("Amazon incomplete at 50"))}),t.max_ms+50),apstag.fetchBids(i,_.wrapAsync(function(){_.log("Amazon response",t.id,arguments);try{apstag.setDisplayBids()}catch(e){_.err("Amazon setBids",e)}clearTimeout(o),a[n]&&(a[n]=!1,t.unlock(n))}))))})))},function(){if(window.apstag)_.log("Amazon already loaded");else{_.log("Loading Amazon dependency");try{r="apstag",i=window,e=document,i[r]||(i[r]={init:function(){o("i",arguments)},fetchBids:function(){o("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){o("di",arguments)},rpa:function(){o("ri",arguments)},upa:function(){o("ui",arguments)},_Q:[]},(t=e.createElement("script")).async=!0,t.src="https://c.amazon-adsystem.com/aax2/apstag.js",(n=e.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n))}catch(e){return _.err("Amazon load failed",e),!1}var r,i,e,t,n}return!0;function o(e,t){i[r]._Q.push([e,t])}})},{"../analytics.js":17,"../config.js":19,"../modules":23,"../utils.js":39}],25:[function(e,t,r){var a=e("../utils");t.exports=function(e){e.loadCondition&&!e.loadCondition()||(window.confiant=window.confiant||{},window.confiant.enable_integrations=["gpt","prebid"],window.confiant.callback=function(e,t,r,i,n,o){a.err("Confiant block",e,t,r,i,n,o)},a.load("https://cdn.confiant-integrations.net/"+e.key+"/gpt_and_prebid/config.js"))}},{"../utils":39}],26:[function(e,t,r){var m=e("../utils.js"),e=e("../modulewrapper.js");t.exports=e({name:"dock"},function(s,d){var c,u,p,l,n,g,e,t=!0;m.each(["render_check","setup","dock","undock","destroy","get_max_height","get_expiry_ms"],function(e){s.hasOwnProperty(e)||(m.err("Dock mod missing",e),t=!1)}),t&&("function"==typeof(c=s.detect_obstructed)&&(c=c()),u={},p={},m.isdebug()&&(AdBridg.dockable={docking:u,shadows:p}),l=function(e){var t,r=u[e];!r||r.docked||r.closed?m.logl("dock","dock cancel",e,r):(t=m.where(r.dock_el_id)).c.h>r.max_height?m.logl("dock","dock too big",e,r):(r.docked=!0,s.dock(e,t,r),m.logl("dock","docked",e,r),d.trigger("icu.watch",r.shadow,!1,e))},n=function(e){var t=u[e];t&&t.docked&&!t.closed?(t.docked=!1,s.undock(e,m.where(e),t),m.logl("dock","undocked",e,t),d.trigger("icu.ignore",t.shadow)):m.logl("dock","undock cancel",e,t)},g=m.wrapAsync(function(e,t){var r=u[e];t&&r&&(r.user_closed=!0),!r||r.closed?m.logl("dock","close cancelled",e,r):(t=m.where(e),r.docked=!1,r.closed=!0,s.undock(e,t,r),s.destroy(e,t,r),m.logl("dock","closed",e,r),r.shadow&&((t=document.getElementById(r.shadow))&&t.parentNode&&(t.parentNode.removeChild(t),p[r.shadow]=!1,r.shadow=!1),d.trigger("icu.forget",r.shadow)),r.dock_el_id&&d.trigger("icu.forget",r.dock_el_id))}),d.on("gpt.render",function(e,t,r){var i,n,o=t.get("dom_id"),a=u[o];if(a){if(a.user_closed)return;g(o)}s.render_check(t,r)&&(a=!1,s.get_dock_el&&(a=s.get_dock_el(t,o))&&!a.id&&(a.id=o+"__adb_dock"),r=a,i=(o=t).get("dom_id"),a=r||document.getElementById(i),t=document.createElement("div"),n=m.where(a,!!c),t.id=i+"__ds",t.style="position: absolute;top: "+Math.round(n.c.t+n.c.vp.y)+"px;left: "+Math.round(n.c.l+n.c.vp.x)+"px;width: "+n.c.w+"px;height: "+n.c.h+"px;opacity: 0;z-index: -1;",document.body.insertBefore(t,document.body.children[0]),u[i]={docked:!1,viewed:!1,closed:!1,unit:o,dock_el_id:a.id,shadow:t.id,max_height:s.get_max_height(i,n,o),expiry:s.get_expiry_ms(i,n,o)},a=u[i],r&&(u[r.id]=a,d.trigger("icu.watch",r.id,!1)),p[t.id]=i,m.logl("dock","setup",i,a),s.setup(i,n,o,function(){g(i,!0)},a),!a.view_closed&&a.max_height>n.c.h&&(!n.v||s.detect_partial&&n.v<1||c&&.1<n.o.o)&&(m.logl("dock","dock initial",i,a),l(i)))}),(e=s.ignore_viewed&&"function"==typeof(e=s.ignore_viewed)?e():e)||d.on("gpt.viewed",function(e,t,r){var i=r.get("dom_id"),n=u[i];n&&!n.viewed&&(n.viewed=!0,m.logl("dock","viewed",i,n),setTimeout(m.wrapAsync(function(){m.logl("dock","close after view",i,n),n.view_closed=!0,g(i)}),n.expiry))}),c?(d.on("icu.obstructed",function(e,t,r){var t=t.d,i=u[t];!i||i.docked||i.closed||(m.logl("dock","dock icu obstructed",t,r.o.o,r.o.e,i),l(t))}),d.on("icu.unobstructed",function(e,t,r){var t=t.d,t=p[t],i=u[t];i&&i.docked&&(m.logl("dock","undock icu shadow unobstructed",t,r.o.o,i),n(t))})):(e=s.detect_partial?"icu.leaving":"icu.offscreen",d.on(e,function(e,t,r){var t=t.d,i=u[t];!i||i.docked||i.closed||(m.logl("dock","dock icu",t,i),l(t))}),e=s.detect_partial?"icu.onscreen":"icu.appearing",d.on(e,function(e,t,r){var t=t.d,t=p[t],i=u[t];i&&i.docked&&(m.logl("dock","undock icu shadow",t,i),n(t))})),d.on("icu.resized",function(e,t,r){var i=t.d,n=u[i];n&&!n.closed&&(r=n.dock_el_id!==t.d?m.where(n.dock_el_id):r).c.h>n.max_height&&(m.logl("dock","close icu resize",i,r.c),g(i))}))})},{"../modulewrapper.js":35,"../utils.js":39}],27:[function(e,t,r){var R=e("../utils.js");t.exports=function(v,w){var x={},I={},S="adb_bottom_pixel",A=(w.on("pub.spa_pv_initialize",function(){t()}),w.on("dom.close",function(e,t){t=x[t];t&&t.close_btn_id&&(t.behaviour.destroy.close_btn.pageview||(I[t.id]=t),i(t))}),function(e){var t=e;if(!0!==t&&t)if("function"==typeof e)t=t&&t();else if(t.js)t=function(e){var t=e.js.split(".");if("window"===t[0])return t=t[1],window.hasOwnProperty(t)?window[t]:void 0;R.log("GamConfig JS read fail",e)}(t);else if(t.qs)t=t&&R.qs(t.qs);else if(e.url)t=t&&R.url().href.match(new RegExp(e.url,"i"));else{if(!e.noturl)return!1;t=t&&!R.url().href.match(new RegExp(e.noturl,"i"))}return t}),E=function(e,t){var r,i,n,o,a,s;if(e.defer&&!t)R.log("Dom Builder: Element deferring initialize",e),e.defer(e,function(){R.log("Dom Builder: Element initialize restarting",e),E(e,!0)});else if(A(e.active))if(!e.viewport||(t=e.viewport,i=r=!1,t.min&&(r="function"==typeof t.min?t.min():t.min),t.max&&(i="function"==typeof t.max?t.max():t.max),(r||i)&&(t=R.vp().w,r&&i&&r<t&&t<i||!i&&r<t||!r&&t<i)))switch(R.log("Dom Builder: Element active for this page",e),!function(){if(v.bottom_px_override)return v.bottom_px_override();R.log("Injecting pixel at bottom of page");var e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.id=S,t.style.width=t.style.height="1px",e.appendChild(t)}(),e.type){case"incontent":!function(n){var e,o,t={};if(n.target.rangeWithin){var r=document.querySelector(n.target.rangeWithin);if(!r){R.log("DomBuilder InContent inactive: range element not found",n.id,n.target.rangeWithin);return}t.within=r;var i=R.where(r);e=i.c.t;o=i.c.b}else if(n.target.rangeStart&&n.target.rangeEnd){var a=document.querySelector(n.target.rangeStart);var s=document.querySelector(n.target.rangeEnd);if(!a||!s){R.log("DomBuilder InContent inactive: range elements not found",n.id,n.target.rangeStart,n.target.rangeEnd);return}t.start=a;t.end=s;var d=R.where(a);var c=R.where(s);e=d.c.t;o=c.c.t}var u=document.querySelectorAll(n.target.insertAfter),p,l,g,m,f,h;u.length?(p=n.target.distanceStart||1,l=n.target.distanceBetween||1,g=n.target.distanceEnd||1,m=e,f=R.vp().h,h=[],R.each(u,function(e){var t=R.where(e),r=t.c.b-m,i=o-t.c.b,r=f*(h.length?l:p)<r&&f*g<i;(r=r&&n.target.qualifier?n.target.qualifier(e):r)&&(m=t.c.b,h.push(e))}),h.length?(R.log("DomBuilder InContent - injecting "+h.length+" targets for",n.id),R.each(h,function(e,t){var r=R.assign({},n),t=(r.id+="_"+(t+1),j(r));e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),R.log("DomBuilder InContent - injected",t),n.afterInsert&&n.afterInsert(t)})):R.log("DomBuilder InContent inactive: not enough room for targets",n.id,{vp:f,range:o-e,breakpoints:u.length})):R.log("DomBuilder InContent inactive: range breakpoints not found",n.id,n.target.insertAfter)}(e);break;case"adhesion":n=e,R.log("Building adhesion unit: ",n),o=0,I[n.id]||x[n.id]||R.cr(n.id)||n.id&&((a={id:n.id,style:{width:"100%",position:"fixed",background:"rgba(44,62,80,.6)","z-index":1e3,opacity:1,padding:0,bottom:0},slot:n.slot}).slot.style={margin:"auto","text-align":"center",position:"relative","z-index":1},n.css_templates&&n.css_templates.length&&n.css_templates.forEach(function(e){A(e.active)&&(n.active_css_template=e,a.style=R.assign(a.style,e.container||{}),a.slot.style=R.assign(a.slot.style,e.slot||{}),o=e.injected_default_height||0)}),a.style.hasOwnProperty("top")&&delete a.style.bottom,n.attributes&&(a.attributes=n.attributes),p=j(a),a.slot.id||(a.slot.id=R.genID("adb-adhesion-slot-")),s=j(a.slot),p.appendChild(s),document.body.appendChild(p),w.trigger("db_adhesion_added",p),n.behaviour.destroy.close_btn&&(b=C(n,function(){w.trigger("db_adhesion_close",s);var e=document.getElementById(S);e&&(e.style.height="1px")}),R.prepend(p,b),w.on("gpt.render_raw",function(e,t){var r,t=t.slot.getSlotElementId(),t=document.getElementById(t);t&&"none"!==t.style.display&&(t=t.parentNode,x[t.id]&&x[t.id].close_btn_id&&(document.getElementById(x[t.id].close_btn_id).style.opacity=1,t=document.getElementById(t.id).clientHeight||0,(r=document.getElementById(S))&&(r.style.height=Math.max(t,o)+"px")))})),R.log("Injected element",n),x[n.id]=n);break;case"container":!function(e){if(e.id&&!I[e.id]&&!x[e.id]){var t=R.assign({id:e.id,style:{height:"1px",width:"1px"}},e),r=j(t),i,n,o;if(e.target||(e.target={appendTo:"body"}),e.target.appendTo){var a="function"==typeof e.target.appendTo?e.target.insertBefore():e.target.appendTo,i;if(!(i=document.querySelector(a)))return R.err("DomBuilderNoCTrgt1");i.appendChild(r)}else if(e.target.insertBefore){var s="function"==typeof e.target.insertBefore?e.target.insertBefore():e.target.insertBefore;if(!(i=document.querySelector(s)))return R.err("DomBuilderNoCTrgt2");i.parentNode.insertBefore(r,i)}R.log("Injected element",e),e.afterInsert&&e.afterInsert(r),e.script&&(n=document.createElement("script"),e.script.js&&(o=document.createTextNode(e.script.js),n.appendChild(o)),document.head.appendChild(n),R.log("Injected script for element",n)),x[e.id]=e}}(e);break;case"sticky_sidebar":z(e);break;case"sticky_sidebar_old":var d=e,c=T(d),u=[],p="adb-sidebar",y=document.getElementById(S)||{},_=[];try{var l=document.getElementsByClassName(p);if(l.length)R.each(l,function(e){e[0].remove()})}catch(e){R.log("Domebuidler error",e)}if(R.log("Building sidebar"),d.target&&d.target.insertInto)g=typeof d.target.insertInto=="function"?d.target.insertInto():d.target.insertInto;else g="body";var g,m,f,h=document.querySelector(g),b=document.createElement("div");h?(c.css_templates&&c.css_templates.length&&c.css_templates.forEach(function(e){A(e.active)&&(c.style=R.assign(c.style,e.style||{}),c.slot.style=R.assign(c.slot.style,(e.slot||{}).style||{}))}),b.classList.add(p),l={position:"absolute",top:0,"text-align":"center","z-index":5,margin:"0 auto"},g=(c.no_sidebar_default&&(l={}),b.style=O(R.assign(l,c.style)),Number.parseInt(b.style.top.replace("px","")||"0")),m=(b.style.height=h.offsetHeight-g+"px",h.appendChild(b),[].slice.apply(document.querySelectorAll("."+p))),f=(m.forEach(function g(m){R.log("Injecting sticky sidebar: ",c);var t=Number.parseInt(m.style.top.replace("px","")||"0"),f=c.dock_threshold?c.dock_threshold.bottom||c.dock_threshold.top:.01,h=(R.dom(S,f,0,function(){m.style.height=(y.offsetTop||0)-t-f+"px"}),c.timeout,c.max_ads||5),b=document.createElement("div"),v=document.createElement("div");"function"==typeof h&&(h=h()),v.style.position=b.style.position="sticky",v.style.paddingBottom=c.slot&&(c.slot.style||{})["padding-bottom"]||"10px",c.enable_debug&&(v.style.background="rgb(240, 170, 0)"),Object.keys(c.style||{}).forEach(function(e){b.style[e]=c.slot.style[e]}),v.style.top=c.slot.style.top||0,Object.keys(c.attributes||{}).forEach(function(e){b.setAttribute(e,c.attributes[e])}),c.clearContent&&-1===u.indexOf(m)&&(m.innerHTML="",u.push(m)),v.appendChild(b),m.appendChild(v),R.log("Injected sticky element",v),"function"==typeof c.postInject&&c.postInject(b);R.dombuilder_injectNextSlot=function(e){m.style.height=(y.offsetTop||0)-t-f+"px";var p=e.getSlotElementId(),l=e.getAdUnitPath();p===b.id&&(-1===h||_.length<=h)&&(e=function(){R.log("Scheduling next sidebar injection :",(e={dom_id:b.id,ad_unit_path:l},JSON.stringify(e,2))),_.push(p);var e=R.vp().h,t=R.vp().y,r=m.clientHeight,i=t+R.where(m).c.t,n=0,o=i,a=(R.each(m.children,function(e,t){n+=e.offsetHeight,t<m.children.length-1&&(o+=e.offsetHeight)}),1.5*e),s=r-n,d=o,c=Math.max(o,t)+a,u=c-d,a=0<h?Math.max(a,Math.floor(r/h)):a;R.log("Inject calculation",{maxAds:h,numAds:_.length,heightRemaining:s,viewportHeight:e,viewportY:t,parentTop:i,parentHeight:r,thisContainerBottom:c,thisContainerTop:d,containerHeight:u,minContainerHeight:a,willAddUnit:!(s-f<Math.max(a,u))}),a&&(u=Math.max(a,u)),s-f<u||(v.style["min-height"]=u+"px",v.style.position="unset",g(m))},c.skip_lazy?e():R.dom(b.id,.5,0,e))}}),!0),k=function(){f&&m&&m.length&&m.forEach(function(e){var t=R.vp().w,r="function"==typeof c.viewport.min?c.viewport.min():c.viewport.min,i="function"==typeof c.viewport.max?c.viewport.max():c.viewport.max;e&&(t<r||i<t)&&(h.removeChild(e),f=!1)})}):d.target&&d.target.ifNotFound&&(R.log("Sidebar insert not found; calling ifNotFound"),d.target.ifNotFound(R.wrapAsync(function(){R.log("Retrying sidebar build"),z(d)})));break;default:R.log("Invalid position for div",e)}else R.log("Dom Builder: Element viewport threshold not met",e);else R.log("Dom Builder: Element not active for this page",e)},T=function(t){return Object.keys(t).map(function(e){return[e,f(t[e])]}).reduce(function(e,t){return e[t[0]]=t[1],e},{})},f=function(e,t){return t=t||[],"function"==typeof e?e.apply(null,t):e},k=!1,h=!1,b=!1,z=function(d){d.sticky_merged||(d=R.deepMerge({sticky_merged:!0,sidebar:{attributes:{class:"adb-sidebar"},style:{position:"absolute",top:0,"text-align":"center","z-index":5,margin:"0 auto 19"}},container:{style:{"margin-bottom":"10px"}},ad:{style:{position:"sticky",top:"10px"}}},d)),R.log("DomBuilderSidebar element",d),d.css_templates&&d.css_templates.length&&d.css_templates.forEach(function(e){A(e.active)&&R.deepAssign(d,e)});try{if((e=document.getElementsByClassName(d.sidebar.attributes.class)).length){if(R.each(e,function(e){R.log("DomBuilderSidebar removing existing"),e.parentNode&&e.parentNode.removeChild(e)}),!d.defer_after_remove)return void window.requestAnimationFrame(function(){R.log("DomBuilderSidebar reentry after removal"),z(d)});d.defer_ar_called=!1}}catch(e){}if(d.defer_after_remove&&!d.defer_ar_called)e=e&&e.length?"(after old sidebar removal)":"(no previous sidebars)",R.log("DomBuilderSidebar deferring initialize",e,d),d.defer_ar_called=!0,d.defer_after_remove(d,function(){R.log("DomBuilderSidebar initialize continuing ",d),z(d)});else{var e=d.target&&d.target.insertInto?f(d.target.insertInto):"body",e=document.querySelector(e);if(e){function r(){var e,t,r=R.vp(),i=r.h;return d.dock_threshold&&(d.dock_threshold.bottom_el?(e=document.querySelector(d.dock_threshold.bottom_el))?(sidebarOffsetWhere=R.where(e),e=d.dock_threshold.use_bottom?sidebarOffsetWhere.c.b:sidebarOffsetWhere.c.t,t=d.dock_threshold.use_bottom?"bottom":"top",i=r.y+e,R.log("DomBuilderSidebar bottom calculated from "+t+' of "'+d.dock_threshold.bottom_el+'": '+i+"px")):R.log("DomBuilderSidebar bottom not found!",d.dock_threshold.bottom_el):d.dock_threshold.bottom&&(i-=d.dock_threshold.bottom,R.log("DomBuilderSidebar bottom calculated from screen bottom",{offset:d.dock_threshold.bottom,bottom:i}))),i}if(d.min_sidebar_height){var t=R.where(e),t=t.c.vp.y+t.c.t;e.children.length&&(i=e.children[e.children.length-1],t=(i=R.where(i)).c.y+i.c.b);var i=r()-t;if(!(i>=d.min_sidebar_height))return void R.log("DomBuilderSidebar min height not available; "+i+" < "+d.min_sidebar_height)}function c(e){var t,r;return e&&p.length&&b===u&&(r=f(d.final_ad_gets_extra_height,[e]),R.log("DomBuilderS should add height?",r),r)?(r=p[p.length-1].parentNode,t=parseInt(String(r.style.height).replace("px","")),r.style.height=(r=t+e)+"px",R.log("DomBuilderSidebar added remaining height to final ad",{was:t,add:e,now:r}),e):0}var n,u=j(d.sidebar),p=(b=u,[]),l=0,g=0,m=R.wrapAsync(function(){var e=R.where(u),e=(g=e.c.vp.h,e.c.vp.y+e.c.t),t=r();n=l,(l=Math.floor(t-e))<n?R.err("SidebarAreaShrunk"):u.style.height=l+"px"}),t=(R.log("DomBuilderSidebar sidebar injecting: ",d),e.appendChild(u),R.wrapAsync(function(){if(R.log("DomBuilderSidebar initializing",d),u.parentNode&&b===u){m();for(var e=Math.floor(l/g),r=!0,i=1.5*g,n=(d.min_container_height&&(i=d.min_container_height(l,g,e,r)),d.max_ads||5),o=("function"==typeof n&&(n=n(l,e)),i),t=Math.floor(l/i),a=(-1<n&&n<t&&(t=n,o=Math.floor(l/t)),0),s=R.wrapAsync(function(){if(b!==u)R.err("SidebarInjectExpired");else{m();var e=l-a;if(!r){if(-1<n&&p.length>=n)return R.log("DomBuilderSidebar not injecting - max ads reached",e),void(a+=c(e));var t=Math.floor(e/g);if((i=d.min_container_height(e,g,t,r))<o&&(i=o),e<o)return R.log("DomBuilderSidebar not injecting - not enough room",{avail:e,needs:i}),void(a+=c(e));o=i}t=j(d.container),e=parseInt(String(R.deepAccess(d.container,"style.margin-bottom","0")).replace("px","")),e=(t.style.height=o-e+"px",f(d.enable_debug)&&(t.style.background="rgb(240, 170, 0)"),u.appendChild(t),j(d.ad));f(d.enable_debug)&&(e.style.background="rgb(0, 240, 170)"),t.appendChild(e),p.push(e),a+=Math.max(o,R.where(t).c.h),R.log("DomBuilderSidebar inject",{n:p.length,max_ads:n,view:g,sidebar:l,min_container:i,actual_container:o,remaining:l-a})}});p.length<t;)s();r=!1,R.dombuilder_injectNextSlot=s,h=function(e){u===b&&0<=p.indexOf(e)&&R.dom(e,.5,0,function(){u===b&&(R.log("DomBuilderSidebar ad "+e.id+" in view, adding next"),s())})}}else R.err("SidebarRemovedBeforeInit")}));window.requestAnimationFrame(t)}else d.target&&d.target.ifNotFound?(R.log("DomBuilderSidebar insert not found; calling ifNotFound",d),d.target.ifNotFound(R.wrapAsync(function(){R.log("DomBuilderSidebar retrying build"),z(d)}))):R.log("DomBuilderSidebar could not find injection target",d)}},j=(window.addEventListener("resize",function(){k&&k()}),w.on("adb.gamconfig_slot_configure",function(e,t,r,i){h&&h(i)}),function(t){var e,r=document.createElement("div");return t.id&&(r.id=t.id),t.style&&(r.style=O(t.style)),t.attributes&&(e=Object.keys(t.attributes),R.each(e,function(e){R.log("setting attribute",e,t.attributes[e]),r.setAttribute(e,t.attributes[e])})),t.children&&R.each(t.children,function(e){r.appendChild(j(e))}),r}),O=function(e){for(var t=Object.keys(e),r="",i=0;i<t.length;i++)r+=t[i]+":"+e[t[i]]+";";return r},i=function(t){try{document.getElementById(t.id).remove(),R.log("Unloaded div",t),delete x[t.id]}catch(e){R.log("Unknow div to unload",t)}},C=function(e,t){var r={style:{"line-height":"19px","z-index":2,opacity:0,cursor:"pointer",background:"rgba(44,62,80,.6)",color:"rgb(255, 255, 255)","text-align":"center",position:"absolute",top:"-20px",right:"0px",width:"20px",height:"20px","border-radius":"5px 5px 0px 0px","font-weight":"bolder","font-family":"monospace"},id:R.genID("close-btn-")},r=(e.close_btn_id=r.id,e.active_css_template&&e.active_css_template.close_btn&&(r.style=R.assign(r.style,e.active_css_template.close_btn||{})),j(r));return r.innerHTML="&#x2715;",r.addEventListener("click",function(){e.behaviour.destroy.close_btn.pageview||(I[e.id]=e,R.cw(e.id,!0)),t(),document.getElementById(e.id).removeEventListener("click",i),i(e)}),r},t=function(){var e;document&&document.body?(R.log("Body loaded. Initialising DomBuilder module"),!(e=v).elements||!R.isarr(e.elements)||e.elements.length<1?R.log("No dom builder elements "):(R.log("Dom Builder enabled",e),e=e.elements,R.each(e,function(e){E(e)}))):setTimeout(t,100)};v.initialize_immediately&&t()}},{"../utils.js":39}],28:[function(e,t,r){var i=e("../utils.js");t.exports=function(t,e){e.on("*",i.wrapAsync(function(e){t[e]&&t[e].apply(null,arguments)}))}},{"../utils.js":39}],29:[function(e,t,r){function M(e){var t=e.js.split(".");if("window"==t[0])return t=t[1],window.hasOwnProperty(t)?window[t]:void 0;W.log("GamConfig JS read fail",e)}var W=e("../utils.js"),L=e("../config.js"),G=(e("../unit.js"),0),V={};t.exports=function(r,e){function t(m,f){var t,r,o,h,b,v,y,_,w,x,e,a,n,i,I,S,A,s,d,c,u,p,l,g,E,T,k,z=m.active;(z=z&&z.js?M(z):z)&&z.url&&(new RegExp(z.url,"i"),z=W.url().href.match(z.url)),z?(W.log("GamConfig enabled",m),m.pageType&&(t=[],(r=m.pageType)&&r.js&&(r=M(r)),W.each(m.slots,function(e){e.page_type===r&&t.push(e)}),W.log("GamConfig page type slots: ",{total_slots:m.slots.length,page_type_slots:t.length,slots:t}),m.slots=t),m.collapseEmptyDivs&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().collapseEmptyDivs()}),m.centering&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().setCentering(!0)}),m.safeFrames&&AdBridg.gpt.cmd.push(function(){W.log("Requiring GPT Sandbox SafeFrames"),AdBridg.gpt.pubads().setSafeFrameConfig({sandbox:!0})}),o={},h=function(e){AdBridg.cmd.push(function(){W.each(e,function(e,t){var r=e;void 0!==(e=(e=e&&e.js?M(e):e)&&e.qs?W.qs(e.qs.match)?e.qs.value:void 0:e)?(W.log("GamConfig setting page targeting: ",t,e),AdBridg.gpt.pubads().setTargeting(t,e),o[t]=e):W.log("GamConfig targeting empty",t,e,r)})})},f.on("pub.config",function(e,t){h(t.targeting)}),m.targeting&&h(m.targeting),b=function(e,t){var r=e.getAttribute(D)||"",r=(r&&(r+=";"),(r+t+"@"+W.dts()+"ms").substr(0,200));200==r.length&&(r+="..."),e.setAttribute(D,r)},(e=function(){V={},v={},y={},_={},x=!(w={}),W.each(m.slots,function(t){if(L.libSettings().gamconfig_filter&&!L.libSettings().gamconfig_filter(t))W.log("GamConfig slot skipped by pub",t);else if(t.dom_ad_class)x=!0,w[t.dom_ad_class]=t;else{if(t.inject&&!document.getElementById(t.dom_id)){var e=document.createElement("div");e.id=t.dom_id;try{document.body.appendChild(e)}catch(e){W.err("GamConfig cannot inject",t.dom_id,e)}}e=t.dom_id;v[e]||y[e]?W.err("GamConfig duplicate dom_id",e):v[e]=t}})})(),a=function(e,t){if(v[e.id])return!0;var r,i=e.getAttribute&&(e.getAttribute(O)||e.getAttribute(j));if(w[i])return!0;if(r=(W.qs("adb_gcerr")?e.children:e.children||[]).length,t&&r)for(var n=0;n<r;++n)if(a(e.children[n],!0))return!0;return!1},n=function(){clearTimeout(I),I=setTimeout(function(){A()||c()},10)},i=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("attributes"==r.type)return a(r.target,!1)?n():void 0;for(var i=0;i<r.addedNodes.length;++i){r.addedNodes[i];if(a(r.target,!0))return n()}}},S=m.scan_interval||200,A=function(){clearTimeout(I);var c=!1;if(x)for(var c=!0,e=document.querySelectorAll("["+O+"],["+j+"]"),t=0;t<e.length;++t){var r,n,i,o,a,s=e[t],d=s.getAttribute(O)||s.getAttribute(j);d&&(!(o=L.libSettings("gamconfig_ad_class_mutate",d,s,L.libSettings()))&&!1!==o||(r=d,d=o),w[d]?(o=d.replace(/[^\w\d]+/gi,""),V[i=o]=(V[i]||0)+1,n=V[i],i=m.use_pg_in_ids?"p"+G+"_":"",s.setAttribute(B,n),s.id||(s.id=P+o+"_"+i+n),s.removeAttribute(O),s.removeAttribute(j),s.setAttribute(C,d),W.log("GamConfig - setting up ad class",s.id,d,{base:w[d],me:{dom_id:s.id,dom_ctr:n}}),o=W.deepAssign({},w[d]),(a=W.deepAssign({dom_id:s.id,dom_ctr:n},o)).targeting&&W.each(a.targeting,function(e,t){var r,i;"object"==typeof e&&e.format&&(a.targeting[t]=(r=e.format,i=n,t=r.match(/\{\{[^\}]+\}\}/g),W.each(t,function(e){var t=e.replace(/[\{\}]/g,"");"dom_ctr"===t?r=r.replace(e,i):"dom_ctr_zi"===t?r=r.replace(e,i-1):W.err("GamConfig unknown slot targeting format",e)}),r))}),v[s.id]=a):(!1!==d&&W.err("GamConfig invalid ad class attribute",d,r?" (original: "+r+")":""),s.removeAttribute(O),s.removeAttribute(j),s.setAttribute(R,d+(r?"("+r+")":""))))}var u=[],p=[],l=[],g=(W.each(v,function(r,i){var n=document.getElementById(i);if(n)if(L.libSettings("gamconfig_skip_element",i,r))c=!0;else{var t,o,a,s,d,e=n.getAttribute(N),e=(e&&""!=e&&(W.log("Path Override: ",N),r.gpt_path=e,delete r.gpt_path_builder),n.getAttribute(U));if(e&&""!=e&&(e=e.split(/[,]+/),W.log("parse_all_page_kvp",e),t={},W.each(e,function(e){e=e.split(/[:]+/);2===e.length&&(t[e[0]]=e[1])}),W.log("Targeting map",t),h(t)),n.innerHTML="",b(n,"detected"),r.size_map){e=L.libSettings().gamconfig_viewport;if((r=e?e(r):r).size=AdBridg.getSizes(r.size_map),delete r.size_map,!r.size.length)return l.push(i),void b(n,"vp_no_size")}l.push(i),y[i]||(y[i]=!0,u.push(r),-1===q.indexOf(i)&&q.push(i),r.gpt_path_builder&&(r.gpt_path=(a=i,s=n,d=""+(o=r).gpt_path_builder,e=d.match(/\{\{[^\}]+\}\}/g),W.log("GamConfig extracted curlies: ",e),W.each(e,function(e){var t,r=e.replace(/[\{\}]/g,""),i="";r.match(/^lib\.pub\./)?(t=r.replace("lib.pub.",""),(i=(L.libSettings().pub||{})[t])||(L.libSettings().pub||{}).hasOwnProperty(t)||W.err("GamConfig PathBuilder setting not present:",e),d=d.replace(e,i)):r.match(/^lib\.adb\./)?(t=r.replace("lib.adb.",""),(i=L.libSettings("gamconfig_curly",t,o,a,s,L.libSettings())||AdBridg.global(t)||"")||W.err("Warning: GamConfig PathBuilder AdBridg global empty/not present:",t),d=d.replace(e,i)):W.err("GamConfig unsupported gpt_path_builder part:",e)}),W.log("GamConfig gpt_path_builder",o.gpt_path_builder,d),d)),r.dom_ad_class&&f.on("unit.init_config",function(e,t){t.get("dom_id")==i&&t.set("dom_ad_class",r.dom_ad_class)}),r.events={"gpt.defined":function(e){b(n,"gpt_define")},"gpt.rendered":function(e,t){b(n,"gpt_render:"+t.sourceAgnosticCreativeId)},"gpt.viewed":function(e,t){b(n,"gpt_view")}},f.trigger("adb.gamconfig_slot_configure",r,i,n)),_[i]=!0,p.push(i)}else c=!0}),W.each(l,function(e){delete v[e]}),L.libSettings().gamconfig_fulfillment);return u.length&&(W.log("GamConfig configuring slots",u),g?g(u):AdBridg.cmd.push(u)),p.length&&AdBridg.cmd.push(function(){W.each(p,function(e){AdBridg.display(e)})}),c&&!MutationObserver&&(I=setTimeout(A,S)),c},W.gamconfig_scanner=A,d=function(){MutationObserver?(A(),s&&c(),(s=new MutationObserver(i)).observe(document.body,{attributes:!0,attributeFilter:["id",O,j],childList:!0,subtree:!0}),W.log("GamConfig MutationObserver added")):(W.log("GamConfig polling started"),A())},c=function(){clearTimeout(I),s?(s.disconnect(),s=!1,W.log("GamConfig MutationObserver disconnected")):W.log("GamConfig polling stopped")},l=p=!(u=!0),f.on("pub.spa_pv_shutdown",g=function(){if(!p){p=!0;try{W.log("GamConfig stopping for SPA"),e(),c(),W.each(o,function(e,t){W.log("GamConfig erasing KVP",t),AdBridg.gpt.pubads().setTargeting(t,[])});var i=[],n=[];W.each(AdBridg.gpt.pubads().getSlots(),function(e){var t,r;L.libSettings().gamconfig_filter_destroy_slots&&!L.libSettings().gamconfig_filter_destroy_slots(e)?W.log("Gamconfig not destroying this slot: ",e):(r=e.getSlotElementId(),t=document.getElementById(r),(r=0<=q.indexOf(r))&&i.push(e),t&&r&&(n.push(t),b(t,"destroyed"),(e=t.getAttribute(O)||t.getAttribute(j)||t.getAttribute(C)||t.getAttribute(R))&&(t.removeAttribute(C),t.removeAttribute(R),t.setAttribute(O,e),(t.id||"").match(P)&&t.removeAttribute("id"))))}),i.length&&AdBridg.destroySlots(i),u=p=!1,l&&k()}catch(e){u=p=!1,W.err("SPAPvShutdownFail",e)}}}),E=W.url().page,T=L.libSettings("gamconfig_prevent_doubleinit"),k=function(){if(T){var e=W.url().page;if(e===E)return void W.log("GamConfig prevented SPA re-init from same URL.")}p||u?(l=!0,u&&g()):(W.log("GamConfig restarting SPA"),G+=1,u=!(l=!1),d())},f.on("pub.spa_pv_initialize",k),0!=m.autostart||F?d():W.log("GamConfig waiting for publisher to initialize with action=spa_pv_initialize.")):W.log("GamConfig not enabled")}function i(){document&&document.body?(W.log("Body loaded. Initialising Gamconfig module"),t(r,e)):setTimeout(i,100)}var j="adbridg-ad-class",O="data-adbridg-ad-class",C="data-adbridg-ad-class-loaded",R="data-adbridg-ad-class-invalid",B="data-adbridg-ad-class-ctr",D="data-adbridg-phase",P="adbridg_ad_",N="data-adbridg-gam-path",U="data-adbridg-page-kvps",q=[],F=0,n=(e.on("pub.spa_pv_initialize",function(){F=1}),e.on("pub.config",function(e,t){t.targeting&&(r.targeting?W.deepAssign(r.targeting,t.targeting):r.targeting=t.targeting)}),L.libSettings().gamconfig_defer);"function"==typeof n?(W.log("GamConfig waiting to initialize"),AdBridg.cmd.push(function(){n(i)})):AdBridg.cmd.push(i)}},{"../config.js":19,"../unit.js":38,"../utils.js":39}],30:[function(e,t,r){var s=e("../utils.js");t.exports=function(e,a){var t={"gamkvp.getids":{validate:/^i[\w\d]{2}$/,update:/^i/},"gamkvp.get_test_codes":{validate:/^t[\w\d]{2}$/,update:/^t/},"gamkvp.get_user_segments":{validate:/^u[\w\d]{2}$/,update:/^u/}};googletag.cmd.push(function(){a.on("auction.before_bids",function(){s.each(t,function(t,r){var i,e,n,o=[];a.trigger(r,o),o=o.filter(function(e){return!!String(e).match(t.validate)||(s.err("GamKVP.badValue",r,e),!1)}),s.log("GamKVP setting values in adb_pvd:",r,o),i=t.update,o=o,e=googletag.pubads().getTargeting("adb_pvd")||[],n=[],e.forEach(function(e){String(e).match(i)||n.push(e)}),o&&o.length&&(n=n.concat(o)),googletag.pubads().setTargeting("adb_pvd",n),s.log("GamKVP set adb_pvd values: ",n)})})})}},{"../utils.js":39}],31:[function(Z,e,t){var ee=Z("../utils.js"),r=Z("../modulewrapper.js");e.exports=r({name:"icu",track_as:"z"},function(s,w){var U=s.tick_ms||100,i=15e3,q=5e3,x={},n={unknown:0,above_viewport:1,below_viewport:2,partially_above_viewport:3,in_viewport:4,partially_below_viewport:5},F={"160x600":1,"300x250":2,"300x600":3,"320x50":4,"320x100":5,"468x60":6,"728x90":7,"970x90":8,"970x250":9},u=0,p=0,l=0,g=ee.dts(),o=0,m=!1,f=!1,t={init:0,focus:1,mousemove:2,mousedown:3,click:4,touchstart:5,touchend:6,keydown:7,keyup:8,scroll:9},I=ee.qs("adb_icu_box"),r=!0,a=(ee.qs("adb_icu")||(0===s.sample?r=!1:s.sample&&s.sample<1&&(r=Math.random()<=s.sample)),s.watch_gpt||r||I);function d(e){return(Math.floor(e)||0).toString(36)}function c(e){return d(100*e)}function h(e){return e.c?(e=Math.round(e.c.w)+"x"+Math.round(e.c.h),F[e]||e):"0x0"}function b(e){return"number"!=typeof e&&(e=ee.dts()),Math.floor(e/10).toString(36)}function M(e){return Math.floor(20*(e.o&&e.o.v||0))}function W(e){return M(e).toString(36)}function v(e){return n[e.p]}function y(e){return.05<=e.v}function L(e){return e.o&&.95<=e.o.o}function G(e){return 0<v(e)?y(e)?W(e):d(e.d):"0"}function S(e){return{t:b(),p:(r=(t=e).c?(Math.floor(t.c.vp.y+t.c.t)||0).toString(36):"0",i=t.c?(Math.floor(t.c.vp.y)||0).toString(36):"0",String(v(t))+r+"."+i),d:G(e),i:(m?"1":"0")+o+b(ee.dts()-g)};var t,r,i}function A(e){return[e.dt,e.a,e.uid,e.uuid]}function V(e){e=e||ee.dts(),l=e+i}function E(e,t){r&&Z("../analytics.js").sqz(q,"zi",e,"z",t),V()}function _(e,t){var r=x[e];if(r.dt&&r.m.length){for(var t=S(t),i=A(r),t=[r.dctr,r.mctr,r.r.t,r.r.p,r.r.d,r.r.i,r.v.t,r.v.p,r.v.d,r.v.i,t.t,t.p,t.d,t.i].join(","),n=[],o=(ee.each(r.s,function(e){0<e[0]?n.push(e[0].toString(36)+"."+e[1]):n.push(e[1])}),n=n.join(","),[]),a=20;0<=a;--a){for(var s,d,c,u,p,l=0,g=0,m=0,f=0,h=0,b=0,v=0;v<r.m.length;++v){var y,_=r.m[v];_.vn>=a?(y=_.d*_.vn,l+=_.d,g+=y,h+=_.d,b+=y,m=Math.max(h,m),f=Math.max(b,f)):b=h=0}0<g&&(l!==s||m!==c||g!==d||f!==u)&&(s=l,d=g,c=m,u=f,p=a.toString(36)+"."+l.toString(36)+"."+g.toString(36),l===m&&g===f||(p+="."+m.toString(36)+"."+f.toString(36)),o.push(p))}o=o.join(","),t=[t,n,o].join("_");!r.v5r&&1e3<r.v5&&(t+="_1",r.v5r=!0,I&&(r.av=R),ee.logl("icu",R,C," // ",e,"counted iab view"),w.trigger("icu.iab",r)),ee.logl("icu",R,C," // ",e,"finalized"),E(i,t),r.mctr+=1}else ee.logl("icu",R,C," // ",e,"stopped empty");r.lts=0,r.v=!1,r.ve=!1,r.m=[]}ee.isdebug()&&(AdBridg.icu={watch:a,sampled:r,sampling:s.sample||1,measurements:x,stat:function(){var e=ee.dts(),r="unknown";return ee.each(t,function(e,t){o===e&&(r=t)}),{last_measure:u,measure_ms:e-u,last_evt:r,idle_ms:e-g,idle:m}}});var T=!1,k=!1,z=!1,j=!1,O=!1,C=0,R=0,K=ee.wrapAsync(function(e){if(O=!0,U<e-R||j){C+=1,R=e;var t=!1;u=ee.dts(),p=u+500,m=m||3e4<u-g,!f&&m?(f=m,w.trigger("icu.idle")):!m&&f&&(f=m,w.trigger("icu.active")),l&&l<R&&(j=!(l=!1));var r,i,n,o,a,s,d,c=[];for(r in x)x.hasOwnProperty(r)&&(i=x[r],n=ee.where(r,!0,i.ok),I&&(i.dbw=n),n.v?(1===n.v&&i.lv<1&&w.trigger("icu.onscreen",i,n),i.lv?1===i.lv&&n.v<1&&w.trigger("icu.leaving",i,n):w.trigger("icu.appearing",i,n),!i.loo&&n.o&&n.o.o?(i.loo=!0,w.trigger("icu.obstructed",i,n)):!i.loo||n.o&&n.o.o||(i.loo=!1,w.trigger("icu.unobstructed",i,n)),i.lv=n.v):i.lv&&(i.lv&&w.trigger("icu.offscreen",i,n),i.lv=0),i.mx||(m||!y(n)||L(n)?(i.v&&(ee.logl("icu",R,C," // ",r,"stopped",m,!y(n),L(n)),_(r,n),j=!0),y(n)||function(e){D[e]||(D[e]=!0,ee.dom(e,.01,0,J))}(r)):(t=!0,o=Math.max(1,Math.floor((R-i.lts)/10)),(s=h(n))!=i.s[i.s.length-1][1]&&(a=Math.max(1,Math.floor((R-i.rts)/10)),i.s.push([a,s]),ee.logl("icu",R,C," // ",r,"size changed",a,i.s[i.s.length-1][1],s),w.trigger("icu.resized",i,n)),i.v?(a=R-i.lts,i.vt+=a,i.va+=a*(n.o&&n.o.v||0),n.o&&.5<=n.o.v&&(i.v5+=R-i.lts),i.lts=R,s=W(n),d=i.m.length-1,(d=0<=d&&i.m[d])&&d.v==s?(d.d+=o,d.te=R):i.m.push({d:o,t:R,v:s,vn:M(n)}),c.push({t:i,d:r,w:n}),6e4<=i.vt&&(ee.logl("icu",R,C," // ",r,"tracker vt max",i.vt),i.mx=!0,j=!0)):(ee.logl("icu",R,C," // ",r,"started"),X(i,n,R)))));j&&ee.each(c,function(e){_(e.d,e.w),i.mx||(ee.logl("icu",R,C," // ",e.d,"restarted"),X(e.t,e.w,R))}),t||(ee.logl("icu",R,C," // nothing to measure; ending ticks"),l=k=!1),I&&ee.each(x,H),j=!1}z=z&&!(k=!0),k&&(T=window.requestAnimationFrame(K)),O=!1});function B(){z=!0,O||(T&&window.cancelAnimationFrame(T),T=window.requestAnimationFrame(K))}var D={};function J(e){D[e]=!1,B()}function X(e,t,r){e.v=S(t),e.lts=r,e.vt=e.vt||0,e.va=e.va||0,e.v5=e.v5||0,l||V(r)}function Y(e){return e.id?e.tagName+"#"+e.id:e.tagName+"."+String(e.className).replace(/^([^\s]+).*$/,"$1").replace(/[^a-z0-9_-]/i,"")}function P(e){var t=document.createElement("div");return t.style="display:inline-block;background:rgba(0,0,0,.6);padding:2px 4px;margin:1px 3px;color:white;",t.innerHTML=e,t}function N(e){return((Math.floor(e/100)||0)/10).toString().replace(/^(\d+\.\d).+$/,"$1").replace(/^([^\.]+)$/,"$1.0")+"s"}function H(e,t){var r,i,n,o,a=e.dbw,s=document.getElementById(t);s&&(n=t+"__adb_dom_debug",(o=document.getElementById(n))?r=o.children[0]:((o=document.createElement("div")).id=n,(debug_el_container=document.createElement("div")).style="position:relative;width:0px;height:0px;margin:0;padding:0;",debug_el_container.appendChild(o),s.children.length?s.insertBefore(debug_el_container,s.children[0]):s.appendChild(debug_el_container),(r=document.createElement("div")).style="background:rgba(255,255,255,.7)",o.appendChild(r),o.appendChild(P(t+" #"+e.dctr+" render @ "+N(e.rts))),e.dbgt={}),!e.dbgt.gv&&e.gv&&(e.dbgt.gv=!0,o.appendChild(P("GPT view @ "+N(e.gv)))),!e.dbgt.v5&&1e3<e.v5&&(e.dbgt.v5=!0,o.appendChild(P("AdBridg IAB view flag @ "+N(R)))),!e.dbgt.v5r&&e.av&&(e.dbgt.v5r=!0,o.appendChild(P("AdBridg IAB view sent @ "+N(e.av)))),n=(a.o||a).v,s=Math.floor(100*n)+"% in view",m&&(s+=" (ux_idle)"),s+="; "+Math.floor(e.va/e.vt*100)+"% over "+N(e.vt),r.innerText!==s&&(t=n<1||m?n<.5||m?"180,30,30,.9":"180,180,30,.9":"30,180,30,.9",e=a.c.w-10+"px",o.style="position:absolute;background:rgba("+t+");left:5px;top:5px;width:"+e+";height:"+(a.c.h-10)+"px",a.o&&a.o.o&&(i=[],ee.each(a.o.e,function(e,t){i.push("["+t+"="+Math.floor(100*e.o)+"%] "+Y(e.el))}),s+="; intersect "+i.join(", ")),r.innerText=s,n=ee.where(r,!0),t=String(n.o&&n.o.v||n.v),r.getAttribute("data-adb-vmw")!==t&&(r.setAttribute("data-adb-vmw",t),s=a=!1,1==(t=v(n))||3==t?a=!0:2==t||4==t?s=!0:n.o&&n.o.e.tl?a=!0:n.o&&n.o.e.br&&(s=!0),(s||a)&&(n=(t=ee.where(o,!0)).o&&t.o.v||t.v,o=v(t),!a||!n||2===o||4===o||t.o&&t.o.e.br?!s||!n||1===o||3===o||t.o&&t.o.e.tl||(r.style.position="initial",r.style.bottom="initial"):(r.style.position="absolute",r.style.bottom="0px",r.style.width=e)))))}function Q(e,t,r,i,n){(i=!!i&&e)&&s.modify_dom_id&&(i=s.modify_dom_id(i));var o=ee.where(e,!0),a=(x[e]&&_(e,o,ee.dts()),h(o));return x[e]={a:r,d:e,dt:i,ok:n,dctr:t,mctr:1,uid:0,uuid:0,lts:0,rts:ee.dts(),r:S(o),s:[[0,a]],m:[],lv:o.v,loo:o.o&&o.o.o||0},B(),x[e]}var $;w.on("gpt.render,gpt.render_pt",function(e,t,r,i){var n;a&&(n=r.slot.getAdUnitPath(),s.modify_gpt_path&&(n=s.modify_gpt_path(n)),r=r.slot.getSlotElementId(),r=Q(r,i,n,!0),t&&(r.uid=t.id,r.uuid=t.unique_id),E(A(r),[".",r.dctr,r.s[0][1],r.r.t,r.r.p,r.r.d,r.r.i].join(",")))}),w.on("gpt.viewed_raw",function(e,t){var r,i;a&&(t=t.slot.getSlotElementId(),!(r=x[t])||r.v&&r.m.length||r.v5r||(t=ee.where(t,!0)).o&&!t.o.v&&(i=[(t=t).i||"",String(n[t.p]),G(t),c(t.v),t.in,t.c?d(t.c.t):"0",t.c?d(t.c.l):"0",t.c?d(t.c.w):"0",t.c?d(t.c.h):"0"],t.o&&(i.push(c(t.o.o)),i.push(c(t.o.v)),t.o.e&&ee.each(t.o.e,function(e,t){i.push(t+";"+e.o+";"+Y(e.el))})),t=i.join(","),ee.logl("icu","empty at GPT view",r.dt),E(A(r),["*",r.dctr,r.mctr,t].join(","))),I&&r&&(r.gv=ee.dts()),j=!0,B())}),window.addEventListener&&($=function(e){m=!1,g=ee.dts(),o=t[e.type]||"u",p<g&&B()},ee.each(Object.keys(t),function(e){"init"!==e&&window.addEventListener(e,$,!0)}),window.addEventListener("blur",function(){m=!0})),w.on("icu.watch",function(e,t,r,i){Q(t,1,!1,r,i)}),w.on("icu.ignore",function(e,t){x[t]&&delete x[t]})})},{"../analytics.js":17,"../modulewrapper.js":35,"../utils.js":39}],32:[function(t,e,r){function s(e){i=e,d.thread(function(){t("../analytics.js").meta("iD",i)})()}var i,d=t("../utils"),c=t("../ajax"),u=t("../config"),p="User ID - ID5 submodule: ",l="id5id",g=l+"_last",m=30;function n(e){return l+"_"+e+"_nb"}function f(e,t){d.lw(n(e),t,m,!0)}function h(e){t=e;var t=((t=d.lr(n(t),!0))?parseInt(t):0)+1;return f(e,t),t}function b(t){var r=0;if(t&&"string"==typeof t.universal_uid){let e={uid:t.universal_uid,ext:{linkType:r=t.link_type||r}};r=d.deepAccess(t,"ab_testing.result");switch(s("A"),r){case"control":d.log(p+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),e.ext.abTestingControlGroup=!0,s("C");break;case"error":d.log(p+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1"),d.err("ID5ABERR");break;case"normal":d.log(p+"A/B Testing - user is NOT in the Control Group"),e.ext.abTestingControlGroup=!1}return d.log(p+"Decoded ID",e),e}}s("N"),e.exports=function(n,e){if(n.active&&!n.active())d.log("ID5 disabled");else{var o,a=d.lr(l,!0),t=d.lr(g,!0);if(d.log("ID5 enabled",a,t),n.google_esp&&(window.ID5EspConfig={partnerId:n.partner}),a){h(n.partner);try{a=JSON.parse(decodeURIComponent(a)),o=b(a),d.log(p+"using cached ID",a)}catch(e){d.err("ID5DecodeErr",e)}}var r=!1;t&&(t=new Date(t).getTime(),new Date((new Date).toUTCString()).getTime()-t<288e5&&(r=!0)),r||u.afterConsent(function(e,t){var r=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies?1:0,i={partner:n.partner,gdpr:r,nbPage:h(n.partner),o:"pbjs",rf:""+window.top.location,top:1,u:window.location.href,v:"v7.31.0"},r=(r&&e.consentString&&(i.gdpr_consent=e.consentString),t&&t.uspString&&(i.us_privacy=t.uspString),a&&a.signature&&(i.s=a.signature),n.pd&&(i.pd=n.pd),n.provider&&(i.provider=n.provider),n.ab&&(i.ab_testing={enabled:!0,control_group_pct:n.ab}),d.log(p+"requesting an ID from the server",i),{url:"https://id5-sync.com/g/v2/"+n.partner+".json",method:"POST",withCredentials:!0,data:JSON.stringify(i)});c(r,function(e,t){if(e)s("E"),d.log(p+"getId fetch encountered an error",error);else{var r;if(t)try{r=JSON.parse(t)}catch(e){return d.err("ID5PE"),void s("E")}r?(d.log(p+"response received from the server",r),f(n.partner,0),r.privacy&&d.lw("id5id_privacy",JSON.stringify(r.privacy),m,!0),d.lw(l,encodeURIComponent(JSON.stringify(r)),90,!0),o=b(a=r),d.lw(g,(new Date).toUTCString(),90,!0)):(d.err("ID5EM"),s("E"))}})}),e.on("gamkvp.getids",function(e,t){o?t.push("iDy"):t.push("iDn")}),e.on("unit.config",function(e,t){if(o){let e={id:o.uid,atype:1};o.ext&&(e.ext=o.ext),t.set("userIdAsEids.id5id",{source:"id5-sync.com",uids:[e]})}})}}},{"../ajax":16,"../analytics.js":17,"../config":19,"../utils":39}],33:[function(r,e,t){var i,n=r("../utils"),o="_pubcid",a="PublisherCommonId",s=n.cr("_pubcid_optout"),d="N";try{s||("object"==typeof window[a]?(i=window[a].getId(),d="A",n.log("Read pubcid from API:"+i)):(i=n.cr(o),d=i?"C":(i=n.lr(o))?"L":(i=n.genUUID(),"G"),n.cw(o,i,1825),n.lw(o,i),window[a]={getId:function(){return i}},n.log("Read pubcid from cache"+i)))}catch(e){n.err("pubcid init fail",e),d="E"}e.exports=function(e,t){i&&t.on("unit.config",function(e,t){t.set("userId.pubcid",i),t.set("userIdAsEids.pubcid",{source:"pubcid.org",uids:[{id:i,atype:1}]})}),t.on("gamkvp.getids",function(e,t){i?t.push("i1y"):t.push("i1n")}),n.thread(function(){r("../analytics.js").meta("i1",d)})()}},{"../analytics.js":17,"../utils":39}],34:[function(e,t,r){var d=e("../utils.js");t.exports=function(e,t){var r="_adbrh",i=r,n=d.qs("adb_rh");if("0"===n?d.cw(r,"",0):n&&d.cw(r,"1",365),d.cr(r)){d.log("RH ad creative history activated.");var o={dfp:[],adb:[]};try{(o=(o=localStorage.getItem(i))&&JSON.parse(o))&&o.dfp||(o={dfp:[],adb:[]})}catch(e){d.err("RH failed to load history from local storage")}function a(e,t){return{t:(new Date).toString(),d:d.url().domain,u:d.url().page,i:e.getSlotElementId(),s:e.getAdUnitPath(),e:t}}function s(e,t){t=e.length-t;0<t&&e.splice(0,t),localStorage.setItem(i,JSON.stringify(o))}t.on("gpt.render_raw",function(e,t){var r={advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:t.creativeId,isEmpty:t.isEmpty,lineItemId:t.lineItemId,size:t.size,sourceAgnosticCreativeId:t.sourceAgnosticCreativeId,sourceAgnosticLineItemId:t.sourceAgnosticLineItemId},t=(d.each(r,function(e,t){e||delete r[t]}),a(t.slot,r));o.dfp.push(t),s(o.dfp,20)}),t.on("bid.render",function(e,t){t=a(t.config.unit.get("gpt_slot"),{config:t.config.unit.alias,bidder:t.config.bidder_name,bidderid:t.config.bidder_unit_id,extras:t.extras,ad:escape(t.creative)});o.adb.push(t),s(o.adb,20),d.rec(["RH",JSON.stringify(t)])});n=document.createElement("DIV");n.style="display:block;cursor:pointer;position:fixed;z-index:99999999;top:5px;right:50%;padding:5px 20px;background:red;border:black;box-shadow:1px 2px 6px white;color:white;font-size:12px;",n.innerText="Ad History",n.addEventListener("click",function(){document.write("<button onclick=\"document.getElementById('debuginfo').select()\">Select All</button>&nbsp;|&nbsp;<button onclick=\"localStorage.removeItem('_adbrh');location.reload()\">Clear History</button>&nbsp;|&nbsp;<button onclick=\"location.reload()\">Refresh</button><br><textarea cols=100 rows=100 style='max-height:80%;max-width:80%' id='debuginfo'>"+JSON.stringify(o,null,2)+"</textarea>")}),document.body.appendChild(n)}}},{"../utils.js":39}],35:[function(d,e,t){var c=d("./utils.js"),u=d("./config.js");e.exports=function(n,o){function a(e,t){if(e.pub_active){var r,i=u.libSettings("pub");if(!i)return c.log(s,"pub check deferred"),r=!1,void t.on("pub.config",c.wrapAsync(function(){r||(r=!0,a(e,t))}));if(!e.pub_active(i))return void c.log(s,"inactive due to pub check")}if(e.active&&!e.active())return c.log(s,"inactive");n.track_as&&c.thread(function(){d("./analytics.js").mod(n.track_as)})(),c.log(s,"instantiating"),o(e,t)}var s=n.name||"summodhuh";return a}},{"./analytics.js":17,"./config.js":19,"./utils.js":39}],36:[function(e,t,r){var a=e("./utils.js");function i(e){var t=this,r=e.url,i=e.config,n=e.id,o=e.callback,e=e.loaded;this.url=r,this.config=i,this.handlers={},this.id=n,this.loaded=e,this.cmd=[],this.push=function(e){"function"!=typeof e?a.err("Commands given to Renderer.push must be wrapped in a function"):t.loaded?e.call():t.cmd.push(e)},this.callback=o||function(){t.loaded=!0,t.process()},a.load(r,this.callback,!0)}i.install=function(e){return new i({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded})},i.prototype.getConfig=function(){return this.config},i.prototype.setRender=function(e){this.render=e},i.prototype.setEventHandlers=function(e){this.handlers=e},i.prototype.handleVideoEvent=function(e){var t=e.id,e=e.eventName;"function"==typeof this.handlers[e]&&this.handlers[e](),a.log("Prebid Renderer event for id "+t+" type "+e)},i.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){a.err("Error processing Renderer command: ",e)}},t.exports=i},{"./utils.js":39}],37:[function(e,t,r){function m(t,e){var r="GET"===t.method&&("object"==typeof t.data?h.toqs(t.data,!0):t.data),r={method:t.method,url:"GET"===t.method&&r?[t.url,"?",r].join(""):t.url,withCredentials:!1!==(t.options&&t.options.withCredentials),parseResponseJson:void 0===t.parseResponseJson||t.parseResponseJson,data:"POST"===t.method&&("object"==typeof t.data?JSON.stringify(t.data):t.data),contentType:(t.options||{}).contentType,headers:(t.options&&t.options||{}).customHeaders,timeout:e.max_ms,_orig:t};return d.libSettings().ajaxraw&&(r.rawProcessor=function(e){d.libSettings().ajaxraw(t,e)}),r}function i(e,t){var r=(t=t.config.size.split("x"))[0],r=(2*(t=t[1])<r?["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;}",".native-flex{display:flex;flex-direction:column;height:",t,"px;}",".native-flex-container{display:flex;flex-direction:row;flex:1}",".native-flex-content{display:flex;flex-direction:column;flex:7}",".native-image{background-image:url(",e.image.url,");flex:1;margin-right:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-flex">','<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-flex-container">','<div class="native-image"></div>','<div class="native-flex-content">','<div class="native-title">',e.title,"</div>",'<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</div>","</div>","</div>","</a>"]:["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;display:flex;flex-direction:column;height:",t,"px;}",".native-image{background-image:url(",e.image.url,");flex:2;margin-bottom:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-title">',e.title,"</div>",'<div class="native-image"></div>','<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</a>"]).join("");return r+=["<script>",'var container=Array.from(document.getElementsByTagName("script")).pop().parentElement,','body=container.querySelector(".native-body"),','body2=container.querySelector(".native-body2");',"if(container.clientHeight-container.scrollHeight)",'body.innerText="";','body2.innerText="";',"<\/script>"].join("")}function n(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var t=t.split("="),r=t[0],t=t[1];return/\[\]$/.test(r)?(e[r=r.replace("[]","")]=e[r]||[],e[r].push(t)):e[r]=t||"",e},{}):{}}function o(e,t){var r=document.createElement("a"),e=(t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e),t&&t.decodeSearchAsString);return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:e?r.search:n(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}}var a,s,f=e("./ajax.js"),h=e("./utils.js"),b=e("../src/modules.js"),d=e("./config.js"),e=e("./renderer.js"),v={auction:void 0,gdpr_consent_object:void 0},y=function(e,t){return(t.unit.settings&&t.unit.settings.nativeTemplate||i)(e,t)},_={pick:function(n,o){var a;return"object"!=typeof n?{}:(a={},h.each(o,function(e,t){var r,i;"function"!=typeof e&&((i=(r=e).match(/^(.+?)\sas\s(.+?)$/i))&&(e=i[1],r=i[2]),i=n[e],void 0!==(i="function"==typeof o[t+1]?o[t+1](i,a):i)&&(a[r]=i))}),a)},replaceAuctionPrice:function(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)},debugTurnedOn:function(){return!!h.isdebug()},safeJSONParse:function(e){try{return JSON.parse(e)}catch(e){}},convertOrtbRequestToProprietaryNative:function(e){return e},createEidsArray:function(){var e=v.auction.findUnit(function(){return 1}),e=e&&e.toPrebidUIDs();return e&&e.userIdAsEids},JSEncrypt:0,sha256:0,formatQS:function(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return t+"[]="+e}).join("&"):t+"="+e[t]}).join("&")},findIndex:function(e,t){return e.indexOf(t)},getWindowFromDocument:function(e){return e?e.defaultView:null},getRefererInfo:function(){return h.urlref()},mergeDeep:function(){var e=arguments[0];if(e&&"object"==typeof e)for(var t=1;t<arguments.length;++t){var r=arguments[t];if(r&&"object"==typeof r)for(var i in r){var n=typeof r[i];switch(n="object"===n&&Array.isArray(r[i])?"array":n){case"array":e[i]=(e[i]||[]).concat(r[i]);break;case"object":e[i]=_.utils.mergeDeep(e[i]||{},r[i]);break;default:e[i]=r[i]}}}return e},isPlainObject:function(e){return h.isobj(e)},getGptSlotInfoForAdUnitCode:function(t){var e;return(e=window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots?find(window.googletag.pubads().getSlots(),function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}):e)?{gptSlot:e.getAdUnitPath(),divId:e.getSlotElementId()}:{}},parseUrl:function(e,t){var r=document.createElement("a"),e=(t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e),t&&"decodeSearchAsString"in t&&t.decodeSearchAsString);return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:e?r.search:n(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}},getValue:function(e,t){return e[t]},buildUrl:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":"+e.port:""))+(e.pathname||"")+(e.search?"?"+_.formatQS(e.search||""):"")+(e.hash?"#"+e.hash:"")},isBoolean:function(e){},getParameterByName:function(e){return h.qs(e)||""},getAdUnitSizes:function(e){var t,r;if(e)return t=[],e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)?(r=e.mediaTypes.banner.sizes,Array.isArray(r[0])?t=r:t.push(r)):Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes)),t},parseQueryStringParameters:function(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&(r+=t+"="+encodeURIComponent(e[t])+"&");return r},getKeys:function(e){return Object.keys(e)},insertElement:function(e,t,r,i){r=(t=t||document).getElementsByTagName(r||"head"),t=(r=r.length?r:t.getElementsByTagName("body"))[0];if(t)return t.insertBefore(e,i?null:t.firstChild)},getDataFromLocalStorage:function(e){if(window.localStorage)return window.localStorage.getItem(e)},inIframe:function(){return!h.url().is_top},_map:function(r,i){var n;return r?"function"==typeof r.map?r.map(i):(n=[],h.each(r,function(e,t){n.push(i(e,t,r))}),n):[]},deepAccess:h.deepAccess,deepSetValue:function(e,t,n){return t.split(".").reduce(function(e,t,r,i){return r===i.length-1?e[t]=n:e[t]=e[t]||{}},e)},getTopWindowUrl:function(){return h.url().href},getWindowSelf:function(){return window.self},getWindowTop:function(){return window.top},isArray:function(e){return Array.isArray(e)},parseSizesInput:function(e){return e.map(function(e){return e.join("x")})},parseGPTSingleSizeArray:function(e){if(Array.isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1]))return e.join("x")},_each:h.each,cookiesAreEnabled:function(e){if(!e)return h.cookies;e(h.cookies)},logError:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Error |"),h.log.apply(null,e),b.trigger("pbevt.log_error",arguments)},logWarn:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Warning |"),h.log.apply(null,e),b.trigger("pbevt.log_warn",arguments)},logMessage:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Message |"),h.log.apply(null,e)},logInfo:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Info |"),h.log.apply(null,e)},getBidIdParameter:function(e,t){return t&&t[e]||""},getUniqueIdentifierStr:(s=0,function(){return++s}),convertCamelToUnderscore:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},convertTypes:function(i,n){return h.each(i,function(e){var t=i[e],r=i[e];n[e]="function"==typeof t?r(r):"string"===t?r&&r.toString():"number"===t?Number(r):r,isNaN(n[e])&&delete n[e]}),n},createTrackPixelHtml:h.pixelh,isEmpty:function(e){if(e){if(Array.isArray(e)||"string"==typeof e)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1}return!0},transformBidderParamKeywords:function(e){var r=[];return h.each(e,function(e,t){t={key:t};Array.isArray(e)&&(t.value=e.map(function(e){return e+""})),null!=e&&(t.value=[e+""]),t.hasOwnProperty("value")&&r.push(t)}),r},tryAppendQueryString:function(e,t,r){return r?e+(t+"="+encodeURIComponent(r))+"&":e},isAllowZeroCpmBidsEnabled:function(){return!0},isFn:function(e){return"function"==typeof e},isStr:function(e){return"string"==typeof e},isEmptyStr:function(e){return""===e},assign:h.assign,isInteger:Number.isInteger||function(e){return Math.floor(e)===e&&isFinite(e)},isNumber:function(e){return"number"==typeof e},groupBy:function(e,r){return e.reduce(function(e,t){return(e[t[r]]=e[t[r]]||[]).push(t),e},{})},deepClone:function i(n){return Object.keys(n||{}).reduce(function(e,t){var r={}.toString.call(n[t]).slice(8,-1);return e[t]="Array"===r||"Object"===r?i(n[t]):"Date"===r?new Date(n[t].getTime()):"RegExp"===r?new RegExp(n[t]):n[t],e},Array.isArray(n)?[]:{})},flatten:function(e,t){return e.concat(t)},chunk:function(e,i){return e.reduce(function(e,t,r){return r%i?e[e.length-1].push(t):e.push([t]),e},[])},fill:function(e,t){for(var r=[];r.length<t;r.push("object"==typeof e?_.utils.deepClone(e):e));return r},getMaxValueFromArray:Function.apply.bind(Math.max,0),getMinValueFromArray:Function.apply.bind(Math.min,0),isArrayOfNums:function(e,t){return e.length===(t||e.length)&&e.reduce(function(e,t){return e&&"number"==typeof t},!0)},generateUUID:h.genUUID,getBidRequest:function(e,t){for(var r=0;r<t.length;++r)for(var i=t[r],n=0;n<i.bids.length;++n){var o=i.bids[n];if(o.bidId===e||o.adId===e||o.bid_id===e)return o}h.err("shimGetBidRequestFail",e)},triggerPixel:function(e){h.uspi("S2S",e)},uniques:function(e,t,r){return r.indexOf(e)===t},contains:function(e,t){return 0<e.length&&-1!==e.indexOf(t)},getOrigin:function(){return h.url()},getDNT:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},getCookie:h.cr,isGptPubadsDefined:function(){return window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots},isSlotMatchingAdUnitCode:function(t){return function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}},verify:null,_each:h.each,urlUtils:{parse:o},getUniqueIdentifierStr:function(){return++a},url:{type:a=0,parse:o,format:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(_.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}},BANNER:"banner",VIDEO:"video",NATIVE:"native",ADPOD:"adpod",OUTSTREAM:"outstream",INSTREAM:"instream",config:{DynamicPrefix:!0,getLegacyFpd:function(n){var t;if("object"==typeof n)return t={},Object.keys(n).forEach(function(i){var e="site"===i?"context":i;t[e]="context"===e||"user"===e?Object.keys(n[i]).filter(function(e){return"data"!==e}).reduce(function(e,t){var r;return"ext"===t?_.utils.mergeDeep(e,n[i][t]):((r={})[t]=n[i][t],_.utils.mergeDeep(e,r)),e},{}):n[i]}),t},config:{userSync:{syncsPerBidder:5,syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0}},getAnyConfig:function(e){return _.config.getConfig(e)},getConfig:function(e){switch(e){case"pageUrl":return h.url().href;case"bidderTimeout":return v.auction.max_ms;case"consentManagement.cmpApi":return v.gdpr_consent_object.cmpApi;case"rubicon.singleRequest":return!0;case"ortb2":return Config.ortb2();case"publisherDomain":return window.location.origin;case"priceGranularity":return"custom";case"yahoossp.endpoint":return"https://c2shb.ssp.yahoo.com/bidRequest";case"customPriceBucket":return{buckets:(d.libSettings().bid_strategy||"").split(",").map(function(e){var e=e.split(":"),t=e[1].split("-").map(Number);return{precision:2,increment:e[0],min:t[0],max:t[1]}})};default:return h.deepAccess(_.config.config,e)}},bidders:null,js:null,setDefaults:function(e){if("object"!=typeof e)return h.err("defaults must be an object, received",e);h.assign(_.config.config,e)},vastXml:null,vastUrl:null,align:null,closeButton:null,collapse:null,label:null,position:null,rubicon:null},parse:o,parseDomain:function(e,t){var r=(t=t||{}).noLeadingWww||!1,t=t.noPort||!1;try{if(e&&!/\w+:\/\//.exec(e)){var i=window.location.protocol;try{i=window.top.location.protocol}catch(e){}e=/^\/\//.exec(e)?i+e:i+"//"+e}console.log("url after proto",e),e=new URL(e)}catch(e){return void console.log("url creation had error",e)}return e=t?e.hostname:e.host,e=r&&e.startsWith("www.")?e.substring(4):e},registerBidder:function(){},userSync:{registerSync:function(e,t,r){var i="image"===e||"img"===e?h.uspi:"iframe"===e?h.uspf:void 0;i?i(t,r):_.logWarn('User sync type "'+e+'" not supported')}},includes:function(e,t){return-1!==e.indexOf(t)},find:function(e,t){return e.filter(t)[0]},Renderer:e,loadExternalScript:function(e,t){_.logWarn("module "+t+"is loading external JavaScript"),h.load(e,null,!0)},ajax:function(e,i,t,r){f(h.assign({},r,{data:t,url:e}),function(e,t,r){e?i&&i.error&&i.error(e.err,e):i&&i.success?i.success(t,r):i&&i(t)})},getIabSubCategory:function(){return null},auctionManager:{getAdUnits:function(){return v.PBJSObjects.bidRequests}},getStorageManager:function(e){var a=h.wrapAsync(function(e,t,r){r=r();return"function"==typeof t?t(r):r});return{findSimilarCookies:function(e,t){return a("findSimilarCookies",t,function(){return[]})},getCookie:function(e,t){return a("getCookie",t,function(){})},setCookie:function(e,t,r,i,n,o){return a("setCookie",o,function(){})},cookiesAreEnabled:function(e){return a("cookiesAreEnabled",e,function(){return!1})},hasLocalStorage:function(e){return a("hasLocalStorage",e,function(){})},localStorageIsEnabled:function(e){return a("localStorageIsEnabled",e,function(){return!1})},setDataInLocalStorage:function(e,t,r){return a("setDataInLocalStorage",r,function(){})},getDataFromLocalStorage:function(e,t){return a("getDataFromLocalStorage",t,function(){return null})},removeDataFromLocalStorage:function(e,t){return a("removeDataFromLocalStorage",t,function(){})}}},getGlobal:function(){return AdBridg.globals},CONSTANTS:{EVENTS:{AUCTION_INIT:"auctionInit",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",NO_BID:"noBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",BILLABLE_EVENT:"billableEvent"}},events:{on:function(e,t){b.trigger("pbevt.sub",e,t)}},hasDeviceAccess:function(){return!0},hasPurpose1Consent:h.wrapAsync(function(){return!v.gdpr_consent_object||!v.gdpr_consent_object.gdprApplies||!0===h.deepAccess(v.gdpr_consent_object,"vendorData.purpose.consents.1")}),validateStorageEnforcement:function(e,t,r,i){i({valid:!1})},bidderSettings:{get:function(e,t){}}};_.utils=_,t.exports={wrap:function(l){var g={},r={};return function(p,i,e,n){this.gdprSupport=l.gdprSupport,this.uspSupport=l.uspSupport,this.settings=e,this.buildPrebidParams=function(e){return t=l.unitIDKey,r=l.floorKey,i=l.floorStr,e=e,delete(n=h.deepAssign({},e.params)).adjust,n[t]=e.bidder_unit_id,"string"==typeof n[t]&&-1===["amx","undertone","yieldmo","pubmatic","conversant","deepintent","kargo","saambaa","ttd"].indexOf(e.bidder_name)&&n[t].match(/^\d+$/)&&(n[t]=parseInt(n[t])),e.bidder_name.match(/^(index|ix)/)&&(n.bidFloorCur="USD"),"string"==typeof n.size&&(n.size=h.sizeStrToArr(n.size)),r&&(n[r]=e.min_cpm,i&&(n[r]=n[r].toFixed(2))),!n.video&&e.mediaTypes.video&&(n.video=h.copy(e.mediaTypes.video)),n;var t,r,i,n},this.getPrebidReqCtr=function(e){return(g[e]||0)+1},this.getPrebidWinCtr=function(e){return r[e]||0},b&&b.on("pub.spa_pv_shutdown",function(){g={}}),this.onBidWon=h.wrapAsync(function(e){r[e.adUnitCode]=(r[e.adUnitCode]||0)+1;var t=l.spec;"function"==typeof t.onBidWon&&(h.log("Adapter onBidWon",p,e),t.onBidWon(e))}),this.onSetTarget=h.wrapAsync(function(e){var t=l.spec;"function"==typeof t.onSetTargeting&&(h.log("Adapter onSetTarget",p,e),t.onSetTargeting(e))}),this.execute=function(o){function a(){Object.keys(u).map(function(e){return u[e]}).filter(function(e){return!e.found}).forEach(function(e){e.unit.addEmptyBid(e.config)}),b.trigger("bidder.done",s,p,o),h.mock()?h.logl("mock","bypass usync"):[].concat(l.spec.getUserSyncs&&h.wrapAsync(l.spec.getUserSyncs,void 0,l.spec)({syncsPerBidder:5,syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0},c.map(function(e){return{body:e||{}}}))||[]).forEach(function(e){_.userSync.registerSync(e.type,i,e.url)})}var r,t={},s=(o.eachBidRequest(p,function(e){e=e.toPrebidAdUnitCode();t[e]||(t[e]=!0,g[e]=(g[e]||0)+1)}),v.auction=o,v.gdpr_consent_object=n,v.alias=p,o.toPrebidBidderReq(p)),e=(l.floorKey&&l.floorStr&&s.bids.forEach(function(e){e.params[l.floorKey]=String(e.params[l.floorKey])}),s.bidderCode.match("Sovrn")&&h.each(s.bids,function(e){e.params&&e.params.size&&(e.mediaTypes.banner.sizes=[e.params.size])}),s.start=(new Date).getTime(),{bidderRequest:s,bidRequests:s.bids}),d=(v.PBJSObjects=e,h.each(e.bidRequests,function(e){try{l.spec.isBidRequestValid(e)}catch(e){h.log("Adapter BR invalid",e)}}),h.wrapAsync(l.spec.buildRequests,void 0,l.spec)(e.bidRequests,e.bidderRequest)),c=(Array.isArray(d)||(d=[d]),[]),u=(r={},o.eachBidRequest(p,function(e,t){r[t.id]={config:t,unit:e}}),r);h.mock()?(e=Math.floor(Math.random()*(o.ajax_ms-250))+50,h.logl("mock","bypass bidders",e),setTimeout(a,e)):("function"==typeof l.spec.onTimeout&&o.onHalt(function(){var t=[];h.each(s.bids,function(e){o.getBidRequest(e.bidId).responses.length||(e={bidId:e.bidId,bidder:e.bidder,adUnitCode:e.adUnitCode,auctionId:e.auctionId,params:[e.params],timeout:o.max_ms},h.log("AdBridg bid object for timeout calculation",p,e),t.push(e))}),t.length&&(h.log("Adapter onTimeout",p,t),l.spec.onTimeout(t))}),d.map(m,o).forEach(function(e,n){e.max_ms=o.ajax_ms,b.trigger("bidder.before_request",e,s),f(e,h.wrapAsync(function(e,t,r){if(c.push(t),e&&"parse"!==e.type&&("timeout"===e.type&&(h.each(s.bids,function(e){h.isarr(e.params)||(e.params=[e.params]),e.timeout=o.max_ms}),_.logError("  xhr timeout after ",o.max_ms,"ms")),_.logError("Server call for "+s.bidderCode+" failed: "+e.err+" "+r.status+". Continuing without bids."),b.trigger("pbevt.ajax_error",r,s,o)),!e||"parse"===e.type){var i;try{i=l.spec.interpretResponse.apply(l.spec,[{body:t||r.responseText},d[n]])}catch(e){_.logError("Bidder "+s.bidderCode+" failed to interpret the server's response. Continuing without bids",null,null)}(i=Array.isArray(i)?i:[i].filter(Boolean)).forEach(function(e){var t,r,i=u[e.requestId];if(!i)return h.err(["unrequested response from",p,":",JSON.stringify(e)].join(" "));e.requestTimestamp=s.start,e.responseTimestamp=(new Date).getTime(),e.timeToRespond=e.responseTimestamp-e.requestTimestamp,t=e,r=i.config,t.ad||t.native||t.renderer||(t.vastUrl||t.vastXml)&&r.renderer?(t=i,(r=e).currency&&!r.originalCurrency&&(r.originalCurrency=r.currency),e={creative:r.ad||(r.native?y(r.native,t):void 0),vastUrl:r.vastUrl,vastXml:r.vastXml,cpm:r.cpm,width:r.native?0|t.config.size.split("x")[0]:r.width,height:r.native?0|t.config.size.split("x")[1]:r.height,extras:{dealid:r.dealId||r.dealid,crid:r.creativeId||r.creativeid,ttl:r.ttl,cur:r.currency,nr:r.netRevenue,mediaType:r.mediaType},render:r.renderer&&r.renderer.render&&r.renderer.render.bind(r.renderer,r),rawbid:r},i.unit.addBid(i.config,e)):i.unit.addEmptyBid(i.config),i.found=!0})}c.length===d.length&&a()}))}),b.trigger("bidder.requested",s,o))}}},polyfills:_}},{"../src/modules.js":23,"./ajax.js":16,"./config.js":19,"./renderer.js":36,"./utils.js":39}],38:[function(e,t,r){var T=e("./utils"),k=e("./analytics"),z=e("./modules"),j=e("./config");t.exports=function(e){this.id=0,this.alias="",this.size="",this.other_sizes=[],this.min_cpm=0,this.max_ms=0,this.dom_ad_class="",this.settings={},this.unique_id=T.genID("U"),this.uuid=T.genUUID(),this.auction=!1,this.all_sizes=[],this.original_sizes=[];var v=this,s={},y={},p=0,n={},_=[],l={},i=!1,w=!1,t=!1,x=!1,g=!1,o=[],I=(this.init=function(){e&&(v.set(e),z.trigger("unit.init_config",v))},this.restrictSizesTo=function(e){v.all_sizes=v.original_sizes,T.logl("sz","Unit",v.alias,"restrict sizes to",JSON.stringify(e)," old _allowed_sizes",JSON.stringify(g)),g=e,o.length&&v.allowSizes(o);for(var t,r,i=[],n=v.all_sizes.length-1;0<n;--n)-1===g.indexOf(v.all_sizes[n])&&(t=v.all_sizes[n],v.all_sizes.splice(n,1),0<=(r=v.other_sizes.indexOf(t))&&v.other_sizes.splice(r,1),i.push(t));a(),T.logl("sz","Unit",v.alias,"removed sizes",JSON.stringify(i),"allowed sizes",JSON.stringify(g)),z.trigger("unit.restrict_sizes",v,g,i)},this.allowSizes=function(e){o=[],T.each(e,function(e){T.logl("sz","Unit size added",v.alias,e),g&&-1==g.indexOf(e)&&g.push(e),-1==o.indexOf(e)&&o.push(e),-1==v.other_sizes.indexOf(e)&&v.other_sizes.push(e),-1==v.all_sizes.indexOf(e)&&v.all_sizes.push(e),a()}),T.logl("sz","Unit",v.alias,"allowed sizes",o),z.trigger("unit.allow_sizes",v,o)},this.configure=function(e){var t,r=T.qs("adb_maxms");for(t in r&&(e.max_ms=r),e)"unique_id"!=t&&"auction"!=t&&("settings"==t?T.each(e[t],function(e,t){v.settings[t]=e}):v.hasOwnProperty(t)&&"function"!=typeof v[t]&&(v[t]=JSON.parse(JSON.stringify(e[t]))));v.all_sizes=[v.size].concat(v.other_sizes),v.original_sizes=[].concat(v.all_sizes),T.logl("sz","Unit definition original_sizes=",JSON.stringify(v.original_sizes),"size=",JSON.stringify(v.size),"other_sizes=",JSON.stringify(v.other_sizes)),T.qs("adb_force_bidder")&&(v.min_cpm=0),a(),z.trigger("unit.config",v)},this.addBidder=function(e,t){l[e]=t},this.eachBidder=function(e){for(var t in l)l.hasOwnProperty(t)&&s[t]&&e(t,l[t])},this.hasBidReqConf=function(){return 0<p},this.addBidReqConf=function(d,e,r){var c,u={id:T.genID("BR"),uuid:T.genUUID(),unit:v,adjust:1,bidder_name:d,bidder_id:e.bidder_id,bidder_unit_id:e.bidder_unit_id,min_cpm:v.min_cpm,size:v.size,other_sizes:v.other_sizes,all_sizes:[],responses:[],late_responses:[],test:e.test,toPrebid:function(e){var t=v.auction.getBdrReqId(d),r=v.toPrebidUIDs(),i=T.copy(v.settings.mediaTypes),n=m(i,v.all_sizes),o=v.toPrebidAdUnitCode(),a=(c=c||l[d].getPrebidReqCtr(o),v.get("imp_ctr")||1),s=j.ortb2(d),t=T.assign({src:"client",adUnitCode:o,adbconfig:v.alias,auctionId:v.auction.uuid,bidId:u.id,bidder:d,bidderRequestId:t,bidderRequestsCount:c,bidderWinsCount:l[d].getPrebidWinCtr(o),bidRequestsCount:a,mediaTypes:i,params:u.params,sizes:n,transactionId:v.uuid,ortb2:s,ortb2Imp:v.toPrebidOrtb2Imp(d),renderer:v.settings.renderer},r),o=u.mediaTypes.native||u.nativeParams;return o&&(t.nativeParams=o),e&&(t.timeout=v.max_ms,t.params=[t.params]),t}};if(l[d]){T.deepAssign(u,v.settings,l[d].settings,e.settings),u.params=T.deepAssign({},l[d].settings,e.settings),1!=u.adjust&&(u.min_cpm=Number((u.min_cpm/u.adjust).toFixed(2)));var t=[],i=!1;if("function"==typeof e.mutate&&t.push({n:"BidReq",f:e.mutate}),"function"==typeof l[d].mutate&&t.push({n:"Bidder",f:l[d].mutate}),T.each(t,function(t){try{t.f(u,r)||(i=!0,T.log(t.n+" mutate rejected BR: ",u))}catch(e){T.err("MutateFail-"+t.n+"-"+d,e)}}),!i)if(u.test&&!T.qsab(d,u.bidder_id,!0))T.log("Test configuration skipped: ",u);else{if(e.settings.size?(u.other_sizes=[],u.size=e.settings.size):"string"==typeof u.other_sizes&&(u.other_sizes=u.other_sizes?u.other_sizes.split(","):[]),g){var n=[];0<=g.indexOf(u.size)&&n.push(u.size);for(var o=0;o<u.other_sizes.length;++o){var a=u.other_sizes[o];0<=g.indexOf(a)&&n.push(a)}if(!n.length)return void(g.length&&T.log("Unit ",v.alias," skipped configuration for ",u.bidder_name," because it does not support any of these sizes: ",g));u.size=n[0],u.other_sizes=n.slice(1)}u.all_sizes=[u.size].concat(u.other_sizes),T.logl("sz","Bid request sizes:",u.bidder_name,u.bidder_unit_id,{size:u.size,other:u.other_sizes,all:u.all_sizes}),s[d]||(s[d]=[]),s[d].push(u),y[u.id]=u,++p,u.params=l[d].buildPrebidParams(u),z.trigger("unit.config_brc",v,u)}}else T.err("BR missing bidder",d)},this.eachBidReqConf=function(e,t){"function"==typeof e&&(t=e,e=!1),e?T.each(s[e],t):T.each(y,t)},this.getBidReqConf=function(e){return y[e]||!1},this.getBid=function(e){for(var t=0;t<_.length;++t)if(_[t].id===e)return _[t];return!1},this.set=function(e,t){if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&v.set(r,e[r]);else n[e]=t},this.setImpData=function(e,t,r){var i=v.get("adb_imp_data")||{};i[e]=r&&i[e]||t,v.set("adb_imp_data",i)},this.get=function(e){return n[e]},this.halt=function(){w=!0},this.onReady=function(e){t=e,I()},function(){x&&t&&setTimeout(function(){t(v)},0)}),S=(this.markEmpty=function(e){v.eachBidReqConf(e,function(e){e.responses.length||v.addEmptyBid(e)})},this.addEmptyBid=function(e){if("number"==typeof e||"string"==typeof e){var t=e;if(!(e=y[t]))return void T.err("Could not find bid req: ",t)}e.responses.length||w&&e.late_responses.length||v.addBid(e,{})},function(e,t){return e._bid_cpm==t._bid_cpm&&e.width==t.width&&e.height==t.height&&e.creative==t.creative}),r=(this.bidRendered=function(e,t){var r,i=e.config.bidder_name;l[i]?((r=e.pbjsBid).status="rendered",l[i].onBidWon&&(r.params=e.config.toPrebid().params,l[i].onBidWon(r)),z.trigger("bid.render",e,t)):T.err("uBidRender.notFound",i,v.id)},this.gptTargetSet=function(e){var t=e.config.bidder_name;l[t]?((e=e.pbjsBid).status="targetingSet",l[t].onSetTarget&&l[t].onSetTarget(e)):T.err("gptTargetSet.notFound",t,v.id)},!(this.addBid=function(e,t){if(!e||!v.getBidReqConf(e.id))return T.err("Bid request from ",e.bidder_name,"not found on unit",v.id),!1;t.cpm&&(t.cpm=parseFloat(t.cpm)),z.trigger("bid.mutate_raw",t,e);var r=t.config&&t.config.unit&&t.config.unit.unique_id,i=Number(parseFloat(t.cpm).toFixed(2))||0,n=Number(t.width)||0,o=Number(t.height)||0,a=t.creative||"",s=t.creative_url||"",d=t.extras||{},c=t.force||!1,u=t.render,p=t.vastUrl,l=t.vastXml,g=t.rawbid,m=(i||(t.empty=!0),Number((i*e.adjust).toFixed(2))),f=e.min_cpm,h=(!r&&0<f&&m<f&&(m=0),j.libSettings().pubchkcreativefn),h=(a&&"function"==typeof h&&!h(e,t,j.libSettings())&&(T.log("Creative blocked: ",e.bidder_id,n,o,m,d),m=0),r?t.ts:T.dts()),b=r?t.ms:Math.round(h-v.auction.ts),b={id:v.id+"."+T.genID("B"),ms:b,ts:h,config:e,viable:!w,cpm:m,_min_cpm:f,_bid_cpm:i,force:c,width:n,height:o,creative:a,creative_url:s,extras:d,render:u,vastUrl:p,vastXml:l,rawbid:g};return r&&((b._origin=t)._pool||(t._pool=[]),t._pool.push(b)),A(b),function(e,t){for(var r=0;r<e.responses.length;++r)if(S(t,e.responses[r]))return!0;for(r=0;r<e.late_responses.length;++r)if(S(t,e.late_responses[r]))return!0;return!1}(e,b)?(T.log("Unit ",v.alias,"ignored duplicate bid from ",e.bidder_name," on BR ",e.id,": ",b.ms,b.width+"x"+b.height,b.cpm.toFixed(2)),!1):(h=b.viable?"":"late ",!b.cpm&&0<b._bid_cpm?(m=1!=e.adjust?" * "+e.adjust+" = "+Number((b._bid_cpm*e.adjust).toFixed(2)):"",h+="below-floor ("+b._bid_cpm+m+" < "+b._min_cpm+") "):t.empty&&(h+="empty "),T.log("Unit",v.alias,"got",h+"bid"+(r?" (pooled from "+r+")":""),"from",e.bidder_name,"on BR",e.id,": ",b.ms,b.width+"x"+b.height,b.cpm.toFixed(2)),z.trigger("bid.ready",b),b.pbjsBid&&E(b),b.viable?(e.responses.push(b),_.push(b),z.trigger("bid.response",b),function(){if(!w){for(var e in y){e=y[e];if(e.responses&&!e.responses.length)return}x=!0,I()}}()):(b.pbjsBid&&(b.pbjsBid.timeout=this.max_ms),e.late_responses.push(b),k.lateBid(b)),b)})),a=(this.getWinner=function(){return r||(r=!0,"function"==typeof j.libSettings().filter_bid&&T.wrapAsync(j.libSettings().filter_bid),T.each(_,function(e){z.trigger("bid.auction_close_filter",v,e),e.blocked&&(e.cpm=0,T.log("Bid filtered out",v.alias,e.config.bidder_name,"reason:",e.blocked));var t,r=e.width+"x"+e.height;!e.cpm||!g||-1!=g.indexOf(r)||j.libSettings().bypass_size_check&&-1!=j.libSettings().bypass_size_check.bidder.indexOf(e.config.bidder_name)?(t=e.cpm&&(!i||e.cpm>i.cpm||e.cpm==i.cpm&&.5<Math.random()),i&&i.force&&(t=!1),(e.force||t)&&(i=e)):(t=e._origin?"(pooled bid from "+e._origin.config.unit.unique_id+")":"",T.log("Unit ",v.alias,"rejected",t,e.config.bidder_name,"invalid size",r),e._origin||T.err("U",v.id," B",e.config.bidder_id+"."+e.config.bidder_unit_id,r,g))}),i&&(T.log("Unit ",v.alias,"set winner to ",i.config.bidder_name,i._origin&&"(pooled bid from "+i._origin.config.unit.unique_id+")"||"",i.width+"x"+i.height,i.cpm.toFixed(2)),z.trigger("bid.auction_winner",i))),i},this.toPrebidUIDs=function(){var i=!1;return T.each(n,function(e,t){var r=t.match(/^userId\.(.+)$/),t=t.match(/^userIdAsEids\.(.+)$/);!r&&!t||i||(i={userId:{},userIdAsEids:[]}),r&&(i.userId[r[1]]=e),t&&i.userIdAsEids.push(e)}),i&&i.userIdAsEids.sort(function(e,t){return e.name<t.name?1:-1}),i&&i.userId.pubcid&&(i.crumbs={pubcid:i.userId.pubcid}),i||{}},function(){v.settings.mediaTypes||(v.settings.mediaTypes={}),v.settings.mediaTypes.banner={sizes:v.all_sizes.filter(Boolean).map(T.sizeStrToArr)}}),m=function(e,t){for(var r=e.banner?T.copy(e.banner.sizes):[],i=r.length-1;0<=i;--i)-1===t.indexOf(r[i].join("x"))&&(debugit=!0,r.splice(i,1));if(e.video){var n=e.video.playerSize;T.isarr(n[0])||(n=[n]);for(i=0;i<n.length;++i){var o=n[i].join("x");-1===t.indexOf(o)&&r.push(n[i])}}return r},d=function(e,t){return T.toRange(e,t,!0).kv.split("-").shift()},c=function(e){var t=!e&&"0.00";return{pbLg:t||d(e,".5:0-5"),pbMg:t||d(e,".1:0-20"),pbHg:t||d(e,".01:0-20"),pbDg:t||d(e,".01:0-2.99;.05:3-7.5;.5:8-20"),pbAg:t||d(e,".05:0-4.95;.1:5-9.5;.5:10-20"),pbCg:t||d(e,j.libSettings().bid_strategy)}},A=function(e){var t,r,i,n=e.config.toPrebid();e.rawbid&&e.viable?(i=n.bidId,t=n.auctionId,r=v.uuid,e._origin&&(i=e._origin.pbjsBid.requestId,t=e._origin.pbjsBid.auctionId,r=e._origin.pbjsBid.transactionId),i=T.deepAssign({currency:"USD",originalCurrency:"USD",mediaType:"banner"},e.rawbid,{source:"client",statusMessage:"Bid available",requestId:i,auctionId:t,transactionId:r,cpm:e.cpm,originalCpm:e._bid_cpm,adapterCode:n.bidder,bidderCode:n.bidder,bidder:n.bidder,adUnitCode:n.adUnitCode,adbconfig:n.adbconfig,adId:e.id,width:e.width,height:e.height}),e.pbjsBidO=T.deepAssign({},i),e.pbjsBid=i):e.pbjsNoBid=n},E=function(e){var t=e.width+"x"+e.height,r=c(e.pbjsBid.cpm),i=e.rawbid&&e.rawbid.adserverTargeting||{},n={hb_bidder:e.pbjsBid.bidderCode,hb_adid:e.pbjsBid.adId,hb_adomain:"",hb_acat:"",hb_pb:r.pbMg,hb_size:t,hb_source:"client",hb_format:e.rawbid.mediaType||"banner"};e.pbjsBid.meta&&(e.pbjsBid.meta.advertiserDomains&&e.pbjsBid.meta.advertiserDomains.length&&(n.hb_adomain=e.pbjsBid.meta.advertiserDomains[0]),e.pbjsBid.meta.primaryCatId&&(n.hb_acat=e.pbjsBid.meta.primaryCatId)),T.assign(e.pbjsBid,r,{size:t,adserverTargeting:T.assign(n,i)})};this.toPrebidAdUnitCode=function(){return v.get("dom_id")||v.unique_id},this.toPrebidOrtb2Imp=function(t){var r=v.get("gpt_slot"),e={};if(r){var r=r.getAdUnitPath(),i=r+"#"+v.toPrebidAdUnitCode(),e={ext:{tid:v.uuid,data:{adserver:{name:"gam",adslot:r},pbadslot:i,keywords:""},gpid:i}},r=j.libSettings("unit_ortb2",this,t,e);if("string"==typeof r)try{"object"==typeof(r=JSON.parse(r))&&T.deepMerge(e,r)}catch(e){T.err("UnitOrtb2JsonFail",this.id,t||0),r=!1}}return e},this.toPrebidAdUnit=function(){var e=T.copy(this.settings.mediaTypes),t=m(e,this.all_sizes),r=this.toPrebidUIDs(),i=[];return this.eachBidReqConf(function(e){i.push(T.assign({bidder:e.bidder_name,params:e.params},r))}),{code:this.toPrebidAdUnitCode(),adbconfig:this.alias,sizes:t,mediaTypes:e,bids:i,ortb2Imp:this.toPrebidOrtb2Imp(),transactionId:this.uuid}},this.toPrebidResults=function(){var t={noBids:[],bidsReceived:[],winningBids:[],prebidWinningBids:[]};return T.each(_,function(e){e._origin||(e.pbjsBid&&(t.bidsReceived.push(e.pbjsBid),"rendered"===e.pbjsBid.status?t.winningBids.push(e.pbjsBid):"targetingSet"===e.pbjsBid.status&&t.prebidWinningBids.push(e.pbjsBid)),e.pbjsNoBid&&t.noBids.push(e.pbjsNoBid))}),t},this.init()}},{"./analytics":17,"./config":19,"./modules":23,"./utils":39}],39:[function(e,t,x){function r(e){return{loading:1,interactive:2,complete:3}[e=e||document.readyState]||0}function n(e,t,r){return e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r),r}function i(e,t,r){e.removeEventListener?e.removeEventListener(t,r):e.detachEvent&&e.detachEvent("on"+t,r)}x.wrapAsync=function(e,t,r){return function(){try{return e.apply(r||this,arguments)}catch(e){t?t(e):x.err("Caught AsyncErr: ",e)}}},x.thread=function(t){return t=x.wrapAsync(t),function(){var e=arguments;setTimeout(function(){t.apply(this,e)},0)}},x.attempt=function(e,t){try{return e()}catch(e){}return t};var o,a=1,s=(new Date).getTime(),d=function(){try{s-=Math.round(performance.now()),d=function(){return r()+"T"+Math.round(performance.now()).toString(36)},o=[a,s.toString(36),d()]}catch(e){d=function(){return r()+"T"+Math.max(0,(new Date).getTime()-s).toString(36)},o=[a=0,s.toString(36),r()+"T0"]}},c=(d(),x.on=n,x.off=i,n(document,"readystatechange",function(){3==r()&&i(document,"readystatechange",arguments.callee),o.push(d())}),x.perfts=function(){return d()},x.pgts=function(){return o},x.dts=function(){return a?Number(performance.now().toFixed(2)):Number(Math.max(0,(new Date).getTime()-s).toFixed(2))},0);x.genID=function(e){return(e||"")+ ++c+Math.random().toString(16).substr(2)},x.dnt=function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},x.vp=function(){var e,t,r,i=document;try{e=window.innerWidth,t=window.innerHeight,r=window.pageYOffset,window_x=window.pageXOffset}catch(e){}return{w:e||i.documentElement&&i.documentElement.clientWidth||i.body&&i.body.clientWidth||0,h:t||i.documentElement&&i.documentElement.clientHeight||i.body&&i.body.clientHeight||0,y:r||i.body&&i.body.scrollTop||0,x:window_x||i.body&&i.body.scrollLeft||0}},x.cr=function(e){e=String(document.cookie).match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return e=e?decodeURIComponent(e[2]):""},x.cw=function(e,t,r,i){exp_string=0<(r=r||1)?"max-age="+86400*r:"max-age=-99999";r=e+"="+encodeURIComponent(t)+";"+exp_string+";path=/;domain=";r+=i||window.location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1"),document.cookie=r},x.lr=function(t,e){var r,i,n="",o="";try{(o=localStorage.getItem(t))&&(e||(o=JSON.parse(o)),r=(new Date).getTime(),(i=e?new Date(localStorage.getItem(t+"_exp")).getTime():parseInt(o.e||"0",36))&&i<r?x.logl("ls","LS expired",t,o,i,r):(x.logl("ls","LS read",t,o,i,r),n=e?o:o.v))}catch(e){x.logl("ls","LS read fail",t,o,e)}return n},x.lw=function(t,r,i,n){try{var e,o,a=n?r:{v:r};i&&(e=(new Date).getTime(),o=Math.round(e+Math.floor(864e5*i)),n?localStorage.setItem(t+"_exp",new Date(o).toUTCString()):(a.s=e.toString(36),a.e=o.toString(36))),n||(a=JSON.stringify(a)),localStorage.setItem(t,a),x.logl("ls","LS written",t,r,n,i,a)}catch(e){x.logl("ls","LS write fail",t,r,n,i,e)}},x.sr=function(t){try{return sessionStorage.getItem(t)}catch(e){x.logl("ss","SS read fail",t,e)}return""},x.sw=function(t,r){try{sessionStorage.setItem(t,r),x.logl("ss","SS written",t,r)}catch(e){x.logl("ss","SS write fail",t,r,e)}};try{x.cw("adbct",1),x.cookies=!!x.cr("adbct"),x.cw("adbct","",-1)}catch(e){}try{x.safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}catch(e){}x.https=!("https:"!=location.protocol),x.genUUID=function(e){try{return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,x.genUUID)}catch(e){return 0}},x.qs=function(e){e=new RegExp(e+"=([^&]+)");return(String(window.location.search).match(e)||[]).pop()};var u=x.qs("adb_force_bidder"),p=x.qs("adb_allow_bidder"),l=[];u&&"*"!=u&&(l=l.concat(u.split(","))),p&&"*"!=p&&(l=l.concat(p.split(","))),x.qsab=function(e,t,r){return t=String(t),"*"==p||"*"==u||(!r&&!u||0<=l.indexOf(t)||0<=l.indexOf(e))},x.qsappend=function(e,t,r,i){return i&&!t?"":"&"+e+"="+(t=r?encodeURIComponent(t):t)},x.toqs=function(e,r){var i="";return x.each(e,function(e,t){x.isarr(e)?x.each(e,function(e){i+=x.qsappend(t+"[]",e,r)}):i+=x.qsappend(t,e,r)}),i.replace(/^\&/,"")},x.each=function(e,t){if(e&&0!==e.length)if(e.length)for(var r=0;r<e.length;++r)t(e[r],r);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},x.sizeStrToArr=function(e){if(!x.isarr(e)){if("string"==typeof e)return e.split("x").map(Number);x.err("BadSizeConvert",e)}return e},x.resize_element=function(e,t,r){e.style.width&&String(e.style.width).replace("px","")==t||(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")==r||(e.style.height=r+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=r&&e.setAttribute("height",r)},x.resize_iframe=function(e,t,r,i){try{for(var n=e.document.getElementsByTagName("iframe")||[],o=0;o<n.length;++o)try{if(n[o].contentDocument===t)return x.resize_element(n[o],r,i),void(e!==top&&x.resize_iframe(e.parent,e.document,r,i))}catch(e){}}catch(e){x.err("Error resizing window to "+r+"x"+i,e)}x.err("Failed to resize window to "+r+"x"+i)},x.url=function(){var t,r,i,n,o,e=top,a=window,s=document,d=!1;try{d=window.parent===window}catch(e){}try{t=e.location.host,r=e.location.pathname+e.location.search+e.location.hash,href=e.location.href,i=e.document.referrer,n=e.document.title,o=e.location.protocol}catch(e){try{t=(String(s.referrer).match(/^[^\/]+\/\/([^\/]+)/)||[]).pop(),r=(String(s.referrer).match(/^[^\/]+\/\/[^\/]+(\/.+)$/)||[]).pop(),o=(String(s.referrer).match(/^https?\:/)||[]).pop(),href=s.referrer,n=i=""}catch(e){}}return t&&r||(t=a.location.host,r=a.location.pathname+a.location.search+a.location.hash,o=a.location.protocol,href=a.location.href,i=s.referrer),{domain:t,page:r,href:href,referrer:i,title:n,is_top:d,protocol:o}},x.urlref=function(){var e=x.url(),t=function(){try{var e=document.querySelector("link[rel='canonical']");if(null!==e)return e.href}catch(e){}return null}(),t={reachedTop:!0,isAmp:!1,numIframes:0,stack:[e.href],topmostLocation:e.href,location:e.href,canonicalUrl:t,page:e.href,domain:e.domain,legacy:{reachedTop:!0,isAmp:!1,numIframes:0,stack:[e.href],referer:e.href,canonicalUrl:t}};return e.referrer&&(t.ref=e.referrer),t},x.random=function(e,t){return Math.floor(Math.random()*(t-e))+e},x.pixel=function(e,t){t=t?(new Date).getTime():Math.random();document.createElement("img").src=e+"&rnd="+t},x.pixelh=function(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(e)+'"></div>':""},x.pixelf=function(e,t,r){return e?(t&&(e=encodeURI(e)),"<iframe "+(r=r?'sandbox="'+r+'"':"")+' id="'+x.genID("IPF")+'" src="'+e+'" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0p;width:0p;display:none;" scrolling="no"></iframe>'):""};function g(e){return 61<e?g(e/62|0)+g(e%62):35<e?String.fromCharCode(e+29):9<e?String.fromCharCode(e+87):-1<e?e+"":e<0?"-"+g(-e):"NaN"}var m,f,h=[],b={},v=(x.uspf=x.wrapAsync(function(e,t){x.logl("px","UserSync qF",e,b[e],5,t),b[e]=(b[e]||0)+1,5<b[e]||h.push({a:e,t:"f",u:t})}),x.uspi=x.wrapAsync(function(e,t){x.logl("px","UserSync qI",e,b[e],5,t),b[e]=(b[e]||0)+1,5<b[e]||h.push({a:e,t:"i",u:t})}),!0),y=!0,_=500,w=!(x.cfusp=function(e,t,r){e||(v=!1),t||(y=!1),r&&(_=r),x.log("UserSync set: ",{image:v,iframe:y,delay:_})}),I=(x.cfuspfn=function(e){w=e},x.wrapAsync(function(){if(clearTimeout(m),h.length){var e=Math.floor(Math.random()*h.length),t=h[e];if(h.splice(e,1),w&&!w(t))return x.logl("px","UserSync not sent (pub): ",t),I();if(y&&"f"==t.t){e=document.createElement("div");e.innerHTML=x.pixelf(t.u,!1,"allow-scripts allow-same-origin"),document.body.appendChild(e.firstChild),x.logl("px","UserSync (F): ",t.a,t.u)}else{if(!v||"i"!=t.t)return x.logl("px","UserSync not sent (!): ",t),I();document.createElement("img").src=t.u,x.logl("px","UserSync (I): ",t.a,t.u)}m=setTimeout(I,50)}})),S=(x.qdusp=function(){if(x.logl("px","UserSync Q",h,_,v,y,x.safari,x.cookies),x.safari||!x.cookies)return x.logl("px","UserSync skipped",x.safari,x.cookies);clearTimeout(m),m=setTimeout(I,_)},{}),A=(x.load=function(e,t,r,i){var n;if(t=t?x.wrapAsync(t):function(){},!r||!S[e])return r&&(S[e]||(S[e]={ready:!1,cbs:[t]}),t=function(){S[e].ready=!0,x.each(S[e].cbs,function(e){e()})}),(n=document.createElement("script")).type="text/javascript",n.async=!0,n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=t,n.src=e,(i||document.body||document.head).appendChild(n),n;S[e].ready?t():S[e].cbs.push(t)},x.loadCached=function(e,t){x.load(e,t,!0)},x.iiframe=function(e){var t=document.createElement("iframe");return t.id=x.genID("IIF"),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t.src=void 0===e?"about:blank":e,t.style.display="none",t},x.prepend=function(e,t){return"string"==typeof t&&(t=document.createElement(t)),e.prepend?e.prepend(t):e.children.length?e.insertBefore(t,e.children[0]):e.appendChild(t),t},x.isarr=function(e){return"[object Array]"===Object.prototype.toString.call(e)},!(x.isobj=function(e){return"[object Object]"===Object.prototype.toString.call(e)})),E=(x.isdebug=function(){return A},x.setdebug=function(e){e&&(A=e,x.lw("adb_debug",A))},x.log=function(){if(A){var e=Array.prototype.slice.apply(arguments);e.unshift("AdBridg | "+x.dts().toFixed(2));try{console.log.apply(console,e)}catch(e){}}},x.logl=function(e){A==e&&x.log.apply(x,["log::",e].concat(Array.prototype.slice.apply(arguments,[1])))},x.setdebug(x.qs("adb_debug")||x.lr("adb_debug")),[]),T=(x.err=function(){var t=Array.prototype.slice.apply(arguments);if(A){var e=[].concat(t);e.unshift("AdBridg | "+x.dts().toFixed(2)+" | ERROR: ");try{console.log.apply(console,e)}catch(e){}}f&&!(t=f(t))||E.length&&x.each(E,function(e){e.apply(null,t)})},x.onerr=function(e){E.push(e)},!(x.wraperr=function(e){f=e})),k=(x.mock=function(e){return e&&(String(e).match(/^(native|small|large)$/)?(x.log("-- system mock engaged: ",e),T=e):x.err("MockValueInvalid",e)),T},x.mock(x.qs("adb_mock")),!1),z=[],j=(x.onrec=function(e){for(k=e;z.length;)k(z.shift())},x.rec=function(e){k?k(e):z.push(e)},{}),O=(x.toRange=function(e,t,r){e=Math.round(100*e);for(var i=function(e){if(!j[e=e||".05:.05-10"]){j[e]=[];for(var t=e.split(","),r=0;r<t.length;++r){var i=t[r].split(":"),n=i[1].split("-"),i={increment:Math.round(100*parseFloat(i[0])),upper:Math.round(100*parseFloat(n[1])),final:!1};r==t.length-1&&(i.final=i.upper-i.increment),j[e].push(i)}}return j[e]}(t),n=0;n<i.length;++n){var o,a,s=i[n];if(s.final&&e>=s.upper-s.increment)return{r:parseFloat(((s.final+s.increment)/100).toFixed(2)),kv:(s.final/100).toFixed(2)+"-"};if(!(e>=s.upper))return o=Math.floor(e/s.increment)*s.increment/100,a=(s=parseFloat((o+s.increment/100).toFixed(2)))-.01,{r:s,kv:Math.max(r?0:.01,o).toFixed(2)+"-"+a.toFixed(2)}}},x.b62=g,x.fb62=function(e){for(var t=0,r=e.length-1,i=r;0<=i;i--){var n=e.charCodeAt(i),o=i===r?1:Math.pow(62,r-i);if(96<n&&n<123)t+=o*(n-87);else if(64<n&&n<91)t+=o*(n-29);else{if(!(47<n&&n<58))return NaN;t+=o*(n-48)}}return t},x.dom=x.wrapAsync(function(e,t,r,i,n,o){O.add(e,t,r,i,n,o)}),x.undom=x.wrapAsync(function(e,t){O.remove(e,t)}),x.lzrescan=x.wrapAsync(function(e){O.rescan(e)}),new function(){function s(e,t){if(e.f&&!e.f(e,t,l))return x.logl("lz","Lazy blocked",e,l),!1;if(t.in){if(!e.x)return x.logl("lz","Lazy cannot measure el",e,t),!1;var r=document.getElementById(e.i);if(!r)return x.logl("lz","Lazy collapse check - cannot read el",e,t),!1;var i=(r||{}).parentNode;if(!i)return x.logl("lz","Lazy collapse check - cannot read parent",e,t),!1;var n=x.where(i);if(!n.in)return x.logl("lz","Lazy collapse check - parent invis",e,t,n),!1;n=document.createElement("span"),r=(n.style="position:absolute;display:block;width:1px;height:1px;",i.insertBefore(n,r),x.where(n));i.removeChild(n),x.logl("lz","Lazy collapse check - using replacement coords",JSON.stringify({coords:t,replacement:r})),t=r}return 0<e.d&&e.d<1?0===t.d&&(0===t.c.h||0===t.c.w)||t.v>e.d:t.d<=e.d}var t,d,c={},u=0,p=[],r=!1,i=!1,l=!1,g=(this.add=function(e,t,r,i,n,o){var a;e instanceof Node&&((a=e).id||(a.id=x.genID("adb_auto_")),e=a.id),c[e]=c[e]||[],c[e].push({c:i,d:t,t:r,i:e,f:n,x:o}),u+=1,g()},this.remove=function(e,t){var r,i=c[e]||[];if(t)for(r=i.length-1;0<=r;--r)i[r].c===t&&c[e].splice(r,1);for(t&&i.length||delete c[e],r=p.length-1;0<=r;--r)t&&p[r].c!==t||p.splice(r,1)},this.rescan=function(e){x.logl("lz","Lazy explicit rescan"),e&&(d=e),t=setTimeout(g,0)},n(window,"scroll",function(){l=!0,!t&&u&&(x.logl("lz","Lazy scroll wait",100),t=setTimeout(g,100))}),x.thread(function(){var a,e=x.dts();clearTimeout(t),t=!1,r||e-i<50?t=setTimeout(g,50):(r=!0,i=e,x.logl("lz","Lazy measure",e),a=[],x.each(c,function(e,t){var r=x.where(t);if(!r)return x.logl("lz","Lazy no dom",t);for(var i=e.length-1;0<=i;--i){var n=e[i],o=s(n,r);x.logl("lz","Lazy check",JSON.stringify({el:t,coords:r,reqdist:n.d,criteria:o,seenscr:l})),!o&&d&&(o=d(n,r))&&x.logl("lz","Lazy allowed",t),o&&(--u,e.splice(i,1),p.push(n),x.logl("lz","Lazy to duration",t))}e.length||a.push(t)}),x.each(a,function(e){delete c[e]}),e=function(e){for(var t=!1,r=p.length-1;0<=r;--r){var i=p[r],n=i.i;if(x.logl("lz","Lazy check time",i,n," has scroll event: ",l),i.tx){if(!s(i,x.where(n))){x.logl("lz","Lazy back to distance",n),i.tx=0,p.splice(r,1),c[n]=c[n]||[],c[n].push(i),u+=1;continue}}else i.tx=e+i.t;var o=i.tx-e;o<=0?(x.logl("lz","Lazy execute",n),p.splice(r,1),x.thread(i.c)(n)):t=t?Math.min(1+o,t):1+o}return t}(e)||100,p.length&&(x.logl("lz","Lazy duration wait",e),t=setTimeout(g,e)),r=!1)}))}),C=(x.obox=function(e,t){e={top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left),right:Math.min(e.right,t.right)};return e.width=Math.round(e.right-e.left),e.height=Math.round(e.bottom-e.top),e.area=Math.round(e.width*e.height),e},x.opct=function(e,t,r,i,n){var o=x.obox(t,{top:0,bottom:r.h,left:0,right:r.w}),a=o.area,s=a/(Math.round(t.width)*Math.round(t.height)),d={o:0,p:0,v:s,e:{}};if(a){var c,r=o.left+o.width/2,t=o.top+o.height/2,u={mm:[r,t],tl:[o.left+5,o.top+5],br:[o.right-5,o.bottom-5]},p=(7<=n&&(u.tm=[r,o.top+5],u.tr=[o.right-5,o.top+5],u.bl=[o.left+5,o.bottom-5],u.bm=[r,o.bottom-5]),9<=n&&(u.mr=[o.right,t],u.ml=[o.left,t]),[]);for(c in u)if(u.hasOwnProperty(c)){var l=u[c],g=document.elementFromPoint(l[0],l[1]);if(i&&g&&(((l=document.getElementById(i))===g||g.contains(l)||l.contains(g))&&(g=!1)),g&&g!==e&&!e.contains(g)&&!g.contains(e)){var m=x.obox(o,g.getBoundingClientRect()),f=0,h=0,b=g,v=b.parentNode;if(!v.contains(e)){for(f+=1;v.parentNode&&!v.parentNode.contains(e);)f+=1,v=v.parentNode;for(;v!==b;){for(var y=x.obox(o,v.getBoundingClientRect()),_=y.area==m.area,_=((y.area>m.area||_&&h<f)&&(m=y,g=v,h=f),v),w=0;w<v.children.length;++w)if(v.children[w]===b||v.children[w].contains(b)){--f,v=v.children[w];break}if(v===_)break}}if(-1===p.indexOf(g)&&(p.push(g),d.e[c]={el:g,p:m.area,o:m.area/a},d.p+=m.area,d.o=Math.min(1,d.p/a),d.v=d.o?(1-d.o)*s:s,1===d.o))break}}}return d},x.where=function(e,t,r){var i,n,o,a,s,d,c,u,p,l,g;return!!(e="string"==typeof e?document.getElementById(e):e)&&(i=e.getBoundingClientRect(),n=x.vp(),o=i.top,a=i.height,s=i.top+a,d="in_viewport",u=1,g=(c=0)<i.width&&0<a,p=0,(l=C(e))&&(p=1,d="unknown"),o<0?(c=s<0?Math.abs(s):0,d=((u=0<s&&g?s/a:0)?"partially_":"")+"above_viewport"):s>n.h?(c=o>n.h?o-n.h:0,d=((u=o<n.h&&g?(n.h-o)/a:0)?"partially_":"")+"below_viewport"):g||(u=0),g=null,{i:l,p:d,d:c,v:u,in:p,o:g=t&&u&&!p?x.opct(e,i,n,r):g,c:{vp:n,t:o,l:i.left,h:a,w:i.width,b:s}})},x.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},x.copy=function(e){if(x.isarr(e)){for(var t=[],r=0;r<e.length;++r)t.push(x.copy(e[r]));return t}return"object"==typeof e?x.deepAssign({},e):e},x.deepAssign=function(e){if(!e)return e;for(var r=Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){r[t]=x.copy(e)});return r},x.deepMerge=function(e){if(!e)return e;for(var i=x.isarr(e),n=i?e:Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){var r=x.isarr(e),r="object"==typeof e?x.deepMerge(n[t]||(r?[]:{}),e):x.copy(e);i?n.push(r):n[t]=r});return n},x.deepAccess=function(e,t,r){t=t.split(".").reduce(function(e,t){return(e||{})[t]},e);return t||void 0===r?t:r},x.deepEq=function(i,n,o,a){o=o||[],a=a||"";for(var e,t=0;t<o.length;++t){var r=o[t];if(r instanceof RegExp&&String(a).match(r))return!0;if(r===a)return!0}return!("function"!=typeof n||!n(i))||("object"!=typeof i||"object"!=typeof n||null==i||null==n?i===n||{p:a,o1:i,o2:n}:0===(e=Object.keys(Object.assign({},i,n)).reduce(function(e,t){var r=a?a+"."+t:t,t=x.deepEq(i[t],n[t],o,r);return t&&t.hasOwnProperty("p")&&t.hasOwnProperty("o1")&&t.hasOwnProperty("o2")?e.push(t):!0!==t&&(e=e.concat(t)),e},[])).length||e)},function(e){try{if(!e)return"no_dom_el";var t=window.getComputedStyle&&window.getComputedStyle(e)||{};if("none"==t.display)return"display_none";if("hidden"==t.visibility)return"vis_hidden"}catch(e){x.err("get_invis_fail")}return!1});x.dom_invisible=x.wrapAsync(function(e){var t=document.getElementById(e),r=C(t);if(r)return"el_"+r;for(var i=0;t.parentNode&&(t=t.parentNode)!==document.body;)if(i+=1,r=C(t))return"anc_"+i+"_"+r;return!1})},{}]},{},[21]);